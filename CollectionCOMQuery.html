<html lang="it"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CATALOGO QUERY COM</title>
    <link rel="stylesheet" type="text/css" href="CollectionCOMQuery.css">
	<link rel="icon" href="dbCOM.png" type="image/png">
    <script src="CollectionCOMQuery.js" defer=""></script> <!-- Collegamento al file JavaScript -->
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

</head>
<body>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CATALOGO QUERY COM</title>
    <link rel="stylesheet" type="text/css" href="CollectionCOMQuery.css">
	<link rel="icon" href="dbCOM.png" type="image/png">
    <script src="CollectionCOMQuery.js" defer=""></script> <!-- Collegamento al file JavaScript -->
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>



    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CATALOGO QUERY COM</title>


 <!-- Chiamata alla funzione ripristinaTabella() al caricamento della pagina -->
    <div class="title">CATALOGO QUERY COM</div>
    <!-- Tabella puntamenti -->
    <div class="container">
        <div>
            <div class="database-description">
                Puntamenti Database COM
            </div>
                <table id="myTable">
					<thead>
						<tr>
							<th>Ambiente</th>
							<th>Host</th>
							<th>Port</th>
							<th>Service Name</th>
							<th>Console</th>
							<th>Console Details</th>							
							<th>Console Reprocesser</th>										
							<th>Azioni</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>PROD</td>
							<td>10.55.207.217</td>
							<td>1567</td>
							<td>BWKp_PDB</td>
							<td>https://ehconsole-prod.aws.windtre.it/#/pages/Login</td>
							<td>https://ehconsolebackend-prod.aws.windtre.it/api/ehc/detail/getCfgDetails</td>
							<td>https://ehconsoletibco-prod.aws.windtre.it/reprocess</td>							
							<td>n.a.</td>
						</tr>
						<tr>
							<td>STORICO</td>
							<td>crm-ora-iv-scan.wind.root.it</td>
							<td>1521</td>
							<td>h1esbp_app_service.wind.root.it</td>
							<td>n.a.</td>
							<td>n.a.</td>							
							<td>n.a.</td>							
							<td>n.a.</td>
						</tr>
						<tr>
							<td>INT</td>
							<td>esbdbs50.wind.root.it</td>
							<td>1522</td>
							<td>bwkd_pdbint1</td>
							<td>https://ehconsole-int.aws.windtre.it/#/pages/Login</td>
							<td>https://ehconsolebackend-int.aws.windtre.it/api/ehc/detail/getCfgDetails</td>				
							<td>n.a.</td>							
							<td>n.a.</td>
						</tr>
						<tr>
							<td>HT</td>
							<td>esbdbs50.wind.root.it</td>
							<td>1522</td>
							<td>bwkd_pdbhf</td>
							<td>https://ehconsole-st.aws.windtre.it/#/pages/Login</td>
							<td>https://ehconsolebackend-st.aws.windtre.it/api/ehc/detail/getCfgDetails</td>							
							<td>n.a.</td>							
							<td>n.a.</td>
						</tr>
					</tbody>
				</table>
			<p></p>
            <button class="chapter-button" onclick="aggiungiRiga()">Aggiungi Riga</button> <!-- Pulsante per aggiungere una riga -->
	
    </div>
        </div>
		

<!-- Indice -->

    <div class="index-container">
        <div class="index-title">Indice
		</div>
		<button class="chapter-button" onclick="aggiungiCapitolo()">Aggiungi Capitolo</button>
        <ul class="index-list">
            <li class="index-item"><a href="#chapter1">CAP 1 - Esempio</a>
                <ul class="paragraphs-list">
                    <li><a href="#chapter1-section1">PAR 1.1 - Esempio</a></li>
                </ul>
				<ul class="paragraphs-list"></ul>
			</li>

		<li class="index-item"><a href="#ID1717335096082">CAP 2 - Query utilità generale</a><ul class="paragraphs-list"></ul><ul class="paragraphs-list"><li><a href="#ID1717335490633">PAR 2.1 - Estrazione EMF a partire da action e request name</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717336002931">PAR 2.2 - Estrazione id ordine a partire dall'action id</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717337127952">PAR 2.3 - Estrae un dettaglio di una certa action a partire da id_ordine</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717338322350">PAR 2.4 - Estrae ordini per i quali a fronte di una richiesta SOM non è stata ricevuta risposta</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717338466444">PAR 2.5 - Estrae informazioni dalla cfg_action (query 1)</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717338756343">PAR 2.6 - Estrae EMD della action SOM a partire da id_ordine</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717338860913">PAR 2.7 - Estrae tutte le action verso COMB a partire da id_ordine</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717413558006">PAR 2.8 - Estrazione action a partire dalla rootId o id_ordine</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717413650316">PAR 2.9 - Estrazione dettagli fallimento a partire dalla actionId</a></li></ul></li><li class="index-item"><a href="#ID1717339283017">CAP 3 - Estrazioni provisioning SOM</a><ul class="paragraphs-list"></ul><ul class="paragraphs-list"><li><a href="#ID1717339748096">PAR 3.1 - Esegue parsing dell'errore sui fallimenti SOM</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717355961753">PAR 3.2 - Estrae array ed elementi da un EMF di SOM</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717405733228">PAR 3.3 - Estrae array ed elementi da un EMF di SOM (query 2)</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717406639623">PAR 3.4 - Estrazione di tutti i parametri presenti nelle strutture productOrderItem,attrs,productCharacteristic,relatedEntity di un EMF SOM</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717407793613">PAR 3.5 - Esegue Parsing di un esito SOM a partire dall'EMF entrando per id action (o id ordine) </a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717414030675">PAR 3.6 - Estrae i dettagli di un BB dal catalogo SOM</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717438952177">PAR 3.7 - Estrae un esempio di EMF per ogni ordine che va su SOM</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717443044244">PAR 3.8 - Estrae tutti i campi verso il SOM a partire da id_ordine</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717444448355">PAR 3.9 - Estrae tutti i campi verso il SOM in maniera completa entrando per id_ordine</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717487503180">PAR 3.10 - Estrazione di tutti i campi pubblicati al SOM per id_ordine (***)</a></li></ul></li><li class="index-item"><a href="#ID1717340190450">CAP 4 - Estrazioni provisioning GSI</a><ul class="paragraphs-list"><li><a href="#ID1717340494447">PAR 4.1 - Estrae action GSI da dettagli dall'EMF</a></li></ul></li><li class="index-item"><a href="#ID1717341107452">CAP 5 - Estrazioni provisioning BILLING</a><ul class="paragraphs-list"><li><a href="#ID1717341162103">PAR 5.1 - Estrae action billing a partire dal tel_no</a></li></ul></li><li class="index-item"><a href="#ID1717345081937">CAP 6 - Estrazioni REPORT COM</a><ul class="paragraphs-list"><li><a href="#ID1717345154546">PAR 6.1 - Estrazione ultimo report utile</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717345292330">PAR 6.2 - Estrazione campi di dettaglio del report</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717345416390">PAR 6.3 - Estrae csv di un report</a></li></ul></li><li class="index-item"><a href="#ID1717346077096">CAP 7 - Estrazioni gestione PREFERENTIAL LIST</a><ul class="paragraphs-list"><li><a href="#ID1717346336964">PAR 7.1 - Estrazione numerazioni dall'EMF di PL</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717346509167">PAR 7.2 - Estrae request di PL ed il numero di telefono</a></li></ul></li><li class="index-item"><a href="#ID1717354015894">CAP 8 - Query DISCARD</a><ul class="paragraphs-list"><li><a href="#ID1717354317061">PAR 8.1 - Estrazione dalla discard dal id_ordine</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717354434954">PAR 8.2 - Estrae eventi dalla discard entrando per sistema e in like sul messaggio</a></li></ul></li><li class="index-item"><a href="#ID1717408739474">CAP 9 - Estrazione eventi con CRM</a><ul class="paragraphs-list"><li><a href="#ID1717408932196">PAR 9.1 - Estrazione dettaglio esiti dall'EMF CRM outbound</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717413417324">PAR 9.2 - Estrazione dettagli sede consegna su EMF CRM</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717418490154">PAR 9.3 - Estrazione timing task di long aging da id_ordine o root_id</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717428066319">PAR 9.4 - Parsing ordine CRM json in forma non gerarchica su COM</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717430756354">PAR 9.5 - Estrazione oggetti di pricing e override su cmf-root COM </a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717432710041">PAR 9.6 - Parsing ordine CRM json in forma gerarchica su COM entrando per action_id EMF siebel</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717432776047">PAR 9.7 - Parsing ordine CRM json in forma gerarchica su COM entrando per action_id EMF siebel (ottimizzata)</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717432901025">PAR 9.8 - Parsing ordine CRM json in forma gerarchica su COM entrando per id_ordine EMF siebel</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717487792380">PAR 9.9 - Estrazione dettaglio ordini per ordini sospensione CRM</a></li></ul></li><li class="index-item"><a href="#ID1717421225849">CAP 10 - Estrazione dettaglio eventi verso COMBILLING</a><ul class="paragraphs-list"><li><a href="#ID1717429267359">PAR 10.1 - Estrae dettaglio dei Billing Element su eventi di attivazione a partire da id_ordine</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717429433200">PAR 10.2 - Estrae dettaglio dei Billing Element su eventi di change be a partire da id_ordine</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717429607738">PAR 10.3 - Estrae dettaglio dei Billing Element su eventi di subentro a partire da id_ordine</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717429903512">PAR 10.4 - Estrae dettaglio linea su eventi di attivazione da id_ordine</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717430086778">PAR 10.5 - Estrae dettaglio linea su evento di cessazione a partire da id_ordine</a></li></ul></li><li class="index-item"><a href="#ID1717431168285">CAP 11 - Estrazione caistiche con CVP</a><ul class="paragraphs-list"><li><a href="#ID1717431275021">PAR 11.1 - Estrazione subentri con KO di CVP andati avanti</a></li></ul><ul class="paragraphs-list"></ul><ul class="paragraphs-list"><li><a href="#ID1717431489004">PAR 11.2 - Estrazione subentri con KO di CVP bloccati</a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717431562684">PAR 11.3 - Estrazione esito di CVP </a></li></ul><ul class="paragraphs-list"><li><a href="#ID1717431655251">PAR 11.4 - Estrazione dei CDF associati ai subentri con KO di CVP</a></li></ul></li></ul>
    </div>



<!-- STRUTTURA Capitolo 1 -->

    
<div class="chapter-container" id="chapter1">


        <div class="chapter-title">CAP 1 - Esempio</div>
				<button class="chapter-button" onclick="aggiungiParagrafo('chapter1')">Aggiungi Paragrafo</button>
				<button class="chapter-button" onclick="eliminaParagrafo('chapter1')">Elimina Paragrafo</button>
		
		<!-- STRUTTURA DEL PARAGRAFO -->
		<div class="section" id="chapter1-section1">
			
			<!-- STRUTTURA DEL TITOLO DEL PARAGRAFO -->
			<div class="section-column1">
			
				<div class="section-title">PAR 1.1 - Esempio</div>
				<hr>
				<!-- STRUTTURA DELLA QUERY DEL PARAGRAFO -->
				<pre class="bkg-section">				<code class="language-sql">
SELECT * FROM table_name where pippo="pluto";
				</code>
				</pre>
				<button class="chapter-button" onclick="copiaCode('chapter1-section1')">Copia codice</button>
				<button class="chapter-button disabled" onclick="modificaCode('chapter1-section1')" disabled="">Modifica codice</button>
				<button class="chapter-button" onclick="tornaAllInizio()">Torna inizio</button>
			</div>
			<p></p> 
			<div class="section-column2">
				<!-- STRUTTURA DELLA TABELLA DI OUTPUT DEL PARAGRAFO -->
				<table>
					<thead>
						<tr class="first-row">
							<th>Colonna 1</th>
							<th>Colonna 2</th>
							<th>Colonna 3</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>Dato 1</td>
							<td>Dato 2</td>
							<td>Dato 3</td>
						</tr>
					</tbody>
				</table>
			</div>
			<p></p>
        </div>
        <!-- Aggiungi o elimina sottoparagrafo -->
    </div>
	
	
   <div id="myModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close">×</span>
            <textarea id="codeTextarea" rows="10" style="width: 100%;"></textarea>
            <button id="saveCodeButton">Salva</button>
        </div>
    </div>
<div class="chapter-container" id="ID1717335096082"><div class="chapter-title">CAP 2 - Query utilità generale(DIN1717335096082)</div><button class="chapter-button">Aggiungi Paragrafo</button><button class="chapter-button">Elimina Paragrafo</button><div class="section" id="ID1717335490633"><div class="section-column1"><div class="section-title">PAR 2.1 - Estrazione EMF a partire da action e request name (DIN1717335490633)<hr></div><pre><code class="language-sql">select c.name,c.id,d.name,d.id from action c,action_msg b ,request d
where 
 1=1 
and b.message_xml like '%PHX80022%'
and c.name='Send Service Order'
and c.message_id=b.id
and c.status ='SA'
and d.name='Mixed Order' 
and d.id=c.request_id
and d.ts_created  &gt; current_date -90 
--and d.id=631390
limit 3</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>name</th><th>id</th><th>name</th><th>id</th></tr></thead><tbody><tr><td>Send Service Order</td><td>620.154.755.316</td><td>Mixed Order</td><td>686.180</td></tr><tr><td>Send Service Order</td><td>620.154.803.876</td><td>Mixed Order</td><td>691.315</td></tr><tr><td>Send Service Order</td><td>620.155.048.956</td><td>Mixed Order</td><td>714.856</td></tr></tbody></table></div></div><div class="section" id="ID1717336002931"><div class="section-column1"><div class="section-title">PAR 2.2 - Estrazione id ordine a partire dall'action id (DIN1717336002931)<hr></div><pre><code class="language-sql">select b.ts_created,d.value,a.id,a.name,b.id,b.name from action a, request b , item2detail c , detail d
where --a.system='som'
1=1 and a.id in (620154177587,
620153588096,
620153680678)
and b.id=a.request_id
and b.id=c.request_id
and c.detail_id=d.id
and d.name='id_odl_crm'
limit 3</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>ts_created</th><th>value</th><th>id</th><th>name</th><th>id</th><th>name</th></tr></thead><tbody><tr><td>2024-02-21 16:18:12.997 +0100</td><td>1-618008268690</td><td>620.153.588.096</td><td>Send Service Order</td><td>579.665</td><td>Mixed Order</td></tr><tr><td>2024-02-21 16:18:12.997 +0100</td><td>1-618008268690</td><td>620.153.588.096</td><td>Send Service Order</td><td>579.665</td><td>Mixed Order</td></tr><tr><td>2024-04-22 15:22:18.251 +0200</td><td>1-622831680560</td><td>620.154.177.587</td><td>Send Service Order</td><td>631.390</td><td>Mixed Order</td></tr></tbody></table></div></div><div class="section" id="ID1717337127952"><div class="section-column1"><div class="section-title">PAR 2.3 - Estrae un dettaglio di una certa action a partire da id_ordine (DIN1717337127952)<hr></div><pre><code class="language-sql">select ''''||c.value||''',',c.* from action a, item2detail b , detail c ,request d
where 
a.request_id=d.id and 
d.root_id in (select root_id from detail where name='id_odl_crm' and value='1-622426643036') and 
a.name='Notify ICCID' and 
b.action_id=a.id and
c.id=b.detail_id and
c.name='iccid'</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>?column?</th><th>id</th><th>name</th><th>value</th><th>cfg_id</th><th>pos</th><th>root_id</th></tr></thead><tbody><tr><td>'8939880825112013764',</td><td>1.371.286</td><td>iccid</td><td>8939880825112013764</td><td>47</td><td>0</td><td>619.699</td></tr><tr><td>'8939880825112013780',</td><td>1.371.288</td><td>iccid</td><td>8939880825112013780</td><td>47</td><td>1</td><td>619.699</td></tr><tr><td>'8939880825112013798',</td><td>1.371.290</td><td>iccid</td><td>8939880825112013798</td><td>47</td><td>2</td><td>619.699</td></tr><tr><td>'8939880825112013806',</td><td>1.371.292</td><td>iccid</td><td>8939880825112013806</td><td>47</td><td>3</td><td>619.699</td></tr><tr><td>'8939880825112013814',</td><td>1.371.294</td><td>iccid</td><td>8939880825112013814</td><td>47</td><td>4</td><td>619.699</td></tr><tr><td>'8939880825112013822',</td><td>1.371.296</td><td>iccid</td><td>8939880825112013822</td><td>47</td><td>5</td><td>619.699</td></tr><tr><td>'8939880825112013830',</td><td>1.371.298</td><td>iccid</td><td>8939880825112013830</td><td>47</td><td>6</td><td>619.699</td></tr><tr><td>'8939880825112013848',</td><td>1.371.300</td><td>iccid</td><td>8939880825112013848</td><td>47</td><td>7</td><td>619.699</td></tr><tr><td>'8939880825112013855',</td><td>1.371.302</td><td>iccid</td><td>8939880825112013855</td><td>47</td><td>8</td><td>619.699</td></tr><tr><td>'8939880825112013863',</td><td>1.371.304</td><td>iccid</td><td>8939880825112013863</td><td>47</td><td>9</td><td>619.699</td></tr><tr><td>'8939880825112013871',</td><td>1.371.306</td><td>iccid</td><td>8939880825112013871</td><td>47</td><td>10</td><td>619.699</td></tr><tr><td>'8939880825112013889',</td><td>1.371.308</td><td>iccid</td><td>8939880825112013889</td><td>47</td><td>11</td><td>619.699</td></tr><tr><td>'8939880825112013897',</td><td>1.371.310</td><td>iccid</td><td>8939880825112013897</td><td>47</td><td>12</td><td>619.699</td></tr><tr><td>'8939880825112013905',</td><td>1.371.312</td><td>iccid</td><td>8939880825112013905</td><td>47</td><td>13</td><td>619.699</td></tr><tr><td>'8939880825112013913',</td><td>1.371.314</td><td>iccid</td><td>8939880825112013913</td><td>47</td><td>14</td><td>619.699</td></tr><tr><td>'8939880825112014010',</td><td>1.371.316</td><td>iccid</td><td>8939880825112014010</td><td>47</td><td>15</td><td>619.699</td></tr><tr><td>'8939880825112014028',</td><td>1.371.318</td><td>iccid</td><td>8939880825112014028</td><td>47</td><td>16</td><td>619.699</td></tr><tr><td>'8939880825112014036',</td><td>1.371.320</td><td>iccid</td><td>8939880825112014036</td><td>47</td><td>17</td><td>619.699</td></tr><tr><td>'8939880825112014044',</td><td>1.371.322</td><td>iccid</td><td>8939880825112014044</td><td>47</td><td>18</td><td>619.699</td></tr></tbody></table></div></div><div class="section" id="ID1717338322350"><div class="section-column1"><div class="section-title">PAR 2.4 - Estrae ordini per i quali a fronte di una richiesta SOM non è stata ricevuta risposta (DIN1717338322350)<hr></div><pre><code class="language-sql">select 
(select zz.value from detail zz where zz.root_id=d.root_id and zz.name='id_odl_crm' limit 1),
d.*,a.*
from 
action a, 
action_msg b,
request c,request d
where b.id=a.message_id 
and a.name='Send Service Order' 
and a.system='som' 
and a.ts_created&gt;current_date -20
and c.id=a.request_id 
and c.root_id=d.id 
and not exists (select 1 from action z where z.request_id=c.id and z.name='Receive mobile provisioning result')
--and d.root_id in (select root_id from detail where name='id_odl_crm' and value='1-622831680560')
--and d.id=598149
--1nd b.message_xml like  '%po_ANB_SecureEnf%'
--and d.name='Change Order'
limit 5</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>value</th><th>id</th><th>name</th><th>direction</th><th>system</th><th>status</th><th>ts_created</th><th>ts_end</th><th>case_id</th><th>queue_prefix</th><th>document_id</th><th>cfg_id</th><th>parent_id</th><th>root_id</th><th>area</th><th>release</th><th>substatus</th><th>bpme_process_id</th><th>request_detail</th><th>id</th><th>name</th><th>direction</th><th>status</th><th>ts_requested</th><th>ts_created</th><th>ts_enqueued</th><th>ts_first_start</th><th>ts_start</th><th>ts_end</th><th>priority</th><th>ts_todo</th><th>queue</th><th>request_id</th><th>message_id</th><th>system</th><th>cfg_id</th><th>handler</th><th>response_id</th><th>adb_source</th><th>result</th></tr></thead><tbody><tr><td>1-624926682931</td><td>672.508</td><td>Order reactivation</td><td>inbound</td><td>crm</td><td>SA</td><td>2024-05-13 15:34:37.098 +0200</td><td>2024-05-13 15:35:41.721 +0200</td><td>36434</td><td></td><td>112.906</td><td>10</td><td></td><td>672.508</td><td>Order</td><td></td><td></td><td>p:0a201acty</td><td>Riattivazione-Riattivazione</td><td>620.154.607.137</td><td>Send Service Order</td><td>outbound</td><td>SA</td><td>2024-05-13 15:35:02.555 +0200</td><td>2024-05-13 15:34:47.010 +0200</td><td></td><td>2024-05-13 15:35:02.000 +0200</td><td>2024-05-13 15:35:02.000 +0200</td><td>2024-05-13 15:35:07.000 +0200</td><td></td><td></td><td>som-publisher-out</td><td>672.510</td><td>878.716</td><td>som</td><td>25</td><td>com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder</td><td>0</td><td></td><td></td></tr><tr><td>1-625007545428</td><td>674.138</td><td>OutOrder</td><td>inbound</td><td>crm</td><td>SA</td><td>2024-05-14 09:47:49.967 +0200</td><td>2024-05-14 09:48:43.952 +0200</td><td>37062</td><td></td><td>114.313</td><td>8</td><td></td><td>674.138</td><td>Order</td><td></td><td></td><td>p:0a201b0no</td><td>DEACTIVATION-DEACTIVATION</td><td>620.154.626.073</td><td>Send Service Order</td><td>outbound</td><td>SA</td><td>2024-05-14 09:48:14.559 +0200</td><td>2024-05-14 09:48:04.588 +0200</td><td></td><td>2024-05-14 09:48:14.000 +0200</td><td>2024-05-14 09:48:14.000 +0200</td><td>2024-05-14 09:48:17.000 +0200</td><td></td><td></td><td>som-publisher-out</td><td>674.139</td><td>891.429</td><td>som</td><td>25</td><td>com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder</td><td>0</td><td></td><td></td></tr><tr><td>1-624904435223</td><td>672.273</td><td>Activation Order</td><td>inbound</td><td>crm</td><td>SA</td><td>2024-05-13 13:13:40.603 +0200</td><td>2024-05-30 02:14:58.743 +0200</td><td>36245</td><td></td><td>112.705</td><td>1</td><td></td><td>672.273</td><td>Order</td><td></td><td></td><td>p:0a201a93v</td><td>ACTIVATION-ACTIVATION</td><td>620.154.608.374</td><td>Send Service Order</td><td>outbound</td><td>SA</td><td>2024-05-13 16:04:51.379 +0200</td><td>2024-05-13 16:04:29.416 +0200</td><td></td><td>2024-05-13 16:04:51.000 +0200</td><td>2024-05-13 16:04:51.000 +0200</td><td>2024-05-13 16:04:52.000 +0200</td><td></td><td></td><td>som-publisher-out</td><td>672.628</td><td>879.546</td><td>som</td><td>25</td><td>com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder</td><td>0</td><td></td><td></td></tr><tr><td>1-625016899919</td><td>680.185</td><td>Activation Order</td><td>inbound</td><td>crm</td><td>SA</td><td>2024-05-16 12:46:19.127 +0200</td><td>2024-06-01 02:18:04.703 +0200</td><td>39211</td><td></td><td>119.351</td><td>1</td><td></td><td>680.185</td><td>Order</td><td></td><td></td><td>p:0a201dbl6</td><td>ACTIVATION-ACTIVATION_MNP</td><td>620.154.695.989</td><td>Send Service Order</td><td>outbound</td><td>SA</td><td>2024-05-16 14:54:14.610 +0200</td><td>2024-05-16 14:50:46.127 +0200</td><td></td><td>2024-05-16 14:54:14.000 +0200</td><td>2024-05-16 14:54:14.000 +0200</td><td>2024-05-16 14:54:16.000 +0200</td><td></td><td></td><td>som-publisher-out</td><td>680.614</td><td>939.127</td><td>som</td><td>25</td><td>com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder</td><td>0</td><td></td><td></td></tr><tr><td>1-624894234556</td><td>671.726</td><td>Activation Order</td><td>inbound</td><td>crm</td><td>SA</td><td>2024-05-13 10:53:57.123 +0200</td><td>2024-05-27 11:33:10.248 +0200</td><td>36070</td><td></td><td>112.145</td><td>1</td><td></td><td>671.726</td><td>Order</td><td></td><td></td><td>p:0a201a11p</td><td>ACTIVATION-ACTIVATION</td><td>620.154.609.090</td><td>Send Service Order</td><td>outbound</td><td>SA</td><td>2024-05-13 16:24:08.521 +0200</td><td>2024-05-13 16:18:54.640 +0200</td><td></td><td>2024-05-13 16:24:08.000 +0200</td><td>2024-05-13 16:24:08.000 +0200</td><td>2024-05-13 16:24:10.000 +0200</td><td></td><td></td><td>som-publisher-out</td><td>672.690</td><td>880.219</td><td>som</td><td>25</td><td>com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder</td><td>0</td></tr></tbody></table></div></div><div class="section" id="ID1717338466444"><div class="section-column1"><div class="section-title">PAR 2.5 - Estrae informazioni dalla cfg_action (query 1) (DIN1717338466444)<hr></div><pre><code class="language-sql">select * from cfg_action where system='crm' and direction='outbound' and name='VerifyUpdateDataCutOver'</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>name</th><th>direction</th><th>handler</th><th>system</th><th>request_id</th><th>id</th><th>priority</th><th>endpoint</th><th>flag_lock</th><th>substatus_request</th><th>substatus_request_root</th><th>flag_job_shv</th><th>flag_exclude_cmf</th><th>mercato</th><th>area</th></tr></thead><tbody><tr><td>VerifyUpdateDataCutOver</td><td>outbound</td><td>com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.VerifyDataCutOver</td><td>crm</td><td>1</td><td>85</td><td></td><td>crm-publisher-out</td><td>N</td><td></td><td></td><td>Y</td><td>N</td><td>B2B</td><td>Order</td></tr><tr><td>VerifyUpdateDataCutOver</td><td>outbound</td><td>com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.VerifyDataCutOver</td><td>crm</td><td>2</td><td>396</td><td></td><td>crm-publisher-out</td><td>N</td><td></td><td></td><td>Y</td><td>N</td><td>B2B</td><td>Order</td></tr><tr><td>VerifyUpdateDataCutOver</td><td>outbound</td><td>com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.VerifyDataCutOver</td><td>crm</td><td>15</td><td>275</td><td></td><td>crm-publisher-out</td><td>N</td><td></td><td></td><td>Y</td><td>N</td><td>B2B</td><td>Order</td></tr><tr><td>VerifyUpdateDataCutOver</td><td>outbound</td><td>com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.VerifyDataCutOver</td><td>crm</td><td>19</td><td>375</td><td></td><td>crm-publisher-out</td><td>N</td><td></td><td></td><td>Y</td><td>N</td><td>B2B</td><td>Order</td></tr><tr><td>VerifyUpdateDataCutOver</td><td>outbound</td><td>com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.VerifyDataCutOver</td><td>crm</td><td>4</td><td>643</td><td></td><td>crm-publisher-out</td><td>N</td><td></td><td></td><td>Y</td><td>N</td><td>B2B</td><td>Order</td></tr></tbody></table></div></div><div class="section" id="ID1717338756343"><div class="section-column1"><div class="section-title">PAR 2.6 - Estrae EMD della action SOM a partire da id_ordine (DIN1717338756343)<hr></div><pre><code class="language-sql">select z.id,z.name,zz.* from 
      request z,action zz,action_msg x where zz.request_id=z.id and z.name='Network' and zz.name='Send Service Order' and 
      z.root_id      in (select root_id from detail where value in ('1-619821002400')) and 
      zz.message_id=x.id</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>id</th><th>name</th><th>id</th><th>name</th><th>direction</th><th>status</th><th>ts_requested</th><th>ts_created</th><th>ts_enqueued</th><th>ts_first_start</th><th>ts_start</th><th>ts_end</th><th>priority</th><th>ts_todo</th><th>queue</th><th>request_id</th><th>message_id</th><th>system</th><th>cfg_id</th><th>handler</th><th>response_id</th><th>adb_source</th><th>result</th></tr></thead><tbody><tr><td>622.399</td><td>Network</td><td>620.154.080.781</td><td>Send Service Order</td><td>outbound</td><td>SA</td><td>2024-04-17 08:12:09.627 +0200</td><td>2024-04-17 08:12:00.402 +0200</td><td></td><td>2024-04-17 08:12:09.000 +0200</td><td>2024-04-17 08:12:09.000 +0200</td><td>2024-04-17 08:12:12.000 +0200</td><td></td><td></td><td>som-publisher-out</td><td>622.399</td><td>527.751</td><td>som</td><td>25</td><td>com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder</td><td>0</td><td></td><td></td></tr><tr><td>622.400</td><td>Network</td><td>620.154.080.782</td><td>Send Service Order</td><td>outbound</td><td>SA</td><td>2024-04-17 08:14:08.494 +0200</td><td>2024-04-17 08:12:00.399 +0200</td><td></td><td>2024-04-17 08:14:08.000 +0200</td><td>2024-04-17 08:14:08.000 +0200</td><td>2024-04-17 08:14:10.000 +0200</td><td></td><td></td><td>som-publisher-out</td><td>622.400</td><td>527.812</td><td>som</td><td>25</td><td>com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder</td><td>0</td><td></td><td></td></tr><tr><td>624.402</td><td>Network</td><td>620.154.102.569</td><td>Send Service Order</td><td>outbound</td><td>SA</td><td>2024-04-18 04:11:05.716 +0200</td><td>2024-04-18 04:10:52.935 +0200</td><td></td><td>2024-04-18 04:11:05.000 +0200</td><td>2024-04-18 04:11:05.000 +0200</td><td>2024-04-18 04:11:09.000 +0200</td><td></td><td></td><td>som-publisher-out</td><td>624.402</td><td>542.772</td><td>som</td><td>25</td><td>com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder</td><td>0</td><td></td><td></td></tr><tr><td>624.442</td><td>Network</td><td>620.154.102.974</td><td>Send Service Order</td><td>outbound</td><td>SA</td><td>2024-04-18 04:12:01.143 +0200</td><td>2024-04-18 04:11:46.389 +0200</td><td></td><td>2024-04-18 04:12:01.000 +0200</td><td>2024-04-18 04:12:01.000 +0200</td><td>2024-04-18 04:12:03.000 +0200</td><td></td><td></td><td>som-publisher-out</td><td>624.442</td><td>543.047</td><td>som</td><td>25</td><td>com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder</td><td>0</td></tr></tbody></table></div></div><div class="section" id="ID1717338860913"><div class="section-column1"><div class="section-title">PAR 2.7 - Estrae tutte le action verso COMB a partire da id_ordine (DIN1717338860913)<hr></div><pre><code class="language-sql">select b.name,b.id,a.root_id,b.status,a.* from request a, action  b
      where 
      b.request_id=a.id and 
      a.root_id 
      --in (585076      ) 
in (select root_id from detail where value in ('1-619821002400'))
      and b.system='billing' 
      and b.direction='outbound'</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>name</th><th>id</th><th>root_id</th><th>status</th><th>id</th><th>name</th><th>direction</th><th>system</th><th>status</th><th>ts_created</th><th>ts_end</th><th>case_id</th><th>queue_prefix</th><th>document_id</th><th>cfg_id</th><th>parent_id</th><th>root_id</th><th>area</th><th>release</th><th>substatus</th><th>bpme_process_id</th><th>request_detail</th></tr></thead><tbody><tr><td>Active Service Instance</td><td>620.154.080.757</td><td>616.306</td><td>SA</td><td>618.568</td><td>Logistics</td><td>outbound</td><td>gsi</td><td>SA</td><td>2024-04-12 21:41:11.252 +0200</td><td>2024-04-17 08:11:50.845 +0200</td><td>900</td><td></td><td>65.509</td><td>5</td><td>616.306</td><td>616.306</td><td>Order</td><td></td><td></td><td>p:0a20pp5x</td><td>562636824</td></tr><tr><td>Active Service Instance</td><td>620.154.080.755</td><td>616.306</td><td>SA</td><td>618.568</td><td>Logistics</td><td>outbound</td><td>gsi</td><td>SA</td><td>2024-04-12 21:41:11.252 +0200</td><td>2024-04-17 08:11:50.845 +0200</td><td>900</td><td></td><td>65.509</td><td>5</td><td>616.306</td><td>616.306</td><td>Order</td><td></td><td></td><td>p:0a20pp5x</td><td>562636824</td></tr><tr><td>Active Service Instance</td><td>620.154.080.832</td><td>616.306</td><td>SA</td><td>622.399</td><td>Network</td><td>outbound</td><td>som</td><td>SA</td><td>2024-04-17 08:12:00.402 +0200</td><td>2024-04-19 06:02:19.228 +0200</td><td>6062</td><td></td><td>68.977</td><td>3</td><td>616.306</td><td>616.306</td><td>Order</td><td></td><td></td><td>p:0a20rbbs</td><td>ACTIVATION | 3206648991</td></tr><tr><td>Active Service Instance</td><td>620.154.081.099</td><td>616.306</td><td>SA</td><td>622.400</td><td>Network</td><td>outbound</td><td>som</td><td>SA</td><td>2024-04-17 08:12:00.399 +0200</td><td>2024-04-19 04:08:50.228 +0200</td><td>6063</td><td></td><td>69.005</td><td>3</td><td>616.306</td><td>616.306</td><td>Order</td><td></td><td></td><td>p:0a20rbbt</td><td>ACTIVATION | 3206648676</td></tr><tr><td>Change Number Service Instance</td><td>620.154.129.237</td><td>616.306</td><td>SA</td><td>624.402</td><td>Network</td><td>outbound</td><td>som</td><td>SA</td><td>2024-04-18 04:10:52.935 +0200</td><td>2024-04-19 04:08:25.980 +0200</td><td>6063</td><td></td><td>70.827</td><td>3</td><td>616.306</td><td>616.306</td><td>Order</td><td></td><td></td><td>p:0a20s2cf</td><td>CHANGE_NUMBER_MNP | DCO: 19-04-2024 | FROM: 3206648676 TO: 3287199235</td></tr><tr><td>Change Number Service Instance</td><td>620.154.130.968</td><td>616.306</td><td>SA</td><td>624.442</td><td>Network</td><td>outbound</td><td>som</td><td>SA</td><td>2024-04-18 04:11:46.389 +0200</td><td>2024-04-19 06:01:56.712 +0200</td><td>6062</td><td></td><td>70.859</td><td>3</td><td>616.306</td><td>616.306</td><td>Order</td><td></td><td></td><td>p:0a20s2sh</td><td>CHANGE_NUMBER_MNP | DCO: 19-04-2024 | FROM: 3206648991 TO: 3316422906</td></tr></tbody></table></div></div><div class="section" id="ID1717413558006"><div class="section-column1"><div class="section-title">PAR 2.8 - Estrazione action a partire dalla rootId o id_ordine (DIN1717413558006)<hr></div><pre><code class="language-sql">select A.ID,A.ROOT_ID,b.* from request a, action b 
where a.root_id=598149 --in (select distinct root_id from detail where value='1-619807037680')
and b.request_id=a.id 
--AND b.SYSTEM='billing'
--AND b.status &lt;&gt;'SA'</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>id</th><th>root_id</th><th>id</th><th>name</th><th>direction</th><th>status</th><th>ts_requested</th><th>ts_created</th><th>ts_enqueued</th><th>ts_first_start</th><th>ts_start</th><th>ts_end</th><th>priority</th><th>ts_todo</th><th>queue</th><th>request_id</th><th>message_id</th><th>system</th><th>cfg_id</th><th>handler</th><th>response_id</th><th>adb_source</th><th>result</th></tr></thead><tbody><tr><td>598.149</td><td>598.149</td><td>620.153.804.648</td><td>Send Welcome Call</td><td>outbound</td><td>RD</td><td>2024-03-20 18:42:11.242 +0100</td><td>2024-03-20 18:42:11.247 +0100</td><td></td><td>2024-03-20 18:42:11.000 +0100</td><td>2024-03-20 18:42:11.000 +0100</td><td>2024-03-20 18:42:13.000 +0100</td><td></td><td></td><td>crm-publisher-out</td><td>598.149</td><td>339.769</td><td>crm</td><td>50</td><td>com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm</td><td>0</td><td></td><td></td></tr><tr><td>598.149</td><td>598.149</td><td>620.153.826.614</td><td>Receive Unlock Order</td><td>inbound</td><td>RD</td><td>2024-03-21 22:41:28.315 +0100</td><td>2024-03-21 22:41:28.320 +0100</td><td></td><td>2024-03-21 22:41:28.000 +0100</td><td>2024-03-21 22:41:28.000 +0100</td><td>2024-03-21 22:41:30.000 +0100</td><td></td><td></td><td>crm-publisher-in</td><td>598.149</td><td>354.619</td><td>crm</td><td>56</td><td>com2crm-itf-in.module/com2crm_itf_in.processes.businessProcess.orderManagement.RecUnlockOrder</td><td>0</td><td></td><td></td></tr><tr><td>598.149</td><td>598.149</td><td>620.153.804.642</td><td>Receive Activation Order</td><td>inbound</td><td>RD</td><td>2024-03-20 18:42:02.902 +0100</td><td>2024-03-20 18:42:02.907 +0100</td><td></td><td>2024-03-20 18:42:03.000 +0100</td><td>2024-03-20 18:42:03.000 +0100</td><td>2024-03-20 18:42:03.000 +0100</td><td></td><td></td><td>crm-publisher-in</td><td>598.149</td><td>339.765</td><td>crm</td><td>1</td><td>com2crm-itf-in.module/com2crm_itf_in.processes.businessProcess.orderManagement.starter.StartActivationOrder</td><td>0</td><td></td><td></td></tr><tr><td>598.149</td><td>598.149</td><td>620.153.804.644</td><td>Send draft produts to Subscribers</td><td>outbound</td><td>RD</td><td>2024-03-20 18:42:04.525 +0100</td><td>2024-03-20 18:42:04.531 +0100</td><td></td><td>2024-03-20 18:42:04.000 +0100</td><td>2024-03-20 18:42:04.000 +0100</td><td>2024-03-20 18:42:05.000 +0100</td><td></td><td></td><td>igpSub-publisher-out</td><td>598.149</td><td>339.766</td><td>igp</td><td>7</td><td>com2igp-sub.module/com2igp_sub.processes.businessProcess.orderManagement.NotifyDraftProduct</td><td>0</td><td></td><td></td></tr><tr><td>598.149</td><td>598.149</td><td>620.153.804.646</td><td>VerifyUpdateDataCutOverIn</td><td>inbound</td><td>RD</td><td>2024-03-20 18:42:05.000 +0100</td><td>2024-03-20 18:42:05.190 +0100</td><td></td><td>2024-03-20 18:42:06.000 +0100</td><td>2024-03-20 18:42:06.000 +0100</td><td>2024-03-20 18:42:08.000 +0100</td><td></td><td></td><td>crm-publisher-in</td><td>598.149</td><td>339.768</td><td>crm</td><td>86</td><td>com2crm-itf-in.module/com2crm_itf_in.processes.businessProcess.orderManagement.VerifyDataCutOverIn</td><td>0</td><td></td><td></td></tr><tr><td>598.149</td><td>598.149</td><td>620.153.804.645</td><td>VerifyUpdateDataCutOver</td><td>outbound</td><td>RD</td><td>2024-03-20 18:42:05.066 +0100</td><td>2024-03-20 18:42:05.071 +0100</td><td></td><td>2024-03-20 18:42:05.000 +0100</td><td>2024-03-20 18:42:05.000 +0100</td><td>2024-03-20 18:42:05.000 +0100</td><td></td><td></td><td>crm-publisher-out</td><td>598.149</td><td>339.767</td><td>crm</td><td>85</td><td>com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.VerifyDataCutOver</td><td>0</td><td></td><td></td></tr><tr><td>598.149</td><td>598.149</td><td>620.153.804.647</td><td>Simulates results for Welcome Call</td><td>outbound</td><td>RD</td><td>2024-03-20 18:42:08.684 +0100</td><td>2024-03-20 18:42:08.688 +0100</td><td></td><td>2024-03-20 18:42:08.000 +0100</td><td>2024-03-20 18:42:08.000 +0100</td><td>2024-03-20 18:42:11.000 +0100</td><td></td><td></td><td>com-publisher-out</td><td>598.149</td><td>0</td><td>com</td><td>52</td><td>com-commons-process.module/com-commons-process.processes.businessService.orderManagement.SimulateResultSiebel</td><td>0</td><td></td><td></td></tr><tr><td>598.149</td><td>598.149</td><td>620.153.826.619</td><td>Create Request Logistics</td><td>outbound</td><td>RD</td><td>2024-03-21 22:41:31.377 +0100</td><td>2024-03-21 22:41:31.381 +0100</td><td></td><td>2024-03-21 22:41:31.000 +0100</td><td>2024-03-21 22:41:31.000 +0100</td><td>2024-03-21 22:41:33.000 +0100</td><td></td><td></td><td>com-publisher-out</td><td>598.149</td><td>0</td><td>com</td><td>83</td><td>com-commons-process.module/com-commons-process.processes.businessService.orderManagement.createRequestLogistic</td><td>0</td><td></td><td></td></tr><tr><td>598.149</td><td>598.149</td><td>620.153.804.649</td><td>Receive Welcome Call Response</td><td>inbound</td><td>RD</td><td>2024-03-20 18:42:13.000 +0100</td><td>2024-03-20 18:42:11.461 +0100</td><td></td><td>2024-03-20 18:42:13.000 +0100</td><td>2024-03-20 18:42:13.000 +0100</td><td>2024-03-20 18:42:13.000 +0100</td><td></td><td></td><td>crm-publisher-in</td><td>598.149</td><td>339.770</td><td>crm</td><td>51</td><td>com2crm-itf-in.module/com2crm_itf_in.processes.businessProcess.orderManagement.ResponseIntermediateResultsFromCrm</td><td>0</td><td></td><td></td></tr><tr><td>598.149</td><td>598.149</td><td>620.153.804.643</td><td>Update bpme process id on request</td><td>outbound</td><td>RD</td><td>2024-03-20 18:42:03.822 +0100</td><td>2024-03-20 18:42:03.826 +0100</td><td></td><td>2024-03-20 18:42:03.000 +0100</td><td>2024-03-20 18:42:03.000 +0100</td><td>2024-03-20 18:42:04.000 +0100</td><td></td><td></td><td>com-publisher-out</td><td>598.149</td><td>0</td><td>com</td><td>521</td><td>com-commons-process.module/com-commons-process.bpme.MarkBpmeProcessIdOnRequest</td><td>0</td><td></td><td></td></tr><tr><td>600.133</td><td>598.149</td><td>620.153.826.621</td><td>Send Logistic Order to GSI</td><td>outbound</td><td>RD</td><td>2024-03-21 22:41:34.390 +0100</td><td>2024-03-21 22:41:34.395 +0100</td><td></td><td>2024-03-21 22:41:34.000 +0100</td><td>2024-03-21 22:41:34.000 +0100</td><td>2024-03-21 22:41:35.000 +0100</td><td></td><td></td><td>gsi-publisher-out</td><td>600.133</td><td>354.624</td><td>gsi</td><td>84</td><td>com2gsi.module/com2gsi.processes.businessProcess.SendOrderOut</td><td>0</td><td></td><td></td></tr><tr><td>600.133</td><td>598.149</td><td>620.153.826.622</td><td>GSI ACQ result OK</td><td>inbound</td><td>RD</td><td>2024-03-21 22:41:35.000 +0100</td><td>2024-03-21 22:41:34.568 +0100</td><td></td><td>2024-03-21 22:41:35.000 +0100</td><td>2024-03-21 22:41:35.000 +0100</td><td>2024-03-21 22:41:35.000 +0100</td><td></td><td></td><td>gsi-publisher-in</td><td>600.133</td><td>354.625</td><td>gsi</td><td>74</td><td>com2gsi.module/com2gsi.processes.businessProcess.NotificaGSIAcqIn</td><td>0</td><td></td><td></td></tr><tr><td>600.133</td><td>598.149</td><td>620.153.826.620</td><td>Update bpme process id on request</td><td>outbound</td><td>RD</td><td>2024-03-21 22:41:34.032 +0100</td><td>2024-03-21 22:41:34.038 +0100</td><td></td><td>2024-03-21 22:41:34.000 +0100</td><td>2024-03-21 22:41:34.000 +0100</td><td>2024-03-21 22:41:34.000 +0100</td><td></td><td></td><td>com-publisher-out</td><td>600.133</td><td>0</td><td>com</td><td>525</td><td>com-commons-process.module/com-commons-process.bpme.MarkBpmeProcessIdOnRequest</td><td>0</td></tr></tbody></table></div></div><div class="section" id="ID1717413650316"><div class="section-column1"><div class="section-title">PAR 2.9 - Estrazione dettagli fallimento a partire dalla actionId (DIN1717413650316)<hr></div><pre><code class="language-sql">select a.id,a.name,a.status,fd.* from action a, fault b,fault_doc fd  where 
a.id=620153592235 and 
b.action_id=a.id and 
--a.name='Receive Unlock Order' and 
a.status='FA' and
fd.id=b.document_id</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>id</th><th>name</th><th>status</th><th>document_xml</th><th>ts_created</th><th>ts_last_updated</th><th>last_modifier</th><th>id</th><th>reprocess_error</th><th>header_xml</th></tr></thead><tbody><tr><td>620.153.324.462</td><td>Notify Start SOM to CRM</td><td>FA</td><td>Error on bwGeneralOutboundITF</td></tr><tr><td>Message:</td></tr><tr><td>ERROR on General Interface Outbound calling Business Service</td></tr><tr><td>GST input:</td></tr><tr><td>&lt;?xml version="1.0" encoding="UTF-8"?&gt;</td></tr><tr><td>&lt;pfx7:input xmlns:ns6="http://phoenix.wind.it/resource/xsd/bwGetActionAdditionalInfo.xsd" xmlns:pfx7="http:/phoenix.wind.it/resource/xsd/ITFOutbound/ITFOutbound.xsd" xmlns:pfx2="http://phoenix.wind.it/resource/xsd/ITFInbound/ITFInbound.xsd" xmlns:ns="http://phoenix.wind.it/resource/xsd/bwGetAction.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:ns3="http://phoenix.wind.it/resource/xsd/api/bwEnqueue.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;</td></tr><tr><td>&lt;pfx7:root_id&gt;204&lt;/pfx7:root_id&gt;</td></tr><tr><td>&lt;pfx7:request_id&gt;205&lt;/pfx7:request_id&gt;</td></tr><tr><td>&lt;pfx7:action_id&gt;620153324462&lt;/pfx7:action_id&gt;</td></tr><tr><td>&lt;pfx7:action_name&gt;Notify Start SOM to CRM&lt;/pfx7:action_name&gt;</td></tr><tr><td>&lt;pfx7:action_handler&gt;com2crm_itf_out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm&lt;/pfx7:action_handler&gt;</td></tr><tr><td>&lt;pfx7:sequence_key&gt;205&lt;/pfx7:sequence_key&gt;</td></tr><tr><td>&lt;pfx7:system&gt;crm&lt;/pfx7:system&gt;</td></tr><tr><td>&lt;pfx7:keyName&gt;package_id&lt;/pfx7:keyName&gt;</td></tr><tr><td>&lt;pfx7:keyValue&gt;205&lt;/pfx7:keyValue&gt;</td></tr><tr><td>&lt;pfx7:caseId&gt;13&lt;/pfx7:caseId&gt;</td></tr><tr><td>&lt;/pfx7:input&gt;</td></tr><tr><td>MessageCode: MSGCODE_UNDEF</td></tr><tr><td>errorDescription: version [] not found.</td></tr><tr><td>BwClassException: ActivityFault</td></tr><tr><td>ProcessStack: com2crm_itf_out.processes.ftlSubscriber.SubscribeFtlCrmOut/bwGeneralOutboundITF-&gt;wind3.com-architecture.shared.gst.bwGeneralOutboundITF/BusinessServices</td></tr><tr><td>exceptionType: technical</td></tr><tr><td>StackTrace:</td></tr><tr><td>BX-600017: Package [com2crm_itf_out.module] version [] not found.</td></tr><tr><td></td><td>at com.tibco.bw.core.runtime.bx.BWBxEngineContext.customizeFaultDetails(BWBxEngineContext.java:617)</td></tr><tr><td></td><td>at com.tibco.bx.core.BxSystemImpl.customizeFaultDetails(BxSystemImpl.java:2122)</td></tr><tr><td></td><td>at com.tibco.bx.core.behaviors.activity.BxCatchAllBehavior.processExtensionAttributes(BxCatchAllBehavior.java:86)</td></tr><tr><td></td><td>at com.tibco.bx.core.behaviors.link.BxLinkBehavior.eval(BxLinkBehavior.java:111)</td></tr><tr><td></td><td>at com.tibco.bx.core.behaviors.link.BxLinkBehavior.enter(BxLinkBehavior.java:74)</td></tr><tr><td></td><td>at com.tibco.bx.core.behaviors.link.BxLinkBehavior.enter(BxLinkBehavior.java:1)</td></tr><tr><td></td><td>at com.tibco.pvm.infra.api.impl.util.director.IpmEventDirectorBase.handleModelEvent(IpmEventDirectorBase.java:192)</td></tr><tr><td></td><td>at com.tibco.pvm.im.rt.xm.util.work.ImxEventDirector.invokeModelEvent(ImxEventDirector.java:30)</td></tr><tr><td></td><td>at com.tibco.pvm.im.rt.xm.util.work.ImxProcessWork.invokeModelEvent(ImxProcessWork.java:125)</td></tr><tr><td></td><td>at com.tibco.pvm.im.rt.xm.ImxInstControl.invokeModelEvent(ImxInstControl.java:145)</td></tr><tr><td></td><td>at com.tibco.bx.core.behaviors.activity.BxActivityBaseBehavior.invokeEnterOnErrorTransition(BxActivityBaseBehavior.java:3402)</td></tr><tr><td></td><td>at com.tibco.bx.core.behaviors.activity.BxActivityBaseBehavior.onFault(BxActivityBaseBehavior.java:2640)</td></tr><tr><td></td><td>at com.tibco.bx.core.behaviors.activity.BxActivityBaseBehavior.handleModelEvent(BxActivityBaseBehavior.java:1222)</td></tr><tr><td></td><td>at com.tibco.bx.core.behaviors.activity.BxActivityBaseBehavior.handleModelEvent(BxActivityBaseBehavior.java:1)</td></tr><tr><td></td><td>at com.tibco.pvm.infra.api.impl.util.director.IpmEventDirectorBase.handleModelEvent(IpmEventDirectorBase.java:204)</td></tr><tr><td></td><td>at com.tibco.pvm.infra.api.impl.util.director.IpmEventDirectorBase.handleEvent(IpmEventDirectorBase.java:111)</td></tr><tr><td></td><td>at com.tibco.pvm.infra.support.work.impl.WorkItemAbstract.execute(WorkItemAbstract.java:189)</td></tr><tr><td></td><td>at com.tibco.pvm.im.rt.xm.util.work.ImxSTWorkRunnable.doWorkBlock(ImxSTWorkRunnable.java:170)</td></tr><tr><td></td><td>at com.tibco.pvm.infra.services.engine.impl.STWorkRunnable.run(STWorkRunnable.java:50)</td></tr><tr><td></td><td>at com.tibco.pvm.im.rt.xm.util.work.ImxSTWorkRunnable.run(ImxSTWorkRunnable.java:62)</td></tr><tr><td></td><td>at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)</td></tr><tr><td></td><td>at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)</td></tr><tr><td></td><td>at java.base/java.lang.Thread.run(Thread.java:834)</td></tr><tr><td>Caused by: java.lang.IllegalArgumentException: BX-600017: Package [com2crm_itf_out.module] version [] not found.</td></tr><tr><td></td><td>at com.tibco.bx.core.behaviors.activity.BxCallProcessBehavior.findProcessDefinition(BxCallProcessBehavior.java:313)</td></tr><tr><td></td><td>at com.tibco.bx.core.behaviors.activity.BxCallProcessBehavior.createSubProcess(BxCallProcessBehavior.java:187)</td></tr><tr><td></td><td>at com.tibco.bx.core.behaviors.activity.BxCallProcessBehavior.doEval(BxCallProcessBehavior.java:81)</td></tr><tr><td></td><td>at com.tibco.bx.core.behaviors.activity.BxActivityBaseBehavior.eval(BxActivityBaseBehavior.java:892)</td></tr><tr><td></td><td>at com.tibco.bx.core.behaviors.activity.BxActivityBaseBehavior.eval(BxActivityBaseBehavior.java:1)</td></tr><tr><td></td><td>at com.tibco.pvm.infra.api.impl.util.director.IpmEventDirectorBase.handleModelEvent(IpmEventDirectorBase.java:195)</td></tr><tr><td></td><td>... 8 more</td></tr><tr><td></td></tr><tr><td>BlockMark:</td></tr><tr><td></td></tr><tr><td>ITFOutBound input:</td></tr><tr><td>&lt;?xml version="1.0" encoding="UTF-8"?&gt;</td></tr><tr><td>&lt;pfx7:input xmlns:ns6="http://phoenix.wind.it/resource/xsd/bwGetActionAdditionalInfo.xsd" xmlns:pfx7="http:/phoenix.wind.it/resource/xsd/ITFOutbound/ITFOutbound.xsd" xmlns:pfx2="http://phoenix.wind.it/resource/xsd/ITFInbound/ITFInbound.xsd" xmlns:ns="http://phoenix.wind.it/resource/xsd/bwGetAction.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:ns3="http://phoenix.wind.it/resource/xsd/api/bwEnqueue.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;</td></tr><tr><td>&lt;pfx7:root_id&gt;204&lt;/pfx7:root_id&gt;</td></tr><tr><td>&lt;pfx7:request_id&gt;205&lt;/pfx7:request_id&gt;</td></tr><tr><td>&lt;pfx7:action_id&gt;620153324462&lt;/pfx7:action_id&gt;</td></tr><tr><td>&lt;pfx7:action_name&gt;Notify Start SOM to CRM&lt;/pfx7:action_name&gt;</td></tr><tr><td>&lt;pfx7:action_handler&gt;com2crm_itf_out.module/com2crm_itf_out.processes.businessProcess.orderManagement.SendIntermediateResultsToCrm&lt;/pfx7:action_handler&gt;</td></tr><tr><td>&lt;pfx7:sequence_key&gt;205&lt;/pfx7:sequence_key&gt;</td></tr><tr><td>&lt;pfx7:system&gt;crm&lt;/pfx7:system&gt;</td></tr><tr><td>&lt;pfx7:keyName&gt;package_id&lt;/pfx7:keyName&gt;</td></tr><tr><td>&lt;pfx7:keyValue&gt;205&lt;/pfx7:keyValue&gt;</td></tr><tr><td>&lt;pfx7:caseId&gt;13&lt;/pfx7:caseId&gt;</td></tr><tr><td>&lt;/pfx7:input&gt;</td><td>2024-02-08 15:35:00.271 +0100</td><td>2024-02-08 15:53:59.015 +0100</td><td>wind3.com-architecture.shared.gst.bwGeneralOutboundITF</td><td>59.496</td><td></td><td>Error on Insert Header</td></tr></tbody></table></div></div></div><div class="chapter-container" id="ID1717339283017"><div class="chapter-title">CAP 3 - Estrazioni provisioning SOM(DIN1717339283017)</div><button class="chapter-button">Aggiungi Paragrafo</button><button class="chapter-button">Elimina Paragrafo</button><div class="section" id="ID1717339748096"><div class="section-column1"><div class="section-title">PAR 3.1 - Esegue parsing dell'errore sui fallimenti SOM (DIN1717339748096)<hr></div><pre><code class="language-sql">select 
          regexp_match(fd.document_xml, '{"code":(.*?)}') codice_errore,--recupera i ko som
          z.name,z.id,z.system,fd.* from action z,fault a,fault_doc fd,request b  
          where 
      z.status='FA' and
      b.id=z.request_id and 
      b.root_id in (select b.root_id from action a,request b where a.status='FA' 
      and a.system='som' 
      and a.direction='outbound'
      and a.request_id=b.id
)and
      a.action_id =z.id and
      fd.id =a.document_id and z.system='som'
      limit 4</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>codice_errore</th><th>name</th><th>id</th><th>system</th></tr></thead><tbody><tr><td>{"\"EOC_ERROR_1002\",\"reason\":\"Missing mandatory field paymentType : null for poName : po_CB_T_P65_NA_001.\",\"message\":\"Order will not be created due to incomplete or incorrect data\",\"status\":\"400\""}</td><td>Send Service Order</td><td>620.153.324.379</td><td>som</td></tr><tr><td></td><td>Send Service Order</td><td>620.153.324.379</td><td>som</td></tr><tr><td>{"\"EOC_ERROR_1002\",\"reason\":\"Missing mandatory field RelatedEntity_IMSI.\",\"message\":\"Order will not be created due to incomplete or incorrect data\",\"status\":\"400\""}</td><td>Send Service Order</td><td>620.153.481.214</td><td>som</td></tr><tr><td>{"\"EOC_W3_ORDER_0003\",\"reason\":\"MSISDN Not Active!\",\"message\":\"This order will not be created because the customerId does not exist in SR\",\"status\":\"400\""}</td><td>Send Service Order</td><td>620.153.925.995</td><td>som</td></tr></tbody></table></div></div><div class="section" id="ID1717355961753"><div class="section-column1"><div class="section-title">PAR 3.2 - Estrae array ed elementi da un EMF di SOM (DIN1717355961753)<hr></div><pre><code class="language-sql">select 
b.message_xml::json rootJson
,b.message_xml::json-&gt;'externalId' externalId
,b.message_xml::json-&gt;'attrs' attrs --ritorna tutti gli elementi dell'array specificato attrs
,b.message_xml::json-&gt;'attrs'-&gt;0-&gt;'name' ext --ritorna tutti gli elementi dell'array specificato attrs
,b.message_xml::json-&gt;'attrs'-&gt;1 attrsElement --ritorna un elemento dell'array specificato attrs
,b.message_xml::json-&gt;'productOrderItem' tuttoArray--ritorna tutti gli elementi dell'array specificato productOrderItem
,b.message_xml::json-&gt;'productOrderItem'-&gt;0 elementoArray0-- ritorna l'elemento uno(pos 0) dell'array specificato productOrderItem
,b.message_xml::json-&gt;'productOrderItem'-&gt;1 elementoArray1-- ritorna l'elemento due(pos 1) dell'array specificato productOrderItem
,(b.message_xml::json-&gt;'productOrderItem'-&gt;0-&gt;&gt;'product')::json#&gt;&gt;'{productCharacteristic,0}' --estrae l'elemento primo (pos 0) dell'array productCharacteristic
,(b.message_xml::json-&gt;'productOrderItem'-&gt;0-&gt;&gt;'product')::json#&gt;&gt;'{productCharacteristic,1}' --estrae l'elemento primo (pos 1) dell'array productCharacteristic
from action  a ,action_msg b ,request c,request d
where 
1=1 and
b.message_xml like '%"ProductOrder"%' and
a.ts_created&gt;current_date -90 and
b.id=a.message_id and
c.id=a.request_id and 
d.id=c.root_id and 
--d.name='Sim/Handset Change' and 
c.name='Network'and
a.name='Send Service Order' and 
a.status='SA' AND 
c.id in (
select z.id
--,zz.* 
from 
      request z,action zz,action_msg x where zz.request_id=z.id and z.name='Network' and zz.name='Send Service Order' and 
      z.root_id      in (select root_id from detail where value in ('1-619821002400')) and 
      zz.message_id=x.id
      )</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>rootjson</th><th>externalid</th><th>attrs</th><th>ext</th><th>attrselement</th><th>tuttoarray</th><th>elementoarray0</th><th>elementoarray1</th><th>?column?</th><th>?column?</th></tr></thead><tbody><tr><td>{"externalId":"1-619821002400","channel":[{"id":"PHX"}],"productOrderItem":[{"id":"620154080781_517736867","action":"add","product":{"id":"","productCharacteristic":[{"name":"simType","value":"voice"},{"name":"famiglia","value":"sim"},{"name":"serialNumber","value":"8939880845100546336"},{"name":"ctype","value":"PREPAGATO"},{"name":"commercialOfferName","value":"PHX00033"},{"name":"isEnelVpnEnabled","value":"0"},{"name":"technology","value":"UMTS"},{"name":"isVpnEnabled","value":"0"},{"name":"customerSegment","value":"Business"},{"name":"imsi","value":"222885451054643"}],"externalId":"1620302984012"},"productOffering":{"id":"bpo_Father_0001"}},{"id":"620154080781_14070302","action":"Add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00034"},{"name":"MSISDN","value":"3206648991"},{"name":"numberClass","value":"Regular"},{"name":"famiglia","value":"sim"}],"externalId":"1620302984037"},"productOffering":{"id":"po_ANB_MSISDN"}},{"id":"620154080781_2114079556","action":"add","product":{"id":"","productCharacteristic":[{"name":"famiglia","value":"securityEnforcement"},{"name":"targetAPN","value":"securityEnforcement"},{"name":"commercialOfferName","value":"PHX80093"}],"externalId":"1620302984093"},"productOffering":{"id":"po_ANB_SecureEnf"}},{"id":"620154080781_2111702365","action":"add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX30017"},{"name":"famiglia","value":"datiSim"}],"externalId":"1620302984088"},"productOffering":{"id":"po_ANB_EnableMMS"}},{"id":"620154080781_1042672548","action":"add","product":{"id":"","productCharacteristic":[{"name":"voiceMailType","value":"A"},{"name":"password","value":"1111"},{"name":"famiglia","value":"serviziSim"},{"name":"language","value":"1"},{"name":"commercialOfferName","value":"PHX00041"}],"externalId":"1620302984046"},"productOffering":{"id":"po_ANB_VoiceMail"}},{"id":"620154080781_280589919","action":"add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00042"},{"name":"famiglia","value":"serviziSim"}],"externalId":"1620302984049"},"productOffering":{"id":"po_ANB_EnableSMSOutgoing"}},{"id":"620154080781_689704645","action":"add","product":{"id":"","productCharacteristic":[{"name":"serviceVideostreaming","value":"0"},{"name":"serviceWap","value":"0"},{"name":"serviceLeonardoPushMail","value":"0"},{"name":"serviceInternetBIZ","value":"1"},{"name":"famiglia","value":"serviziSim,addsOn"},{"name":"commercialOfferName","value":"PHX30014"},{"name":"serviceWapBIZ","value":"1"},{"name":"serviceInternet","value":"0"}],"externalId":"1620302984087"},"productOffering":{"id":"po_ANB_APN_001"}},{"id":"620154080781_2094397895","action":"add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00039"},{"name":"famiglia","value":"serviziSim"}],"externalId":"1620302984044"},"productOffering":{"id":"po_ANB_EnableVoiceRoaming"}},{"id":"620154080781_1049929219","action":"add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00040"},{"name":"famiglia","value":"serviziSim"}],"externalId":"1620302984045"},"productOffering":{"id":"po_ANB_EnableVoiceInternational"}},{"id":"620154080781_83722056","action":"add","product":{"id":"","productCharacteristic":[{"name":"famiglia","value":"serviziSim"},{"name":"commercialOfferName","value":"PHX50805"}],"externalId":"1620304314250"},"productOffering":{"id":"po_ANB_MobileAccess4G"}},{"id":"620154080781_183146451","action":"add","product":{"id":"","productCharacteristic":[{"name":"numberOfRenewal","value":"-1"},{"name":"refillAmount","value":"1000"},{"name":"refillThreshold","value":"500"},{"name":"commercialOfferName","value":"PHX00089"}],"externalId":"1620302984050"},"productOffering":{"id":"po_CB_ATR_NA_NA_001"}},{"id":"620154080781_1128030619","action":"add","product":{"id":"","productCharacteristic":[{"name":"voiceNatOgOffnet","value":"0"},{"name":"numberOfRenewal_1","value":"-1"},{"name":"dataRoam_1","value":"250MB"},{"name":"zoneName_3","value":"Zona 3"},{"name":"tokenAmount_4","value":"3500"},{"name":"voiceRoamIcOg_4","value":"100"},{"name":"resourceduration_4","value":"Daily"},{"name":"resourceduration_2","value":"Daily"},{"name":"resourceduration_1","value":"Daily"},{"name":"addonRLAH","value":["CH"]},{"name":"optoutVoiceFlag","value":"0"},{"name":"recfeeduration","value":"Monthly"},{"name":"voiceRoamIcOg","value":"0"},{"name":"zoneName_4","value":"Zona 4"},{"name":"priceRecurrentID","value":"ID_PRICE_66"},{"name":"smsNatOffnet","value":"0"},{"name":"barPPUDat","value":"0"},{"name":"compkgname","value":"PHX70087"},{"name":"numberOfRenewal_2","value":"-1"},{"name":"optoutSmsFlag","value":"0"},{"name":"billCycleDay","value":"1"},{"name":"smsRoamOg_2","value":"100"},{"name":"renewalCountInDur_1","value":"3"},{"name":"smsRoamOg","value":"0"},{"name":"voiceRoamOg_3","value":"0"},{"name":"smsRoamOg_1","value":"100"},{"name":"dataRoam_2","value":"250MB"},{"name":"voiceRoamIcOg_3","value":"100"},{"name":"voiceNatOgOnnetOffnet","value":"Unlimited"},{"name":"voiceRoamIc_3","value":"0"},{"name":"dataRoam","value":"0"},{"name":"commercialName_3","value":"Costo Daily Pass"},{"name":"zoneName_1","value":"Zona 1"},{"name":"billCycleMonth","value":"1"},{"name":"voiceRoamOg_2","value":"0"},{"name":"numberOfRenewal_4","value":"-1"},{"name":"tokenAmount_3","value":"2500"},{"name":"commercialName_2","value":"Costo Daily Pass"},{"name":"dataNat_RDA","value":"0"},{"name":"commercialName_4","value":"Costo Daily Pass"},{"name":"targetGARoam_1","value":["AR","AU","BD","BR","CA","CL","CR","DO","EC","FO","GE","GT","HK","IL","KZ","KR","MX","ME","NZ","NI","PK","PA","PE","SA","LK","CH","TR","UA","US","UY","UZ","VE","VN"]},{"name":"targetGAIntOg","value":["EXCEPT","DZ","DZ_MB","CU","CU_MB","ME","ME_MB","XK","XK_MB","SN","SN_MB","SO","TN","TN_MB","ZD_XS","_XS","_XT"]},{"name":"mktpkgname_1","value":"Daily Pass"},{"name":"smsRoamOg_4","value":"100"},{"name":"targetGARoam_2","value":["DZ","AM","AZ","BH","BY","BJ","CN","CO","CG","EG","GA","GH","GL","HN","ID","JP","KE","KG","KW","MO","MK","MY","MW","MC","NG","OM","PY","PR","RE","RU","SG","ZA","TW","TJ","TZ","TH","UG","ZM"]},{"name":"communityID","value":"255063"},{"name":"voiceNatOgOnnet","value":"0"},{"name":"numberOfRenewal","value":"-1"},{"name":"numberOfRenewal_3","value":"-1"},{"name":"basePricingId","value":"25"},{"name":"qualityOfService_1","value":"256"},{"name":"voiceIntOg","value":"500"},{"name":"mmsNatOnnet","value":"0"},{"name":"zoneName_2","value":"Zona 2"},{"name":"voiceRoamIc_4","value":"0"},{"name":"voiceRoamIcOg_1","value":"100"},{"name":"qualityOfService_2","value":"256"},{"name":"qualityOfService","value":"256"},{"name":"targetGARoam_3","value":["BO","BA","BN","CV","TD","SV","IN","MD","RS","TN","AE"]},{"name":"voiceRLAH","value":"0"},{"name":"voiceRoamOg_1","value":"0"},{"name":"renewalCountInDur_2","value":"3"},{"name":"renewalCountInDur_4","value":"3"},{"name":"voiceRoamOg","value":"0"},{"name":"resourceduration_3","value":"Daily"},{"name":"voiceRoamIc","value":"0"},{"name":"smsNatOnnet","value":"0"},{"name":"commercialName_1","value":"Costo Daily Pass"},{"name":"paymentType","value":"tied"},{"name":"voiceRoamIcOg_2","value":"100"},{"name":"dataCSD","value":"0"},{"name":"smsRoamOg_3","value":"100"},{"name":"qualityOfService_3","value":"256"},{"name":"smsIntOg","value":"0"},{"name":"renewalCountInDur_3","value":"3"},{"name":"tokenAmount_1","value":"500"},{"name":"smsNatIntRoamOg","value":"0"},{"name":"dataNat","value":"Unlimited"},{"name":"dataRoam_3","value":"250MB"},{"name":"voiceRoamIc_2","value":"0"},{"name":"smsNatOnnetOffnet","value":"500"},{"name":"qualityOfService_4","value":"256"},{"name":"gracePeriodrule","value":"0"},{"name":"voiceRoamIc_1","value":"0"},{"name":"smsNatRoamOg","value":"0"},{"name":"dataRoamAllowance","value":"40GB"},{"name":"voiceRoamOg_4","value":"0"},{"name":"sms_mmsNatOnnet","value":"0"},{"name":"optoutDataFlag","value":"0"},{"name":"tokenAmount_2","value":"1500"},{"name":"dataRoam_4","value":"250MB"},{"name":"targetGARoam_4","value":["AF","AL","AI","AG","BB","KH","KY","DO","GD","MG","MA","MM","NP","NE","QA","SN","KN","LC","VC","TC","VG","YE"]}],"externalId":"1620302984089"},"productOffering":{"id":"bpo_NA_M_PM_T_001"}},{"id":"620154080781_1457224210","action":"add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX70278"},{"name":"famiglia","value":"datiSim"}],"externalId":"1620304314269"},"productOffering":{"id":"po_ANB_MobileAccess5G"}},{"id":"620154080781_1521547611","action":"add","product":{"id":"","productCharacteristic":[{"name":"refillAmount","value":"500"},{"name":"famiglia","value":"administrative"}]},"productOffering":{"id":"po_AAB_Refill"}}],"relatedParty":[{"id":"3206648991","role":"Customer"}],"type":"ProductOrder","attrs":[{"name":"journeyType","value":"OnBoarding"},{"name":"journeySubType","value":"Standard"}],"relatedEntity":[{"role":"IMSI","reference":"222885451054643"},{"role":"MSISDN","reference":"3206648991"}],"requester":"CRM","requestID":"622399"}</td><td>"1-619821002400"</td><td>[{"name":"journeyType","value":"OnBoarding"},{"name":"journeySubType","value":"Standard"}]</td><td>"journeyType"</td><td>{"name":"journeySubType","value":"Standard"}</td><td>[{"id":"620154080781_517736867","action":"add","product":{"id":"","productCharacteristic":[{"name":"simType","value":"voice"},{"name":"famiglia","value":"sim"},{"name":"serialNumber","value":"8939880845100546336"},{"name":"ctype","value":"PREPAGATO"},{"name":"commercialOfferName","value":"PHX00033"},{"name":"isEnelVpnEnabled","value":"0"},{"name":"technology","value":"UMTS"},{"name":"isVpnEnabled","value":"0"},{"name":"customerSegment","value":"Business"},{"name":"imsi","value":"222885451054643"}],"externalId":"1620302984012"},"productOffering":{"id":"bpo_Father_0001"}},{"id":"620154080781_14070302","action":"Add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00034"},{"name":"MSISDN","value":"3206648991"},{"name":"numberClass","value":"Regular"},{"name":"famiglia","value":"sim"}],"externalId":"1620302984037"},"productOffering":{"id":"po_ANB_MSISDN"}},{"id":"620154080781_2114079556","action":"add","product":{"id":"","productCharacteristic":[{"name":"famiglia","value":"securityEnforcement"},{"name":"targetAPN","value":"securityEnforcement"},{"name":"commercialOfferName","value":"PHX80093"}],"externalId":"1620302984093"},"productOffering":{"id":"po_ANB_SecureEnf"}},{"id":"620154080781_2111702365","action":"add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX30017"},{"name":"famiglia","value":"datiSim"}],"externalId":"1620302984088"},"productOffering":{"id":"po_ANB_EnableMMS"}},{"id":"620154080781_1042672548","action":"add","product":{"id":"","productCharacteristic":[{"name":"voiceMailType","value":"A"},{"name":"password","value":"1111"},{"name":"famiglia","value":"serviziSim"},{"name":"language","value":"1"},{"name":"commercialOfferName","value":"PHX00041"}],"externalId":"1620302984046"},"productOffering":{"id":"po_ANB_VoiceMail"}},{"id":"620154080781_280589919","action":"add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00042"},{"name":"famiglia","value":"serviziSim"}],"externalId":"1620302984049"},"productOffering":{"id":"po_ANB_EnableSMSOutgoing"}},{"id":"620154080781_689704645","action":"add","product":{"id":"","productCharacteristic":[{"name":"serviceVideostreaming","value":"0"},{"name":"serviceWap","value":"0"},{"name":"serviceLeonardoPushMail","value":"0"},{"name":"serviceInternetBIZ","value":"1"},{"name":"famiglia","value":"serviziSim,addsOn"},{"name":"commercialOfferName","value":"PHX30014"},{"name":"serviceWapBIZ","value":"1"},{"name":"serviceInternet","value":"0"}],"externalId":"1620302984087"},"productOffering":{"id":"po_ANB_APN_001"}},{"id":"620154080781_2094397895","action":"add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00039"},{"name":"famiglia","value":"serviziSim"}],"externalId":"1620302984044"},"productOffering":{"id":"po_ANB_EnableVoiceRoaming"}},{"id":"620154080781_1049929219","action":"add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00040"},{"name":"famiglia","value":"serviziSim"}],"externalId":"1620302984045"},"productOffering":{"id":"po_ANB_EnableVoiceInternational"}},{"id":"620154080781_83722056","action":"add","product":{"id":"","productCharacteristic":[{"name":"famiglia","value":"serviziSim"},{"name":"commercialOfferName","value":"PHX50805"}],"externalId":"1620304314250"},"productOffering":{"id":"po_ANB_MobileAccess4G"}},{"id":"620154080781_183146451","action":"add","product":{"id":"","productCharacteristic":[{"name":"numberOfRenewal","value":"-1"},{"name":"refillAmount","value":"1000"},{"name":"refillThreshold","value":"500"},{"name":"commercialOfferName","value":"PHX00089"}],"externalId":"1620302984050"},"productOffering":{"id":"po_CB_ATR_NA_NA_001"}},{"id":"620154080781_1128030619","action":"add","product":{"id":"","productCharacteristic":[{"name":"voiceNatOgOffnet","value":"0"},{"name":"numberOfRenewal_1","value":"-1"},{"name":"dataRoam_1","value":"250MB"},{"name":"zoneName_3","value":"Zona 3"},{"name":"tokenAmount_4","value":"3500"},{"name":"voiceRoamIcOg_4","value":"100"},{"name":"resourceduration_4","value":"Daily"},{"name":"resourceduration_2","value":"Daily"},{"name":"resourceduration_1","value":"Daily"},{"name":"addonRLAH","value":["CH"]},{"name":"optoutVoiceFlag","value":"0"},{"name":"recfeeduration","value":"Monthly"},{"name":"voiceRoamIcOg","value":"0"},{"name":"zoneName_4","value":"Zona 4"},{"name":"priceRecurrentID","value":"ID_PRICE_66"},{"name":"smsNatOffnet","value":"0"},{"name":"barPPUDat","value":"0"},{"name":"compkgname","value":"PHX70087"},{"name":"numberOfRenewal_2","value":"-1"},{"name":"optoutSmsFlag","value":"0"},{"name":"billCycleDay","value":"1"},{"name":"smsRoamOg_2","value":"100"},{"name":"renewalCountInDur_1","value":"3"},{"name":"smsRoamOg","value":"0"},{"name":"voiceRoamOg_3","value":"0"},{"name":"smsRoamOg_1","value":"100"},{"name":"dataRoam_2","value":"250MB"},{"name":"voiceRoamIcOg_3","value":"100"},{"name":"voiceNatOgOnnetOffnet","value":"Unlimited"},{"name":"voiceRoamIc_3","value":"0"},{"name":"dataRoam","value":"0"},{"name":"commercialName_3","value":"Costo Daily Pass"},{"name":"zoneName_1","value":"Zona 1"},{"name":"billCycleMonth","value":"1"},{"name":"voiceRoamOg_2","value":"0"},{"name":"numberOfRenewal_4","value":"-1"},{"name":"tokenAmount_3","value":"2500"},{"name":"commercialName_2","value":"Costo Daily Pass"},{"name":"dataNat_RDA","value":"0"},{"name":"commercialName_4","value":"Costo Daily Pass"},{"name":"targetGARoam_1","value":["AR","AU","BD","BR","CA","CL","CR","DO","EC","FO","GE","GT","HK","IL","KZ","KR","MX","ME","NZ","NI","PK","PA","PE","SA","LK","CH","TR","UA","US","UY","UZ","VE","VN"]},{"name":"targetGAIntOg","value":["EXCEPT","DZ","DZ_MB","CU","CU_MB","ME","ME_MB","XK","XK_MB","SN","SN_MB","SO","TN","TN_MB","ZD_XS","_XS","_XT"]},{"name":"mktpkgname_1","value":"Daily Pass"},{"name":"smsRoamOg_4","value":"100"},{"name":"targetGARoam_2","value":["DZ","AM","AZ","BH","BY","BJ","CN","CO","CG","EG","GA","GH","GL","HN","ID","JP","KE","KG","KW","MO","MK","MY","MW","MC","NG","OM","PY","PR","RE","RU","SG","ZA","TW","TJ","TZ","TH","UG","ZM"]},{"name":"communityID","value":"255063"},{"name":"voiceNatOgOnnet","value":"0"},{"name":"numberOfRenewal","value":"-1"},{"name":"numberOfRenewal_3","value":"-1"},{"name":"basePricingId","value":"25"},{"name":"qualityOfService_1","value":"256"},{"name":"voiceIntOg","value":"500"},{"name":"mmsNatOnnet","value":"0"},{"name":"zoneName_2","value":"Zona 2"},{"name":"voiceRoamIc_4","value":"0"},{"name":"voiceRoamIcOg_1","value":"100"},{"name":"qualityOfService_2","value":"256"},{"name":"qualityOfService","value":"256"},{"name":"targetGARoam_3","value":["BO","BA","BN","CV","TD","SV","IN","MD","RS","TN","AE"]},{"name":"voiceRLAH","value":"0"},{"name":"voiceRoamOg_1","value":"0"},{"name":"renewalCountInDur_2","value":"3"},{"name":"renewalCountInDur_4","value":"3"},{"name":"voiceRoamOg","value":"0"},{"name":"resourceduration_3","value":"Daily"},{"name":"voiceRoamIc","value":"0"},{"name":"smsNatOnnet","value":"0"},{"name":"commercialName_1","value":"Costo Daily Pass"},{"name":"paymentType","value":"tied"},{"name":"voiceRoamIcOg_2","value":"100"},{"name":"dataCSD","value":"0"},{"name":"smsRoamOg_3","value":"100"},{"name":"qualityOfService_3","value":"256"},{"name":"smsIntOg","value":"0"},{"name":"renewalCountInDur_3","value":"3"},{"name":"tokenAmount_1","value":"500"},{"name":"smsNatIntRoamOg","value":"0"},{"name":"dataNat","value":"Unlimited"},{"name":"dataRoam_3","value":"250MB"},{"name":"voiceRoamIc_2","value":"0"},{"name":"smsNatOnnetOffnet","value":"500"},{"name":"qualityOfService_4","value":"256"},{"name":"gracePeriodrule","value":"0"},{"name":"voiceRoamIc_1","value":"0"},{"name":"smsNatRoamOg","value":"0"},{"name":"dataRoamAllowance","value":"40GB"},{"name":"voiceRoamOg_4","value":"0"},{"name":"sms_mmsNatOnnet","value":"0"},{"name":"optoutDataFlag","value":"0"},{"name":"tokenAmount_2","value":"1500"},{"name":"dataRoam_4","value":"250MB"},{"name":"targetGARoam_4","value":["AF","AL","AI","AG","BB","KH","KY","DO","GD","MG","MA","MM","NP","NE","QA","SN","KN","LC","VC","TC","VG","YE"]}],"externalId":"1620302984089"},"productOffering":{"id":"bpo_NA_M_PM_T_001"}},{"id":"620154080781_1457224210","action":"add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX70278"},{"name":"famiglia","value":"datiSim"}],"externalId":"1620304314269"},"productOffering":{"id":"po_ANB_MobileAccess5G"}},{"id":"620154080781_1521547611","action":"add","product":{"id":"","productCharacteristic":[{"name":"refillAmount","value":"500"},{"name":"famiglia","value":"administrative"}]},"productOffering":{"id":"po_AAB_Refill"}}]</td><td>{"id":"620154080781_517736867","action":"add","product":{"id":"","productCharacteristic":[{"name":"simType","value":"voice"},{"name":"famiglia","value":"sim"},{"name":"serialNumber","value":"8939880845100546336"},{"name":"ctype","value":"PREPAGATO"},{"name":"commercialOfferName","value":"PHX00033"},{"name":"isEnelVpnEnabled","value":"0"},{"name":"technology","value":"UMTS"},{"name":"isVpnEnabled","value":"0"},{"name":"customerSegment","value":"Business"},{"name":"imsi","value":"222885451054643"}],"externalId":"1620302984012"},"productOffering":{"id":"bpo_Father_0001"}}</td><td>{"id":"620154080781_14070302","action":"Add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00034"},{"name":"MSISDN","value":"3206648991"},{"name":"numberClass","value":"Regular"},{"name":"famiglia","value":"sim"}],"externalId":"1620302984037"},"productOffering":{"id":"po_ANB_MSISDN"}}</td><td>{"name":"simType","value":"voice"}</td><td>{"name":"famiglia","value":"sim"}</td></tr><tr><td>{"externalId":"1-619821002400","channel":[{"id":"PHX"}],"productOrderItem":[{"id":"620154080782_1960647843","action":"add","product":{"id":"","productCharacteristic":[{"name":"simType","value":"voice"},{"name":"famiglia","value":"sim"},{"name":"serialNumber","value":"8939880845100546344"},{"name":"ctype","value":"PREPAGATO"},{"name":"commercialOfferName","value":"PHX00033"},{"name":"isEnelVpnEnabled","value":"0"},{"name":"technology","value":"UMTS"},{"name":"isVpnEnabled","value":"0"},{"name":"customerSegment","value":"Business"},{"name":"imsi","value":"222885451054644"}],"externalId":"1620302984097"},"productOffering":{"id":"bpo_Father_0001"}},{"id":"620154080782_1077623222","action":"Add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00034"},{"name":"MSISDN","value":"3206648676"},{"name":"numberClass","value":"Regular"},{"name":"famiglia","value":"sim"}],"externalId":"1620302984122"},"productOffering":{"id":"po_ANB_MSISDN"}},{"id":"620154080782_906154476","action":"add","product":{"id":"","productCharacteristic":[{"name":"famiglia","value":"securityEnforcement"},{"name":"targetAPN","value":"securityEnforcement"},{"name":"commercialOfferName","value":"PHX80093"}],"externalId":"1620302984178"},"productOffering":{"id":"po_ANB_SecureEnf"}},{"id":"620154080782_979290423","action":"add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX30017"},{"name":"famiglia","value":"datiSim"}],"externalId":"1620302984173"},"productOffering":{"id":"po_ANB_EnableMMS"}},{"id":"620154080782_1828493471","action":"add","product":{"id":"","productCharacteristic":[{"name":"voiceMailType","value":"A"},{"name":"password","value":"1111"},{"name":"famiglia","value":"serviziSim"},{"name":"language","value":"1"},{"name":"commercialOfferName","value":"PHX00041"}],"externalId":"1620302984131"},"productOffering":{"id":"po_ANB_VoiceMail"}},{"id":"620154080782_485062578","action":"add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00042"},{"name":"famiglia","value":"serviziSim"}],"externalId":"1620302984134"},"productOffering":{"id":"po_ANB_EnableSMSOutgoing"}},{"id":"620154080782_1733797629","action":"add","product":{"id":"","productCharacteristic":[{"name":"serviceVideostreaming","value":"0"},{"name":"serviceWap","value":"0"},{"name":"serviceLeonardoPushMail","value":"0"},{"name":"serviceInternetBIZ","value":"1"},{"name":"famiglia","value":"serviziSim,addsOn"},{"name":"commercialOfferName","value":"PHX30014"},{"name":"serviceWapBIZ","value":"1"},{"name":"serviceInternet","value":"0"}],"externalId":"1620302984172"},"productOffering":{"id":"po_ANB_APN_001"}},{"id":"620154080782_698469269","action":"add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00039"},{"name":"famiglia","value":"serviziSim"}],"externalId":"1620302984129"},"productOffering":{"id":"po_ANB_EnableVoiceRoaming"}},{"id":"620154080782_1981545684","action":"add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00040"},{"name":"famiglia","value":"serviziSim"}],"externalId":"1620302984130"},"productOffering":{"id":"po_ANB_EnableVoiceInternational"}},{"id":"620154080782_1920970661","action":"add","product":{"id":"","productCharacteristic":[{"name":"famiglia","value":"serviziSim"},{"name":"commercialOfferName","value":"PHX50805"}],"externalId":"1620304314259"},"productOffering":{"id":"po_ANB_MobileAccess4G"}},{"id":"620154080782_755004597","action":"add","product":{"id":"","productCharacteristic":[{"name":"numberOfRenewal","value":"-1"},{"name":"refillAmount","value":"1000"},{"name":"refillThreshold","value":"500"},{"name":"commercialOfferName","value":"PHX00089"}],"externalId":"1620302984135"},"productOffering":{"id":"po_CB_ATR_NA_NA_001"}},{"id":"620154080782_741635029","action":"add","product":{"id":"","productCharacteristic":[{"name":"voiceNatOgOffnet","value":"0"},{"name":"numberOfRenewal_1","value":"-1"},{"name":"dataRoam_1","value":"250MB"},{"name":"zoneName_3","value":"Zona 3"},{"name":"tokenAmount_4","value":"3500"},{"name":"voiceRoamIcOg_4","value":"100"},{"name":"resourceduration_4","value":"Daily"},{"name":"resourceduration_2","value":"Daily"},{"name":"resourceduration_1","value":"Daily"},{"name":"addonRLAH","value":["CH"]},{"name":"optoutVoiceFlag","value":"0"},{"name":"recfeeduration","value":"Monthly"},{"name":"voiceRoamIcOg","value":"0"},{"name":"zoneName_4","value":"Zona 4"},{"name":"priceRecurrentID","value":"ID_PRICE_66"},{"name":"smsNatOffnet","value":"0"},{"name":"barPPUDat","value":"0"},{"name":"compkgname","value":"PHX70087"},{"name":"numberOfRenewal_2","value":"-1"},{"name":"optoutSmsFlag","value":"0"},{"name":"billCycleDay","value":"1"},{"name":"smsRoamOg_2","value":"100"},{"name":"renewalCountInDur_1","value":"3"},{"name":"smsRoamOg","value":"0"},{"name":"voiceRoamOg_3","value":"0"},{"name":"smsRoamOg_1","value":"100"},{"name":"dataRoam_2","value":"250MB"},{"name":"voiceRoamIcOg_3","value":"100"},{"name":"voiceNatOgOnnetOffnet","value":"Unlimited"},{"name":"voiceRoamIc_3","value":"0"},{"name":"dataRoam","value":"0"},{"name":"commercialName_3","value":"Costo Daily Pass"},{"name":"zoneName_1","value":"Zona 1"},{"name":"billCycleMonth","value":"1"},{"name":"voiceRoamOg_2","value":"0"},{"name":"numberOfRenewal_4","value":"-1"},{"name":"tokenAmount_3","value":"2500"},{"name":"commercialName_2","value":"Costo Daily Pass"},{"name":"dataNat_RDA","value":"0"},{"name":"commercialName_4","value":"Costo Daily Pass"},{"name":"targetGARoam_1","value":["AR","AU","BD","BR","CA","CL","CR","DO","EC","FO","GE","GT","HK","IL","KZ","KR","MX","ME","NZ","NI","PK","PA","PE","SA","LK","CH","TR","UA","US","UY","UZ","VE","VN"]},{"name":"targetGAIntOg","value":["EXCEPT","DZ","DZ_MB","CU","CU_MB","ME","ME_MB","XK","XK_MB","SN","SN_MB","SO","TN","TN_MB","ZD_XS","_XS","_XT"]},{"name":"mktpkgname_1","value":"Daily Pass"},{"name":"smsRoamOg_4","value":"100"},{"name":"targetGARoam_2","value":["DZ","AM","AZ","BH","BY","BJ","CN","CO","CG","EG","GA","GH","GL","HN","ID","JP","KE","KG","KW","MO","MK","MY","MW","MC","NG","OM","PY","PR","RE","RU","SG","ZA","TW","TJ","TZ","TH","UG","ZM"]},{"name":"communityID","value":"255063"},{"name":"voiceNatOgOnnet","value":"0"},{"name":"numberOfRenewal","value":"-1"},{"name":"numberOfRenewal_3","value":"-1"},{"name":"basePricingId","value":"25"},{"name":"qualityOfService_1","value":"256"},{"name":"voiceIntOg","value":"500"},{"name":"mmsNatOnnet","value":"0"},{"name":"zoneName_2","value":"Zona 2"},{"name":"voiceRoamIc_4","value":"0"},{"name":"voiceRoamIcOg_1","value":"100"},{"name":"qualityOfService_2","value":"256"},{"name":"qualityOfService","value":"256"},{"name":"targetGARoam_3","value":["BO","BA","BN","CV","TD","SV","IN","MD","RS","TN","AE"]},{"name":"voiceRLAH","value":"0"},{"name":"voiceRoamOg_1","value":"0"},{"name":"renewalCountInDur_2","value":"3"},{"name":"renewalCountInDur_4","value":"3"},{"name":"voiceRoamOg","value":"0"},{"name":"resourceduration_3","value":"Daily"},{"name":"voiceRoamIc","value":"0"},{"name":"smsNatOnnet","value":"0"},{"name":"commercialName_1","value":"Costo Daily Pass"},{"name":"paymentType","value":"tied"},{"name":"voiceRoamIcOg_2","value":"100"},{"name":"dataCSD","value":"0"},{"name":"smsRoamOg_3","value":"100"},{"name":"qualityOfService_3","value":"256"},{"name":"smsIntOg","value":"0"},{"name":"renewalCountInDur_3","value":"3"},{"name":"tokenAmount_1","value":"500"},{"name":"smsNatIntRoamOg","value":"0"},{"name":"dataNat","value":"Unlimited"},{"name":"dataRoam_3","value":"250MB"},{"name":"voiceRoamIc_2","value":"0"},{"name":"smsNatOnnetOffnet","value":"500"},{"name":"qualityOfService_4","value":"256"},{"name":"gracePeriodrule","value":"0"},{"name":"voiceRoamIc_1","value":"0"},{"name":"smsNatRoamOg","value":"0"},{"name":"dataRoamAllowance","value":"40GB"},{"name":"voiceRoamOg_4","value":"0"},{"name":"sms_mmsNatOnnet","value":"0"},{"name":"optoutDataFlag","value":"0"},{"name":"tokenAmount_2","value":"1500"},{"name":"dataRoam_4","value":"250MB"},{"name":"targetGARoam_4","value":["AF","AL","AI","AG","BB","KH","KY","DO","GD","MG","MA","MM","NP","NE","QA","SN","KN","LC","VC","TC","VG","YE"]}],"externalId":"1620302984174"},"productOffering":{"id":"bpo_NA_M_PM_T_001"}},{"id":"620154080782_1007810493","action":"add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX70278"},{"name":"famiglia","value":"datiSim"}],"externalId":"1620304314278"},"productOffering":{"id":"po_ANB_MobileAccess5G"}},{"id":"620154080782_1584996227","action":"add","product":{"id":"","productCharacteristic":[{"name":"refillAmount","value":"500"},{"name":"famiglia","value":"administrative"}]},"productOffering":{"id":"po_AAB_Refill"}}],"relatedParty":[{"id":"3206648676","role":"Customer"}],"type":"ProductOrder","attrs":[{"name":"journeyType","value":"OnBoarding"},{"name":"journeySubType","value":"Standard"}],"relatedEntity":[{"role":"IMSI","reference":"222885451054644"},{"role":"MSISDN","reference":"3206648676"}],"requester":"CRM","requestID":"622400"}</td><td>"1-619821002400"</td><td>[{"name":"journeyType","value":"OnBoarding"},{"name":"journeySubType","value":"Standard"}]</td><td>"journeyType"</td><td>{"name":"journeySubType","value":"Standard"}</td><td>[{"id":"620154080782_1960647843","action":"add","product":{"id":"","productCharacteristic":[{"name":"simType","value":"voice"},{"name":"famiglia","value":"sim"},{"name":"serialNumber","value":"8939880845100546344"},{"name":"ctype","value":"PREPAGATO"},{"name":"commercialOfferName","value":"PHX00033"},{"name":"isEnelVpnEnabled","value":"0"},{"name":"technology","value":"UMTS"},{"name":"isVpnEnabled","value":"0"},{"name":"customerSegment","value":"Business"},{"name":"imsi","value":"222885451054644"}],"externalId":"1620302984097"},"productOffering":{"id":"bpo_Father_0001"}},{"id":"620154080782_1077623222","action":"Add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00034"},{"name":"MSISDN","value":"3206648676"},{"name":"numberClass","value":"Regular"},{"name":"famiglia","value":"sim"}],"externalId":"1620302984122"},"productOffering":{"id":"po_ANB_MSISDN"}},{"id":"620154080782_906154476","action":"add","product":{"id":"","productCharacteristic":[{"name":"famiglia","value":"securityEnforcement"},{"name":"targetAPN","value":"securityEnforcement"},{"name":"commercialOfferName","value":"PHX80093"}],"externalId":"1620302984178"},"productOffering":{"id":"po_ANB_SecureEnf"}},{"id":"620154080782_979290423","action":"add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX30017"},{"name":"famiglia","value":"datiSim"}],"externalId":"1620302984173"},"productOffering":{"id":"po_ANB_EnableMMS"}},{"id":"620154080782_1828493471","action":"add","product":{"id":"","productCharacteristic":[{"name":"voiceMailType","value":"A"},{"name":"password","value":"1111"},{"name":"famiglia","value":"serviziSim"},{"name":"language","value":"1"},{"name":"commercialOfferName","value":"PHX00041"}],"externalId":"1620302984131"},"productOffering":{"id":"po_ANB_VoiceMail"}},{"id":"620154080782_485062578","action":"add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00042"},{"name":"famiglia","value":"serviziSim"}],"externalId":"1620302984134"},"productOffering":{"id":"po_ANB_EnableSMSOutgoing"}},{"id":"620154080782_1733797629","action":"add","product":{"id":"","productCharacteristic":[{"name":"serviceVideostreaming","value":"0"},{"name":"serviceWap","value":"0"},{"name":"serviceLeonardoPushMail","value":"0"},{"name":"serviceInternetBIZ","value":"1"},{"name":"famiglia","value":"serviziSim,addsOn"},{"name":"commercialOfferName","value":"PHX30014"},{"name":"serviceWapBIZ","value":"1"},{"name":"serviceInternet","value":"0"}],"externalId":"1620302984172"},"productOffering":{"id":"po_ANB_APN_001"}},{"id":"620154080782_698469269","action":"add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00039"},{"name":"famiglia","value":"serviziSim"}],"externalId":"1620302984129"},"productOffering":{"id":"po_ANB_EnableVoiceRoaming"}},{"id":"620154080782_1981545684","action":"add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00040"},{"name":"famiglia","value":"serviziSim"}],"externalId":"1620302984130"},"productOffering":{"id":"po_ANB_EnableVoiceInternational"}},{"id":"620154080782_1920970661","action":"add","product":{"id":"","productCharacteristic":[{"name":"famiglia","value":"serviziSim"},{"name":"commercialOfferName","value":"PHX50805"}],"externalId":"1620304314259"},"productOffering":{"id":"po_ANB_MobileAccess4G"}},{"id":"620154080782_755004597","action":"add","product":{"id":"","productCharacteristic":[{"name":"numberOfRenewal","value":"-1"},{"name":"refillAmount","value":"1000"},{"name":"refillThreshold","value":"500"},{"name":"commercialOfferName","value":"PHX00089"}],"externalId":"1620302984135"},"productOffering":{"id":"po_CB_ATR_NA_NA_001"}},{"id":"620154080782_741635029","action":"add","product":{"id":"","productCharacteristic":[{"name":"voiceNatOgOffnet","value":"0"},{"name":"numberOfRenewal_1","value":"-1"},{"name":"dataRoam_1","value":"250MB"},{"name":"zoneName_3","value":"Zona 3"},{"name":"tokenAmount_4","value":"3500"},{"name":"voiceRoamIcOg_4","value":"100"},{"name":"resourceduration_4","value":"Daily"},{"name":"resourceduration_2","value":"Daily"},{"name":"resourceduration_1","value":"Daily"},{"name":"addonRLAH","value":["CH"]},{"name":"optoutVoiceFlag","value":"0"},{"name":"recfeeduration","value":"Monthly"},{"name":"voiceRoamIcOg","value":"0"},{"name":"zoneName_4","value":"Zona 4"},{"name":"priceRecurrentID","value":"ID_PRICE_66"},{"name":"smsNatOffnet","value":"0"},{"name":"barPPUDat","value":"0"},{"name":"compkgname","value":"PHX70087"},{"name":"numberOfRenewal_2","value":"-1"},{"name":"optoutSmsFlag","value":"0"},{"name":"billCycleDay","value":"1"},{"name":"smsRoamOg_2","value":"100"},{"name":"renewalCountInDur_1","value":"3"},{"name":"smsRoamOg","value":"0"},{"name":"voiceRoamOg_3","value":"0"},{"name":"smsRoamOg_1","value":"100"},{"name":"dataRoam_2","value":"250MB"},{"name":"voiceRoamIcOg_3","value":"100"},{"name":"voiceNatOgOnnetOffnet","value":"Unlimited"},{"name":"voiceRoamIc_3","value":"0"},{"name":"dataRoam","value":"0"},{"name":"commercialName_3","value":"Costo Daily Pass"},{"name":"zoneName_1","value":"Zona 1"},{"name":"billCycleMonth","value":"1"},{"name":"voiceRoamOg_2","value":"0"},{"name":"numberOfRenewal_4","value":"-1"},{"name":"tokenAmount_3","value":"2500"},{"name":"commercialName_2","value":"Costo Daily Pass"},{"name":"dataNat_RDA","value":"0"},{"name":"commercialName_4","value":"Costo Daily Pass"},{"name":"targetGARoam_1","value":["AR","AU","BD","BR","CA","CL","CR","DO","EC","FO","GE","GT","HK","IL","KZ","KR","MX","ME","NZ","NI","PK","PA","PE","SA","LK","CH","TR","UA","US","UY","UZ","VE","VN"]},{"name":"targetGAIntOg","value":["EXCEPT","DZ","DZ_MB","CU","CU_MB","ME","ME_MB","XK","XK_MB","SN","SN_MB","SO","TN","TN_MB","ZD_XS","_XS","_XT"]},{"name":"mktpkgname_1","value":"Daily Pass"},{"name":"smsRoamOg_4","value":"100"},{"name":"targetGARoam_2","value":["DZ","AM","AZ","BH","BY","BJ","CN","CO","CG","EG","GA","GH","GL","HN","ID","JP","KE","KG","KW","MO","MK","MY","MW","MC","NG","OM","PY","PR","RE","RU","SG","ZA","TW","TJ","TZ","TH","UG","ZM"]},{"name":"communityID","value":"255063"},{"name":"voiceNatOgOnnet","value":"0"},{"name":"numberOfRenewal","value":"-1"},{"name":"numberOfRenewal_3","value":"-1"},{"name":"basePricingId","value":"25"},{"name":"qualityOfService_1","value":"256"},{"name":"voiceIntOg","value":"500"},{"name":"mmsNatOnnet","value":"0"},{"name":"zoneName_2","value":"Zona 2"},{"name":"voiceRoamIc_4","value":"0"},{"name":"voiceRoamIcOg_1","value":"100"},{"name":"qualityOfService_2","value":"256"},{"name":"qualityOfService","value":"256"},{"name":"targetGARoam_3","value":["BO","BA","BN","CV","TD","SV","IN","MD","RS","TN","AE"]},{"name":"voiceRLAH","value":"0"},{"name":"voiceRoamOg_1","value":"0"},{"name":"renewalCountInDur_2","value":"3"},{"name":"renewalCountInDur_4","value":"3"},{"name":"voiceRoamOg","value":"0"},{"name":"resourceduration_3","value":"Daily"},{"name":"voiceRoamIc","value":"0"},{"name":"smsNatOnnet","value":"0"},{"name":"commercialName_1","value":"Costo Daily Pass"},{"name":"paymentType","value":"tied"},{"name":"voiceRoamIcOg_2","value":"100"},{"name":"dataCSD","value":"0"},{"name":"smsRoamOg_3","value":"100"},{"name":"qualityOfService_3","value":"256"},{"name":"smsIntOg","value":"0"},{"name":"renewalCountInDur_3","value":"3"},{"name":"tokenAmount_1","value":"500"},{"name":"smsNatIntRoamOg","value":"0"},{"name":"dataNat","value":"Unlimited"},{"name":"dataRoam_3","value":"250MB"},{"name":"voiceRoamIc_2","value":"0"},{"name":"smsNatOnnetOffnet","value":"500"},{"name":"qualityOfService_4","value":"256"},{"name":"gracePeriodrule","value":"0"},{"name":"voiceRoamIc_1","value":"0"},{"name":"smsNatRoamOg","value":"0"},{"name":"dataRoamAllowance","value":"40GB"},{"name":"voiceRoamOg_4","value":"0"},{"name":"sms_mmsNatOnnet","value":"0"},{"name":"optoutDataFlag","value":"0"},{"name":"tokenAmount_2","value":"1500"},{"name":"dataRoam_4","value":"250MB"},{"name":"targetGARoam_4","value":["AF","AL","AI","AG","BB","KH","KY","DO","GD","MG","MA","MM","NP","NE","QA","SN","KN","LC","VC","TC","VG","YE"]}],"externalId":"1620302984174"},"productOffering":{"id":"bpo_NA_M_PM_T_001"}},{"id":"620154080782_1007810493","action":"add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX70278"},{"name":"famiglia","value":"datiSim"}],"externalId":"1620304314278"},"productOffering":{"id":"po_ANB_MobileAccess5G"}},{"id":"620154080782_1584996227","action":"add","product":{"id":"","productCharacteristic":[{"name":"refillAmount","value":"500"},{"name":"famiglia","value":"administrative"}]},"productOffering":{"id":"po_AAB_Refill"}}]</td><td>{"id":"620154080782_1960647843","action":"add","product":{"id":"","productCharacteristic":[{"name":"simType","value":"voice"},{"name":"famiglia","value":"sim"},{"name":"serialNumber","value":"8939880845100546344"},{"name":"ctype","value":"PREPAGATO"},{"name":"commercialOfferName","value":"PHX00033"},{"name":"isEnelVpnEnabled","value":"0"},{"name":"technology","value":"UMTS"},{"name":"isVpnEnabled","value":"0"},{"name":"customerSegment","value":"Business"},{"name":"imsi","value":"222885451054644"}],"externalId":"1620302984097"},"productOffering":{"id":"bpo_Father_0001"}}</td><td>{"id":"620154080782_1077623222","action":"Add","product":{"id":"","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00034"},{"name":"MSISDN","value":"3206648676"},{"name":"numberClass","value":"Regular"},{"name":"famiglia","value":"sim"}],"externalId":"1620302984122"},"productOffering":{"id":"po_ANB_MSISDN"}}</td><td>{"name":"simType","value":"voice"}</td><td>{"name":"famiglia","value":"sim"}</td></tr><tr><td>{"externalId":"1-619821002400","channel":[{"id":"PHX"}],"productOrderItem":[{"id":"620154102569_303686540","action":"Modify","product":{"id":"2000000000000000000000733278885","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00034"},{"name":"MSISDN","value":"3287199235"},{"name":"numberClass","value":"Regular"},{"name":"famiglia","value":"sim"}],"externalId":"1620302984122"},"productOffering":{"id":"po_ANB_MSISDN"}}],"relatedParty":[{"id":"3206648676","role":"Customer"}],"type":"ProductOrder","attrs":[{"name":"journeyType","value":"ChangeMSISDN"},{"name":"journeySubType","value":"PortIn"},{"name":"cutoverDate","value":"19/04/2024"},{"name":"oloCode","value":"TIM"},{"name":"requestId","value":"620154080784"}],"relatedEntity":[{"role":"IMSI","reference":"222885451054644"},{"role":"MSISDN","reference":"3206648676"}],"requester":"CRM","requestID":"624402"}</td><td>"1-619821002400"</td><td>[{"name":"journeyType","value":"ChangeMSISDN"},{"name":"journeySubType","value":"PortIn"},{"name":"cutoverDate","value":"19/04/2024"},{"name":"oloCode","value":"TIM"},{"name":"requestId","value":"620154080784"}]</td><td>"journeyType"</td><td>{"name":"journeySubType","value":"PortIn"}</td><td>[{"id":"620154102569_303686540","action":"Modify","product":{"id":"2000000000000000000000733278885","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00034"},{"name":"MSISDN","value":"3287199235"},{"name":"numberClass","value":"Regular"},{"name":"famiglia","value":"sim"}],"externalId":"1620302984122"},"productOffering":{"id":"po_ANB_MSISDN"}}]</td><td>{"id":"620154102569_303686540","action":"Modify","product":{"id":"2000000000000000000000733278885","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00034"},{"name":"MSISDN","value":"3287199235"},{"name":"numberClass","value":"Regular"},{"name":"famiglia","value":"sim"}],"externalId":"1620302984122"},"productOffering":{"id":"po_ANB_MSISDN"}}</td><td></td><td>{"name":"commercialOfferName","value":"PHX00034"}</td><td>{"name":"MSISDN","value":"3287199235"}</td></tr><tr><td>{"externalId":"1-619821002400","channel":[{"id":"PHX"}],"productOrderItem":[{"id":"620154102974_1007428295","action":"Modify","product":{"id":"2000000000000000000000733125303","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00034"},{"name":"MSISDN","value":"3316422906"},{"name":"numberClass","value":"Regular"},{"name":"famiglia","value":"sim"}],"externalId":"1620302984037"},"productOffering":{"id":"po_ANB_MSISDN"}}],"relatedParty":[{"id":"3206648991","role":"Customer"}],"type":"ProductOrder","attrs":[{"name":"journeyType","value":"ChangeMSISDN"},{"name":"journeySubType","value":"PortIn"},{"name":"cutoverDate","value":"19/04/2024"},{"name":"oloCode","value":"TIM"},{"name":"requestId","value":"620154080783"}],"relatedEntity":[{"role":"IMSI","reference":"222885451054643"},{"role":"MSISDN","reference":"3206648991"}],"requester":"CRM","requestID":"624442"}</td><td>"1-619821002400"</td><td>[{"name":"journeyType","value":"ChangeMSISDN"},{"name":"journeySubType","value":"PortIn"},{"name":"cutoverDate","value":"19/04/2024"},{"name":"oloCode","value":"TIM"},{"name":"requestId","value":"620154080783"}]</td><td>"journeyType"</td><td>{"name":"journeySubType","value":"PortIn"}</td><td>[{"id":"620154102974_1007428295","action":"Modify","product":{"id":"2000000000000000000000733125303","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00034"},{"name":"MSISDN","value":"3316422906"},{"name":"numberClass","value":"Regular"},{"name":"famiglia","value":"sim"}],"externalId":"1620302984037"},"productOffering":{"id":"po_ANB_MSISDN"}}]</td><td>{"id":"620154102974_1007428295","action":"Modify","product":{"id":"2000000000000000000000733125303","productCharacteristic":[{"name":"commercialOfferName","value":"PHX00034"},{"name":"MSISDN","value":"3316422906"},{"name":"numberClass","value":"Regular"},{"name":"famiglia","value":"sim"}],"externalId":"1620302984037"},"productOffering":{"id":"po_ANB_MSISDN"}}</td><td></td><td>{"name":"commercialOfferName","value":"PHX00034"}</td><td>{"name":"MSISDN","value":"3316422906"}</td></tr></tbody></table></div></div><div class="section" id="ID1717405733228"><div class="section-column1"><div class="section-title">PAR 3.3 - Estrae array ed elementi da un EMF di SOM (query 2) (DIN1717405733228)<hr></div><pre><code class="language-sql">--json_each(json)  : Espande l'oggetto JSON più esterno in un set di coppie chiave/valore. In input deve ricevere un array (es. {"a":"foo", "b":"bar"})

--json_each_text(json) Espande l'oggetto JSON più esterno in un set di coppie chiave/valore. I valori restituiti saranno di tipo testo.

select 
json_each(b.message_xml::json) arrayObj
,json_each_text(b.message_xml::json) textObj
,json_each(b.message_xml::json-&gt;'productOrderItem'-&gt;1) elementPo
,json_each(b.message_xml::json-&gt;'productOrderItem'-&gt;0-&gt;'product') product
from action  a ,action_msg b ,request c,request d
where 
1=1 and
b.message_xml like '%"ProductOrder"%' and
a.ts_created&gt;current_date -60 and
b.id=a.message_id and
c.id=a.request_id and 
d.id=c.root_id and 
--d.name='Sim/Handset Change' and 
c.name='Network'and
a.name='Send Service Order' and 
a.status='SA' AND 
c.id
in (select z.id
--,zz.* 
from 
      request z,action zz,action_msg x where zz.request_id=z.id and z.name='Network' and zz.name='Send Service Order' and 
      z.root_id      in (select root_id from detail where value in ('1-619821002400')) and 
      zz.message_id=x.id limit 1)</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>arrayobj</th><th>textobj</th><th>elementpo</th><th>product</th></tr></thead><tbody><tr><td>(externalId,"""1-619821002400""")</td><td>(externalId,1-619821002400)</td><td></td><td>(id,"""2000000000000000000000733125303""")</td></tr><tr><td>(channel,"[{""id"":""PHX""}]")</td><td>(channel,"[{""id"":""PHX""}]")</td><td></td><td>(productCharacteristic,"[{""name"":""commercialOfferName"",""value"":""PHX00034""},{""name"":""MSISDN"",""value"":""3316422906""},{""name"":""numberClass"",""value"":""Regular""},{""name"":""famiglia"",""value"":""sim""}]")</td></tr><tr><td>(productOrderItem,"[{""id"":""620154102974_1007428295"",""action"":""Modify"",""product"":{""id"":""2000000000000000000000733125303"",""productCharacteristic"":[{""name"":""commercialOfferName"",""value"":""PHX00034""},{""name"":""MSISDN"",""value"":""3316422906""},{""name"":""numberClass"",""value"":""Regular""},{""name"":""famiglia"",""value"":""sim""}],""externalId"":""1620302984037""},""productOffering"":{""id"":""po_ANB_MSISDN""}}]")</td><td>(productOrderItem,"[{""id"":""620154102974_1007428295"",""action"":""Modify"",""product"":{""id"":""2000000000000000000000733125303"",""productCharacteristic"":[{""name"":""commercialOfferName"",""value"":""PHX00034""},{""name"":""MSISDN"",""value"":""3316422906""},{""name"":""numberClass"",""value"":""Regular""},{""name"":""famiglia"",""value"":""sim""}],""externalId"":""1620302984037""},""productOffering"":{""id"":""po_ANB_MSISDN""}}]")</td><td></td><td>(externalId,"""1620302984037""")</td></tr><tr><td>(relatedParty,"[{""id"":""3206648991"",""role"":""Customer""}]")</td><td>(relatedParty,"[{""id"":""3206648991"",""role"":""Customer""}]")</td><td></td><td></td></tr><tr><td>(type,"""ProductOrder""")</td><td>(type,ProductOrder)</td><td></td><td></td></tr><tr><td>(attrs,"[{""name"":""journeyType"",""value"":""ChangeMSISDN""},{""name"":""journeySubType"",""value"":""PortIn""},{""name"":""cutoverDate"",""value"":""19/04/2024""},{""name"":""oloCode"",""value"":""TIM""},{""name"":""requestId"",""value"":""620154080783""}]")</td><td>(attrs,"[{""name"":""journeyType"",""value"":""ChangeMSISDN""},{""name"":""journeySubType"",""value"":""PortIn""},{""name"":""cutoverDate"",""value"":""19/04/2024""},{""name"":""oloCode"",""value"":""TIM""},{""name"":""requestId"",""value"":""620154080783""}]")</td><td></td><td></td></tr><tr><td>(relatedEntity,"[{""role"":""IMSI"",""reference"":""222885451054643""},{""role"":""MSISDN"",""reference"":""3206648991""}]")</td><td>(relatedEntity,"[{""role"":""IMSI"",""reference"":""222885451054643""},{""role"":""MSISDN"",""reference"":""3206648991""}]")</td><td></td><td></td></tr><tr><td>(requester,"""CRM""")</td><td>(requester,CRM)</td><td></td><td></td></tr><tr><td>(requestID,"""624442""")</td><td>(requestID,624442)</td></tr></tbody></table></div></div><div class="section" id="ID1717406639623"><div class="section-column1"><div class="section-title">PAR 3.4 - Estrazione di tutti i parametri presenti nelle strutture productOrderItem,attrs,productCharacteristic,relatedEntity di un EMF SOM (DIN1717406639623)<hr></div><pre><code class="language-sql">select 
concat( re.value::json-&gt;'role','-', re.value::json-&gt;'reference') RelEntity
,concat( ss.value::json-&gt;'name','-', ss.value::json-&gt;'value') ProdCaratt
,concat( attrs.value::json-&gt;'name','-', attrs.value::json-&gt;'value') Attrs
from action  a ,action_msg b ,request c,request d
,json_array_elements(b.message_xml::json-&gt;'productOrderItem') prdOI
,json_array_elements(b.message_xml::json-&gt;'attrs') attrs,
json_array_elements(prdOI::json-&gt;'product'-&gt;'productCharacteristic') ss
,json_array_elements(b.message_xml::json-&gt;'relatedEntity') re
where 
1=1 and
b.message_xml like '%"ProductOrder"%' and
a.ts_created&gt;current_date -60 and
b.id=a.message_id and
c.id=a.request_id and 
d.id=c.root_id and 
--d.name='Sim/Handset Change' and 
c.name='Network'and
a.name='Send Service Order' and 
a.status='SA' AND 
--ss.value::json-&gt;&gt;'name'='imsi' and
--re.value::json-&gt;&gt;'role'='IMSI' and
c.id --=622399 -- request Network
in (
select z.id --network 
from 
      request z,action zz,action_msg x where zz.request_id=z.id and z.name='Network' and zz.name='Send Service Order' and 
      z.root_id      in (select root_id from detail where value in ('1-619821002400')) and 
      zz.message_id=x.id
)</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>relentity</th><th>prodcaratt</th><th>attrs</th></tr></thead><tbody><tr><td>"IMSI"-"222885451054643"</td><td>"simType"-"voice"</td><td>"journeyType"-"OnBoarding"</td></tr><tr><td>"MSISDN"-"3206648991"</td><td>"simType"-"voice"</td><td>"journeyType"-"OnBoarding"</td></tr><tr><td>"IMSI"-"222885451054643"</td><td>"famiglia"-"sim"</td><td>"journeyType"-"OnBoarding"</td></tr><tr><td>"MSISDN"-"3206648991"</td><td>"famiglia"-"sim"</td><td>"journeyType"-"OnBoarding"</td></tr><tr><td>"IMSI"-"222885451054643"</td><td>"serialNumber"-"8939880845100546336"</td><td>"journeyType"-"OnBoarding"</td></tr><tr><td>"MSISDN"-"3206648991"</td><td>"serialNumber"-"8939880845100546336"</td><td>"journeyType"-"OnBoarding"</td></tr><tr><td>"IMSI"-"222885451054643"</td><td>"ctype"-"PREPAGATO"</td><td>"journeyType"-"OnBoarding"</td></tr><tr><td>"MSISDN"-"3206648991"</td><td>"ctype"-"PREPAGATO"</td><td>"journeyType"-"OnBoarding"</td></tr><tr><td>"IMSI"-"222885451054643"</td><td>"commercialOfferName"-"PHX00033"</td><td>"journeyType"-"OnBoarding"</td></tr><tr><td>"MSISDN"-"3206648991"</td><td>"commercialOfferName"-"PHX00033"</td><td>"journeyType"-"OnBoarding"</td></tr></tbody></table></div></div><div class="section" id="ID1717407793613"><div class="section-column1"><div class="section-title">PAR 3.5 - Esegue Parsing di un esito SOM a partire dall'EMF entrando per id action (o id ordine)  (DIN1717407793613)<hr></div><pre><code class="language-sql">SELECT 
b.message_xml::json-&gt;'event'-&gt;'productOrder'-&gt;'completionDate' completionDate,
characteristic.value::json-&gt;'name' NomeCar
,characteristic.value::json-&gt;'value' ValoreCar
,item-&gt;&gt;'description' BB_descr
FROM 
ACTION a, 
action_msg b ,
    json_array_elements(b.message_xml::json-&gt;'event'-&gt;'productOrder'-&gt;'productOrderItem') AS item,
    json_array_elements(item-&gt;'product'-&gt;'productCharacteristic') AS characteristic
WHERE 
b.id=a.message_id 
--and (characteristic-&gt;&gt;'name'='actualNetworkProvisionDate' or characteristic-&gt;&gt;'name'='actualChargingProvisionDate')
--and item-&gt;&gt;'description'='po_ANB_MSISDN'
and a.id in 
(620154130944)
/*(
	select cc.id from 
	request aa, request bb,action cc 
	where 
	aa.name='OutOrder' and 
	aa.ts_created&gt;current_date -2 and
	aa.id=bb.root_id and 
	bb.id=cc.request_id and 
	cc.system='som' and
	cc.direction='inbound' and
	cc.name='Receive mobile provisioning result' limit 50
)*/
/*(
	select  (zz.id) --action inbound SOM
	from 
	      request z,action zz where zz.request_id=z.id and z.name='Network' and zz.name='Receive mobile provisioning result' 
	      and zz.system='som' 
	      and zz.direction='inbound'
	      and z.root_id in (select root_id from detail where value in ('1-619821002400')) limit 1 
)*/</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>completiondate</th><th>nomecar</th><th>valorecar</th><th>bb_descr</th></tr></thead><tbody><tr><td>"2024-04-19T06:01:32+02:00"</td><td>"specificationType"</td><td>["ProductOffering"]</td><td>po_ANB_EnableMMS</td></tr><tr><td>"2024-04-19T06:01:32+02:00"</td><td>"cbioVersionCreated"</td><td></td><td>po_ANB_EnableMMS</td></tr><tr><td>"2024-04-19T06:01:32+02:00"</td><td>"version"</td><td>["2.0"]</td><td>po_ANB_EnableMMS</td></tr><tr><td>"2024-04-19T06:01:32+02:00"</td><td>"CW_DISABLEPUBLISH"</td><td>["false"]</td><td>po_ANB_EnableMMS</td></tr><tr><td>"2024-04-19T06:01:32+02:00"</td><td>"CW_IMPLICITCREATE"</td><td>["true"]</td><td>po_ANB_EnableMMS</td></tr><tr><td>"2024-04-19T06:01:32+02:00"</td><td>"CW_MDTYPE"</td><td>["pscm.data.ProductOffering"]</td><td>po_ANB_EnableMMS</td></tr><tr><td>"2024-04-19T06:01:32+02:00"</td><td>"CW_SPECTYPE"</td><td>["type_ProductOffering"]</td><td>po_ANB_EnableMMS</td></tr><tr><td>"2024-04-19T06:01:32+02:00"</td><td>"CW_URI"</td><td>["pscm/productoffering/"]</td><td>po_ANB_EnableMMS</td></tr><tr><td>"2024-04-19T06:01:32+02:00"</td><td>"channels"</td><td></td><td>po_ANB_EnableMMS</td></tr><tr><td>"2024-04-19T06:01:32+02:00"</td><td>"storedInSR"</td><td>["true"]</td><td>po_ANB_EnableMMS</td></tr></tbody></table></div></div><div class="section" id="ID1717414030675"><div class="section-column1"><div class="section-title">PAR 3.6 - Estrae i dettagli di un BB dal catalogo SOM (DIN1717414030675)<hr></div><pre><code class="language-sql">--query per estrarre BB e relativi parametri a fronte di una o più chiavi (PHX) presenti nell'ordine
 
select * from (
select
      a.id,
      a.partnum ,
      a.id_bb ,
      b.codicebb,
      d.nome,
      d.tipovalore,
      c.id_attrib,
      null as valore
from
      com.associativabb_phx a,
      com.elencobb b,
      com.associativabb_attrib c,
      com.elencoattributi d
where
      --trim(a.partnum) in ('PHX80022') and
codicebb='bpo_NA_SAP_PM_NA_001' and
      a.id_bb = b.id and 
      c.id_bb = a.id_bb and 
      c.id_attrib = d.id and
      d.tipovalore = 'Run Time'
union 
select
      a.id,
      a.partnum ,
      a.id_bb ,
      b.codicebb,
      d.nome,
      d.tipovalore,
      c.id_attrib,
      e.valore as valore
from
      com.associativabb_phx a,
      com.elencobb b,
      com.associativabb_attrib c,
      com.elencoattributi d,
      com.valoreattrib e
where
      --trim(a.partnum) in ('PHX80022') and
codicebb='bpo_NA_SAP_PM_NA_001' and
      a.id_bb = b.id and 
      c.id_bb = a.id_bb and 
      c.id_attrib = d.id and
      d.tipovalore = 'Design Time' and 
      e.id_attrib = c.id_attrib and 
      e.id_associativa = a.id
)a 
--where nome='renewalcountSA_ExCap'</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>id</th><th>partnum</th><th>id_bb</th><th>codicebb</th><th>nome</th><th>tipovalore</th><th>id_attrib</th><th>valore</th></tr></thead><tbody><tr><td>224</td><td>PHX70218</td><td>17</td><td>bpo_NA_SAP_PM_NA_001</td><td>commercialName</td><td>Design Time</td><td>67</td><td>Giga Smart Share Extra</td></tr><tr><td>221</td><td>PHX70215</td><td>17</td><td>bpo_NA_SAP_PM_NA_001</td><td>numberOfRenewal</td><td>Design Time</td><td>51</td><td>-1</td></tr><tr><td>231</td><td>PHX70314</td><td>17</td><td>bpo_NA_SAP_PM_NA_001</td><td>recurrentFee</td><td>Design Time</td><td>42</td><td></td></tr><tr><td>221</td><td>PHX70215</td><td>17</td><td>bpo_NA_SAP_PM_NA_001</td><td>MSISDN</td><td>Run Time</td><td>22</td><td></td></tr><tr><td>222</td><td>PHX70216</td><td>17</td><td>bpo_NA_SAP_PM_NA_001</td><td>dataSA</td><td>Design Time</td><td>76</td><td>5GB</td></tr><tr><td>230</td><td>PHX70313</td><td>17</td><td>bpo_NA_SAP_PM_NA_001</td><td>reserveForDeactivation</td><td>Run Time</td><td>6</td><td></td></tr><tr><td>220</td><td>PHX70219</td><td>17</td><td>bpo_NA_SAP_PM_NA_001</td><td>qualityOfService</td><td>Design Time</td><td>59</td><td>256</td></tr><tr><td>222</td><td>PHX70216</td><td>17</td><td>bpo_NA_SAP_PM_NA_001</td><td>commercialName</td><td>Design Time</td><td>67</td><td>Giga Smart Share Extra</td></tr><tr><td>221</td><td>PHX70215</td><td>17</td><td>bpo_NA_SAP_PM_NA_001</td><td>customerSegment</td><td>Run Time</td><td>18</td><td></td></tr><tr><td>232</td><td>PHX70315</td><td>17</td><td>bpo_NA_SAP_PM_NA_001</td><td>recresourceduration</td><td>Design Time</td><td>185</td><td>Monthly</td></tr></tbody></table></div></div><div class="section" id="ID1717438952177"><div class="section-column1"><div class="section-title">PAR 3.7 - Estrae un esempio di EMF per ogni ordine che va su SOM (DIN1717438952177)<hr></div><pre><code class="language-sql">select * from 
  (
	  select d.name,b.id,a.id
	  ,b.message_xml  ,b.message_xml::json-&gt;&gt;'externalId' 
	  from action a, action_msg b , request c , request d where 
	  c.name='Network' and
	  d.name in   (	'Activation Order') and
	  a.name='Send Service Order' and 
	  a.system='som' and
	  a.direction='outbound' and
	  a.request_id=c.id and 
	  c.root_id=d.id and
	  a.message_id=b.id limit 1
  ) att
union all 
  select * from 
  (
	  select d.name,b.id,a.id
	  ,b.message_xml ,b.message_xml::json-&gt;&gt;'externalId' 
	    from action a, action_msg b , request c , request d where 
	  c.name='Network' and
	  d.name in ('Sim/Handset Change')and
	  a.name='Send Service Order' and 
	  a.system='som' and
	  a.direction='outbound' and
 	  a.request_id=c.id and 
	  c.root_id=d.id and
	  a.message_id=b.id limit 1
  ) changeSim
union all
  select * from 
  (
	  select d.name,b.id,a.id
	  ,b.message_xml ,b.message_xml::json-&gt;&gt;'externalId' 
	   from action a, action_msg b , request c , request d where 
	  c.name='Network' and
	  d.name in ('Extend Order')and
	  a.name='Send Service Order' and 
	  a.system='som' and
  	  a.request_id=c.id and 
	  c.root_id=d.id and
	  a.direction='outbound' and
	  a.message_id=b.id  limit 1
	) ampl  
union all
  select * from 
  (
	  select d.name,b.id,a.id
	  ,b.message_xml ,b.message_xml::json-&gt;&gt;'externalId' 
	   from action a, action_msg b , request c , request d where 
	  c.name='Network' and
	  d.name in ('Order reactivation')and
	  a.name='Send Service Order' and 
	  a.system='som' and
	  a.direction='outbound' and
	  a.request_id=c.id and 
	  c.root_id=d.id and	  
	  a.message_id=b.id  limit 1
	) react  
union all
  select * from 
  (
	  select d.name,b.id,a.id
	  ,b.message_xml,b.message_xml::json-&gt;&gt;'externalId'  
	   from action a, action_msg b , request c , request d where 
	  c.name='Network' and
	  d.name in ('Order suspend')and
	  a.name='Send Service Order' and 
	  a.system='som' and
	  a.direction='outbound' and
	  a.request_id=c.id and 
	  c.root_id=d.id and	  
	  a.message_id=b.id  limit 1
	) sosp  	
union all
  select * from 
  (
	  select d.name,b.id,a.id
	  ,b.message_xml ,b.message_xml::json-&gt;&gt;'externalId'
	    from action a, action_msg b , request c , request d where 
	  c.name='Network' and
	  d.name in ('Change Order')and
	  a.name='Send Service Order' and 
	  a.system='som' and
	  a.direction='outbound' and
	  a.request_id=c.id and 
	  c.root_id=d.id and	  
	  a.message_id=b.id  limit 1
	) changeOrder  	
union all
  select * from 
  (
	  select d.name,b.id,a.id
	  ,b.message_xml,b.message_xml::json-&gt;&gt;'externalId' 
	    from action a, action_msg b , request c , request d where 
	  c.name='Network' and
	  d.name in ('OutOrder')and
	  a.name='Send Service Order' and 
	  a.system='som' and
	  a.direction='outbound' and
	  a.request_id=c.id and 
	  c.root_id=d.id and	  
	  a.message_id=b.id  limit 1
	) OutOrder  			
	</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>name</th></tr></thead><tbody><tr><td>Activation Order</td></tr><tr><td>Sim/Handset Change</td></tr><tr><td>Extend Order</td></tr><tr><td>Order reactivation</td></tr><tr><td>Order suspend</td></tr><tr><td>Change Order</td></tr><tr><td>OutOrder</td></tr></tbody></table></div></div><div class="section" id="ID1717443044244"><div class="section-column1"><div class="section-title">PAR 3.8 - Estrae tutti i campi verso il SOM a partire da id_ordine (DIN1717443044244)<hr></div><pre><code class="language-sql">select  
--*
idordine,actionid,idbb,externalid,action,id,caratvalue,attrvalue,caratname,attrname 
from (
			select table_input.*
			,json_array_elements(message_xml::json-&gt;'attrs')-&gt;'value' attrValue
			,json_array_elements(message_xml::json-&gt;'attrs')-&gt;'name' attrName
			from (
			WITH RECURSIVE table_recursive AS 
			(
			  SELECT 
			  json_array_elements(message_xml::json-&gt;'productOrderItem') AS product_item
			  ,message_xml
			  ,actionId
			  ,idOrdine
			  FROM 
			  -- input da inserire action outbound SOM
			  --(select b.message_xml from action a,action_msg b where a.message_id=b.id and a.id=620153549475)
				(
						select distinct
						d.message_xml,b.id actionId,a.value idOrdine 
						from detail a, request b, action c ,action_msg d
						where a.value='1-604305737940' and 
						a.root_id=b.root_id and 
						c.request_id=b.id and 
						c.system='som' and 
						c.direction='outbound' and
						d.id=c.message_id
				)
			  table_input
			  UNION ALL
			  SELECT 
			  json_array_elements(product_item-&gt;'productOffering') productOffering
			  ,message_xml
			    ,actionId
			  ,idOrdine
			  FROM table_recursive
			  WHERE product_item-&gt;'productOrderItem' IS NOT NULL
			)
			SELECT 
			idOrdine
			,actionId
			,message_xml
			,regexp_replace((product_item-&gt;'productOffering'-&gt;'id')::text,'"','','g') as idBB
			,regexp_replace((product_item-&gt;'product'-&gt;'externalId')::text,'"','','g') as externalId
			,product_item-&gt;&gt;'action'as action
			,product_item-&gt;&gt;'id'as id
			,regexp_replace((json_array_elements(product_item::json-&gt;'product'-&gt;'productCharacteristic')-&gt;'name')::text,'"','','g') caratName
			,regexp_replace((json_array_elements(product_item::json-&gt;'product'-&gt;'productCharacteristic')-&gt;'value')::text,'"','','g') caratValue
			FROM table_recursive
			WHERE product_item-&gt;'productOffering' IS NOT null
			) table_input
) tabella_definitiva 
limit 10</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>idordine</th><th>actionid</th><th>idbb</th><th>externalid</th><th>action</th><th>id</th><th>caratvalue</th><th>attrvalue</th><th>caratname</th><th>attrname</th></tr></thead><tbody><tr><td>1-604305737940</td><td>5.557</td><td>bpo_Father_0001</td><td>1604318754380</td><td>add</td><td>620153341707_306976464</td><td>0</td><td>"OnBoarding"</td><td>isVpnEnabled</td><td>"journeyType"</td></tr><tr><td>1-604305737940</td><td>5.557</td><td>bpo_Father_0001</td><td>1604318754380</td><td>add</td><td>620153341707_306976464</td><td>0</td><td>"Standard"</td><td>isVpnEnabled</td><td>"journeySubType"</td></tr><tr><td>1-604305737940</td><td>5.557</td><td>bpo_Father_0001</td><td>1604318754380</td><td>add</td><td>620153341707_306976464</td><td>Business</td><td>"OnBoarding"</td><td>customerSegment</td><td>"journeyType"</td></tr><tr><td>1-604305737940</td><td>5.557</td><td>bpo_Father_0001</td><td>1604318754380</td><td>add</td><td>620153341707_306976464</td><td>Business</td><td>"Standard"</td><td>customerSegment</td><td>"journeySubType"</td></tr><tr><td>1-604305737940</td><td>5.557</td><td>bpo_Father_0001</td><td>1604318754380</td><td>add</td><td>620153341707_306976464</td><td>0</td><td>"OnBoarding"</td><td>isEnelVpnEnabled</td><td>"journeyType"</td></tr><tr><td>1-604305737940</td><td>5.557</td><td>bpo_Father_0001</td><td>1604318754380</td><td>add</td><td>620153341707_306976464</td><td>0</td><td>"Standard"</td><td>isEnelVpnEnabled</td><td>"journeySubType"</td></tr><tr><td>1-604305737940</td><td>5.557</td><td>bpo_Father_0001</td><td>1604318754380</td><td>add</td><td>620153341707_306976464</td><td>sim</td><td>"OnBoarding"</td><td>famiglia</td><td>"journeyType"</td></tr><tr><td>1-604305737940</td><td>5.557</td><td>bpo_Father_0001</td><td>1604318754380</td><td>add</td><td>620153341707_306976464</td><td>sim</td><td>"Standard"</td><td>famiglia</td><td>"journeySubType"</td></tr><tr><td>1-604305737940</td><td>5.557</td><td>bpo_Father_0001</td><td>1604318754380</td><td>add</td><td>620153341707_306976464</td><td>8939880845120947068</td><td>"OnBoarding"</td><td>serialNumber</td><td>"journeyType"</td></tr><tr><td>1-604305737940</td><td>5.557</td><td>bpo_Father_0001</td><td>1604318754380</td><td>add</td><td>620153341707_306976464</td><td>8939880845120947068</td><td>"Standard"</td><td>serialNumber</td><td>"journeySubType"</td></tr></tbody></table></div></div><div class="section" id="ID1717444448355"><div class="section-column1"><div class="section-title">PAR 3.9 - Estrae tutti i campi verso il SOM in maniera completa entrando per id_ordine (DIN1717444448355)<hr></div><pre><code class="language-sql">select * from (
			select table_input.*
			from (
								WITH RECURSIVE table_recursive AS 
								(
											  SELECT 
											  idOrdine,
											  actionId,
											  json_array_elements(message_xml::json-&gt;'productOrderItem') AS product_item
											  FROM 
												(
														select distinct
														d.message_xml,
														b.id actionId,
														a.value idOrdine 
														from detail a, request b, action c ,action_msg d
														where a.value='1-604305737940' and 
														a.root_id=b.root_id and 
														c.request_id=b.id and 
														c.system='som' and 
														c.direction='outbound' and
														d.id=c.message_id
												)
											  table_input
								  UNION ALL
											  SELECT 
											  idOrdine,
											  actionId,
											  json_array_elements(product_item-&gt;'productOffering')as product_item
											  FROM table_recursive
											  WHERE product_item-&gt;'productOrderItem' IS NOT NULL
								)
								SELECT 
								idOrdine
								,actionId
								,regexp_replace((product_item-&gt;'productOffering'-&gt;'id')::text,'"','','g') as idBB
								,regexp_replace((product_item-&gt;'product'-&gt;'externalId')::text,'"','','g') as externalId
								,product_item-&gt;&gt;'action'as action
								,product_item-&gt;&gt;'id'as id
								FROM table_recursive
								WHERE product_item-&gt;'productOffering' IS NOT null
			) table_input
) tabella_definitiva 
union all
	select distinct
	a.value ordine 
	,b.id actid	
	,'attrs' struct
	,json_array_elements(message_xml::json-&gt;'attrs')-&gt;&gt;'name' as names
  ,json_array_elements(message_xml::json-&gt;'attrs')-&gt;&gt;'value' as value
  ,'' as action
  from detail a, request b, action c ,action_msg d
	where a.value='1-604305737940' and 
	a.root_id=b.root_id and 
	c.request_id=b.id and 
	c.system='som' and 
	c.direction='outbound' and
	d.id=c.message_id
	union all 
	select distinct a.value ordine 
	,b.id actid
	,'relatedEntity' struct
	,json_array_elements(d.message_xml::json-&gt;'relatedEntity')-&gt;&gt;'reference' as refer
   ,json_array_elements(message_xml::json-&gt;'relatedEntity')-&gt;&gt;'role' as roles
	  ,'' as action
	from detail a, request b, action c ,action_msg d
	where a.value='1-604305737940' and 
	a.root_id=b.root_id and 
	c.request_id=b.id and 
	c.system='som' and 
	c.direction='outbound' and
	d.id=c.message_id</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>idordine</th><th>actionid</th><th>idbb</th><th>externalid</th><th>action</th><th>id</th></tr></thead><tbody><tr><td>1-604305737940</td><td>5.557</td><td>bpo_Father_0001</td><td>1604318754380</td><td>add</td><td>620153341707_306976464</td></tr><tr><td>1-604305737940</td><td>5.557</td><td>po_ANB_MSISDN</td><td>1604318754397</td><td>add</td><td>620153341707_1357715757</td></tr><tr><td>1-604305737940</td><td>5.557</td><td>po_ANB_EnableMMS</td><td>1604318754448</td><td>add</td><td>620153341707_1445120822</td></tr><tr><td>1-604305737940</td><td>5.557</td><td>po_ANB_VoiceMail</td><td>1604318754406</td><td>add</td><td>620153341707_1658162733</td></tr><tr><td>1-604305737940</td><td>5.557</td><td>po_ANB_EnableSMSOutgoing</td><td>1604318754409</td><td>add</td><td>620153341707_530169019</td></tr><tr><td>1-604305737940</td><td>5.557</td><td>po_ANB_APN_001</td><td>1604318754447</td><td>add</td><td>620153341707_824979038</td></tr><tr><td>1-604305737940</td><td>5.557</td><td>po_ANB_EnableVoiceRoaming</td><td>1604318754404</td><td>add</td><td>620153341707_858934639</td></tr><tr><td>1-604305737940</td><td>5.557</td><td>po_ANB_EnableVoiceInternational</td><td>1604318754405</td><td>add</td><td>620153341707_97198039</td></tr><tr><td>1-604305737940</td><td>5.557</td><td>po_ANB_MobileAccess4G</td><td>1604318776565</td><td>add</td><td>620153341707_1089086908</td></tr><tr><td>1-604305737940</td><td>5.557</td><td>po_CB_ATR_NA_NA_001</td><td>1604318754410</td><td>add</td><td>620153341707_1953500679</td></tr><tr><td>1-604305737940</td><td>5.557</td><td>bpo_NA_M_PM_T_001</td><td>1604318754449</td><td>add</td><td>620153341707_1383899099</td></tr><tr><td>1-604305737940</td><td>5.557</td><td>po_CB_A_P80_NA_002</td><td>1604318754453</td><td>add</td><td>620153341707_679126356</td></tr><tr><td>1-604305737940</td><td>5.557</td><td>po_CB_T_P65_NA_002</td><td>1604318754451</td><td>add</td><td>620153341707_1102148578</td></tr><tr><td>1-604305737940</td><td>5.557</td><td>po_AAB_Refill</td><td></td><td>add</td><td>620153341707_1748410781</td></tr><tr><td>1-604305737940</td><td>5.559</td><td>bpo_Father_0001</td><td>1604318754456</td><td>add</td><td>620153341710_1762946006</td></tr><tr><td>1-604305737940</td><td>5.559</td><td>po_ANB_MSISDN</td><td>1604318754473</td><td>add</td><td>620153341710_1366950131</td></tr><tr><td>1-604305737940</td><td>5.559</td><td>po_ANB_EnableMMS</td><td>1604318754524</td><td>add</td><td>620153341710_1199843865</td></tr><tr><td>1-604305737940</td><td>5.559</td><td>po_ANB_VoiceMail</td><td>1604318754482</td><td>add</td><td>620153341710_751581771</td></tr><tr><td>1-604305737940</td><td>5.559</td><td>po_ANB_EnableSMSOutgoing</td><td>1604318754485</td><td>add</td><td>620153341710_1494263402</td></tr><tr><td>1-604305737940</td><td>5.559</td><td>po_ANB_APN_001</td><td>1604318754523</td><td>add</td><td>620153341710_356078934</td></tr><tr><td>1-604305737940</td><td>5.559</td><td>po_ANB_EnableVoiceRoaming</td><td>1604318754480</td><td>add</td><td>620153341710_1700394860</td></tr><tr><td>1-604305737940</td><td>5.559</td><td>po_ANB_EnableVoiceInternational</td><td>1604318754481</td><td>add</td><td>620153341710_1610449819</td></tr><tr><td>1-604305737940</td><td>5.559</td><td>po_ANB_MobileAccess4G</td><td>1604318776574</td><td>add</td><td>620153341710_911752339</td></tr><tr><td>1-604305737940</td><td>5.559</td><td>po_CB_ATR_NA_NA_001</td><td>1604318754486</td><td>add</td><td>620153341710_1248038209</td></tr><tr><td>1-604305737940</td><td>5.559</td><td>bpo_NA_M_PM_T_001</td><td>1604318754525</td><td>add</td><td>620153341710_596966817</td></tr><tr><td>1-604305737940</td><td>5.559</td><td>po_CB_A_P80_NA_002</td><td>1604318754529</td><td>add</td><td>620153341710_941121157</td></tr><tr><td>1-604305737940</td><td>5.559</td><td>po_CB_T_P65_NA_002</td><td>1604318754527</td><td>add</td><td>620153341710_1675670452</td></tr><tr><td>1-604305737940</td><td>5.559</td><td>po_AAB_Refill</td><td></td><td>add</td><td>620153341710_1877531375</td></tr><tr><td>1-604305737940</td><td>5.561</td><td>bpo_Father_0001</td><td>1604318754532</td><td>add</td><td>620153341713_115498307</td></tr><tr><td>1-604305737940</td><td>5.561</td><td>po_ANB_MSISDN</td><td>1604318754549</td><td>add</td><td>620153341713_686961033</td></tr><tr><td>1-604305737940</td><td>5.561</td><td>po_ANB_EnableMMS</td><td>1604318754600</td><td>add</td><td>620153341713_959204151</td></tr><tr><td>1-604305737940</td><td>5.561</td><td>po_ANB_VoiceMail</td><td>1604318754558</td><td>add</td><td>620153341713_1033550640</td></tr><tr><td>1-604305737940</td><td>5.561</td><td>po_ANB_EnableSMSOutgoing</td><td>1604318754561</td><td>add</td><td>620153341713_374830717</td></tr><tr><td>1-604305737940</td><td>5.561</td><td>po_ANB_APN_001</td><td>1604318754599</td><td>add</td><td>620153341713_1140355764</td></tr><tr><td>1-604305737940</td><td>5.561</td><td>po_ANB_EnableVoiceRoaming</td><td>1604318754556</td><td>add</td><td>620153341713_956550920</td></tr><tr><td>1-604305737940</td><td>5.561</td><td>po_ANB_EnableVoiceInternational</td><td>1604318754557</td><td>add</td><td>620153341713_1864859086</td></tr><tr><td>1-604305737940</td><td>5.561</td><td>po_ANB_MobileAccess4G</td><td>1604318776583</td><td>add</td><td>620153341713_1909213147</td></tr><tr><td>1-604305737940</td><td>5.561</td><td>po_CB_ATR_NA_NA_001</td><td>1604318754562</td><td>add</td><td>620153341713_705959512</td></tr><tr><td>1-604305737940</td><td>5.561</td><td>bpo_NA_M_PM_T_001</td><td>1604318754601</td><td>add</td><td>620153341713_123784308</td></tr><tr><td>1-604305737940</td><td>5.561</td><td>po_CB_A_P80_NA_002</td><td>1604318754605</td><td>add</td><td>620153341713_140817291</td></tr><tr><td>1-604305737940</td><td>5.561</td><td>po_CB_T_P65_NA_002</td><td>1604318754603</td><td>add</td><td>620153341713_722155727</td></tr><tr><td>1-604305737940</td><td>5.561</td><td>po_AAB_Refill</td><td></td><td>add</td><td>620153341713_1829311988</td></tr><tr><td>1-604305737940</td><td>5.563</td><td>bpo_Father_0001</td><td>1604318677518</td><td>add</td><td>620153341716_17367306</td></tr><tr><td>1-604305737940</td><td>5.563</td><td>po_ANB_MSISDN</td><td>1604318754245</td><td>add</td><td>620153341716_996256370</td></tr><tr><td>1-604305737940</td><td>5.563</td><td>po_ANB_EnableMMS</td><td>1604318754296</td><td>add</td><td>620153341716_1032369889</td></tr><tr><td>1-604305737940</td><td>5.563</td><td>po_ANB_VoiceMail</td><td>1604318754254</td><td>add</td><td>620153341716_417230820</td></tr><tr><td>1-604305737940</td><td>5.563</td><td>po_ANB_EnableSMSOutgoing</td><td>1604318754257</td><td>add</td><td>620153341716_1745079876</td></tr><tr><td>1-604305737940</td><td>5.563</td><td>po_ANB_APN_001</td><td>1604318754295</td><td>add</td><td>620153341716_438524224</td></tr><tr><td>1-604305737940</td><td>5.563</td><td>po_ANB_EnableVoiceRoaming</td><td>1604318754252</td><td>add</td><td>620153341716_2085141777</td></tr><tr><td>1-604305737940</td><td>5.563</td><td>po_ANB_EnableVoiceInternational</td><td>1604318754253</td><td>add</td><td>620153341716_688714289</td></tr><tr><td>1-604305737940</td><td>5.563</td><td>po_ANB_MobileAccess4G</td><td>1604318776547</td><td>add</td><td>620153341716_406560640</td></tr><tr><td>1-604305737940</td><td>5.563</td><td>po_CB_ATR_NA_NA_001</td><td>1604318754258</td><td>add</td><td>620153341716_927257658</td></tr><tr><td>1-604305737940</td><td>5.563</td><td>bpo_NA_M_PM_T_001</td><td>1604318754297</td><td>add</td><td>620153341716_270397733</td></tr><tr><td>1-604305737940</td><td>5.563</td><td>po_CB_A_P80_NA_002</td><td>1604318754301</td><td>add</td><td>620153341716_964108763</td></tr><tr><td>1-604305737940</td><td>5.563</td><td>po_CB_T_P65_NA_002</td><td>1604318754299</td><td>add</td><td>620153341716_1036442286</td></tr><tr><td>1-604305737940</td><td>5.563</td><td>po_AAB_Refill</td><td></td><td>add</td><td>620153341716_658876134</td></tr><tr><td>1-604305737940</td><td>5.565</td><td>bpo_Father_0001</td><td>1604318754681</td><td>add</td><td>620153341719_2018928247</td></tr><tr><td>1-604305737940</td><td>5.565</td><td>po_ANB_MSISDN</td><td>1604318754698</td><td>add</td><td>620153341719_1912619004</td></tr><tr><td>1-604305737940</td><td>5.565</td><td>po_ANB_EnableMMS</td><td>1604318754749</td><td>add</td><td>620153341719_2108843901</td></tr><tr><td>1-604305737940</td><td>5.565</td><td>po_ANB_VoiceMail</td><td>1604318754707</td><td>add</td><td>620153341719_875118919</td></tr><tr><td>1-604305737940</td><td>5.565</td><td>po_ANB_EnableSMSOutgoing</td><td>1604318754710</td><td>add</td><td>620153341719_2106656273</td></tr><tr><td>1-604305737940</td><td>5.565</td><td>po_ANB_APN_001</td><td>1604318754748</td><td>add</td><td>620153341719_973745335</td></tr><tr><td>1-604305737940</td><td>5.565</td><td>po_ANB_EnableVoiceRoaming</td><td>1604318754705</td><td>add</td><td>620153341719_1480737218</td></tr><tr><td>1-604305737940</td><td>5.565</td><td>po_ANB_EnableVoiceInternational</td><td>1604318754706</td><td>add</td><td>620153341719_1912820128</td></tr><tr><td>1-604305737940</td><td>5.565</td><td>po_ANB_MobileAccess4G</td><td>1604318776611</td><td>add</td><td>620153341719_296454818</td></tr><tr><td>1-604305737940</td><td>5.565</td><td>po_CB_ATR_NA_NA_001</td><td>1604318754711</td><td>add</td><td>620153341719_1876269754</td></tr><tr><td>1-604305737940</td><td>5.565</td><td>bpo_NA_M_PM_T_001</td><td>1604318754750</td><td>add</td><td>620153341719_2013044105</td></tr><tr><td>1-604305737940</td><td>5.565</td><td>po_ANB_MobileAccess5G</td><td>1604318776640</td><td>add</td><td>620153341719_1627140596</td></tr><tr><td>1-604305737940</td><td>5.565</td><td>po_AAB_Refill</td><td></td><td>add</td><td>620153341719_1008903299</td></tr><tr><td>1-604305737940</td><td>5.567</td><td>bpo_Father_0001</td><td>1604318754608</td><td>add</td><td>620153341730_1302398499</td></tr><tr><td>1-604305737940</td><td>5.567</td><td>po_ANB_MSISDN</td><td>1604318754625</td><td>add</td><td>620153341730_1764056964</td></tr><tr><td>1-604305737940</td><td>5.567</td><td>po_ANB_EnableMMS</td><td>1604318754676</td><td>add</td><td>620153341730_678999771</td></tr><tr><td>1-604305737940</td><td>5.567</td><td>po_ANB_VoiceMail</td><td>1604318754634</td><td>add</td><td>620153341730_1959391141</td></tr><tr><td>1-604305737940</td><td>5.567</td><td>po_ANB_EnableSMSOutgoing</td><td>1604318754637</td><td>add</td><td>620153341730_851560649</td></tr><tr><td>1-604305737940</td><td>5.567</td><td>po_ANB_APN_001</td><td>1604318754675</td><td>add</td><td>620153341730_374118606</td></tr><tr><td>1-604305737940</td><td>5.567</td><td>po_ANB_EnableVoiceRoaming</td><td>1604318754632</td><td>add</td><td>620153341730_1299968457</td></tr><tr><td>1-604305737940</td><td>5.567</td><td>po_ANB_EnableVoiceInternational</td><td>1604318754633</td><td>add</td><td>620153341730_281023350</td></tr><tr><td>1-604305737940</td><td>5.567</td><td>po_ANB_MobileAccess4G</td><td>1604318776592</td><td>add</td><td>620153341730_1493105033</td></tr><tr><td>1-604305737940</td><td>5.567</td><td>po_CB_ATR_NA_NA_001</td><td>1604318754638</td><td>add</td><td>620153341730_1599437720</td></tr><tr><td>1-604305737940</td><td>5.567</td><td>bpo_NA_M_PM_T_001</td><td>1604318754677</td><td>add</td><td>620153341730_1778137839</td></tr><tr><td>1-604305737940</td><td>5.567</td><td>po_ANB_MobileAccess5G</td><td>1604318776631</td><td>add</td><td>620153341730_750027987</td></tr><tr><td>1-604305737940</td><td>5.567</td><td>po_AAB_Refill</td><td></td><td>add</td><td>620153341730_1243570132</td></tr><tr><td>1-604305737940</td><td>5.569</td><td>bpo_Father_0001</td><td>1604318754304</td><td>add</td><td>620153341733_2033579214</td></tr><tr><td>1-604305737940</td><td>5.569</td><td>po_ANB_MSISDN</td><td>1604318754321</td><td>add</td><td>620153341733_127543181</td></tr><tr><td>1-604305737940</td><td>5.569</td><td>po_ANB_EnableMMS</td><td>1604318754372</td><td>add</td><td>620153341733_362308810</td></tr><tr><td>1-604305737940</td><td>5.569</td><td>po_ANB_VoiceMail</td><td>1604318754330</td><td>add</td><td>620153341733_1614109573</td></tr><tr><td>1-604305737940</td><td>5.569</td><td>po_ANB_EnableSMSOutgoing</td><td>1604318754333</td><td>add</td><td>620153341733_1090435370</td></tr><tr><td>1-604305737940</td><td>5.569</td><td>po_ANB_APN_001</td><td>1604318754371</td><td>add</td><td>620153341733_1392614246</td></tr><tr><td>1-604305737940</td><td>5.569</td><td>po_ANB_EnableVoiceRoaming</td><td>1604318754328</td><td>add</td><td>620153341733_894469992</td></tr><tr><td>1-604305737940</td><td>5.569</td><td>po_ANB_EnableVoiceInternational</td><td>1604318754329</td><td>add</td><td>620153341733_1275252897</td></tr><tr><td>1-604305737940</td><td>5.569</td><td>po_ANB_MobileAccess4G</td><td>1604318776556</td><td>add</td><td>620153341733_1997155934</td></tr><tr><td>1-604305737940</td><td>5.569</td><td>po_CB_ATR_NA_NA_001</td><td>1604318754334</td><td>add</td><td>620153341733_1637026517</td></tr><tr><td>1-604305737940</td><td>5.569</td><td>bpo_NA_M_PM_T_001</td><td>1604318754373</td><td>add</td><td>620153341733_2072341259</td></tr><tr><td>1-604305737940</td><td>5.569</td><td>po_CB_A_P80_NA_002</td><td>1604318754377</td><td>add</td><td>620153341733_2100313581</td></tr><tr><td>1-604305737940</td><td>5.569</td><td>po_CB_T_P65_NA_002</td><td>1604318754375</td><td>add</td><td>620153341733_1420138602</td></tr><tr><td>1-604305737940</td><td>5.569</td><td>po_AAB_Refill</td><td></td><td>add</td><td>620153341733_674015109</td></tr><tr><td>1-604305737940</td><td>5.687</td><td>po_ANB_MSISDN</td><td>1604318754549</td><td>Modify</td><td>620153342297_366014274</td></tr><tr><td>1-604305737940</td><td>5.689</td><td>po_ANB_MSISDN</td><td>1604318754397</td><td>Modify</td><td>620153342309_600321777</td></tr><tr><td>1-604305737940</td><td>5.690</td><td>po_ANB_MSISDN</td><td>1604318754473</td><td>Modify</td><td>620153342314_1406960209</td></tr><tr><td>1-604305737940</td><td>5.691</td><td>po_ANB_MSISDN</td><td>1604318754321</td><td>Modify</td><td>620153342315_2022574617</td></tr><tr><td>1-604305737940</td><td>6.064</td><td>po_ANB_MSISDN</td><td>1604318754625</td><td>Modify</td><td>620153345048_686001977</td></tr><tr><td>1-604305737940</td><td>5.557</td><td>attrs</td><td>journeyType</td><td>OnBoarding</td><td></td></tr><tr><td>1-604305737940</td><td>5.691</td><td>attrs</td><td>oloCode</td><td>01</td><td></td></tr><tr><td>1-604305737940</td><td>5.569</td><td>attrs</td><td>journeyType</td><td>OnBoarding</td><td></td></tr><tr><td>1-604305737940</td><td>5.687</td><td>attrs</td><td>journeyType</td><td>ChangeMSISDN</td><td></td></tr><tr><td>1-604305737940</td><td>5.689</td><td>attrs</td><td>cutoverDate</td><td>18/09/2023</td><td></td></tr><tr><td>1-604305737940</td><td>6.064</td><td>attrs</td><td>oloCode</td><td>01</td><td></td></tr><tr><td>1-604305737940</td><td>5.691</td><td>attrs</td><td>requestId</td><td>620153341734</td><td></td></tr><tr><td>1-604305737940</td><td>5.689</td><td>attrs</td><td>journeySubType</td><td>PortIn</td><td></td></tr><tr><td>1-604305737940</td><td>5.561</td><td>attrs</td><td>journeySubType</td><td>Standard</td><td></td></tr><tr><td>1-604305737940</td><td>6.064</td><td>attrs</td><td>journeyType</td><td>ChangeMSISDN</td><td></td></tr><tr><td>1-604305737940</td><td>5.565</td><td>attrs</td><td>journeyType</td><td>OnBoarding</td><td></td></tr><tr><td>1-604305737940</td><td>5.690</td><td>attrs</td><td>oloCode</td><td>01</td><td></td></tr><tr><td>1-604305737940</td><td>5.687</td><td>attrs</td><td>oloCode</td><td>01</td><td></td></tr><tr><td>1-604305737940</td><td>5.559</td><td>attrs</td><td>journeyType</td><td>OnBoarding</td><td></td></tr><tr><td>1-604305737940</td><td>5.689</td><td>attrs</td><td>oloCode</td><td>01</td><td></td></tr><tr><td>1-604305737940</td><td>5.569</td><td>attrs</td><td>journeySubType</td><td>Standard</td><td></td></tr><tr><td>1-604305737940</td><td>5.567</td><td>attrs</td><td>journeyType</td><td>OnBoarding</td><td></td></tr><tr><td>1-604305737940</td><td>5.563</td><td>attrs</td><td>journeySubType</td><td>Standard</td><td></td></tr><tr><td>1-604305737940</td><td>5.557</td><td>attrs</td><td>journeySubType</td><td>Standard</td><td></td></tr><tr><td>1-604305737940</td><td>6.064</td><td>attrs</td><td>requestId</td><td>620153341731</td><td></td></tr><tr><td>1-604305737940</td><td>5.565</td><td>attrs</td><td>journeySubType</td><td>Standard</td><td></td></tr><tr><td>1-604305737940</td><td>5.689</td><td>attrs</td><td>requestId</td><td>620153341708</td><td></td></tr><tr><td>1-604305737940</td><td>6.064</td><td>attrs</td><td>journeySubType</td><td>PortIn</td><td></td></tr><tr><td>1-604305737940</td><td>5.563</td><td>attrs</td><td>journeyType</td><td>OnBoarding</td><td></td></tr><tr><td>1-604305737940</td><td>5.561</td><td>attrs</td><td>journeyType</td><td>OnBoarding</td><td></td></tr><tr><td>1-604305737940</td><td>5.687</td><td>attrs</td><td>cutoverDate</td><td>18/09/2023</td><td></td></tr><tr><td>1-604305737940</td><td>5.690</td><td>attrs</td><td>requestId</td><td>620153341711</td><td></td></tr><tr><td>1-604305737940</td><td>5.567</td><td>attrs</td><td>journeySubType</td><td>Standard</td><td></td></tr><tr><td>1-604305737940</td><td>5.690</td><td>attrs</td><td>journeyType</td><td>ChangeMSISDN</td><td></td></tr><tr><td>1-604305737940</td><td>5.687</td><td>attrs</td><td>requestId</td><td>620153341714</td><td></td></tr><tr><td>1-604305737940</td><td>5.691</td><td>attrs</td><td>journeyType</td><td>ChangeMSISDN</td><td></td></tr><tr><td>1-604305737940</td><td>5.687</td><td>attrs</td><td>journeySubType</td><td>PortIn</td><td></td></tr><tr><td>1-604305737940</td><td>5.690</td><td>attrs</td><td>journeySubType</td><td>PortIn</td><td></td></tr><tr><td>1-604305737940</td><td>5.690</td><td>attrs</td><td>cutoverDate</td><td>18/09/2023</td><td></td></tr><tr><td>1-604305737940</td><td>5.691</td><td>attrs</td><td>journeySubType</td><td>PortIn</td><td></td></tr><tr><td>1-604305737940</td><td>5.691</td><td>attrs</td><td>cutoverDate</td><td>18/09/2023</td><td></td></tr><tr><td>1-604305737940</td><td>6.064</td><td>attrs</td><td>cutoverDate</td><td>19/09/2023</td><td></td></tr><tr><td>1-604305737940</td><td>5.559</td><td>attrs</td><td>journeySubType</td><td>Standard</td><td></td></tr><tr><td>1-604305737940</td><td>5.689</td><td>attrs</td><td>journeyType</td><td>ChangeMSISDN</td><td></td></tr><tr><td>1-604305737940</td><td>5.690</td><td>relatedEntity</td><td>3284563623</td><td>MSISDN</td><td></td></tr><tr><td>1-604305737940</td><td>5.567</td><td>relatedEntity</td><td>3274268702</td><td>MSISDN</td><td></td></tr><tr><td>1-604305737940</td><td>5.689</td><td>relatedEntity</td><td>222885452388196</td><td>IMSI</td><td></td></tr><tr><td>1-604305737940</td><td>5.565</td><td>relatedEntity</td><td>3274296037</td><td>MSISDN</td><td></td></tr><tr><td>1-604305737940</td><td>5.569</td><td>relatedEntity</td><td>3200292138</td><td>MSISDN</td><td></td></tr><tr><td>1-604305737940</td><td>5.691</td><td>relatedEntity</td><td>3200292138</td><td>MSISDN</td><td></td></tr><tr><td>1-604305737940</td><td>5.559</td><td>relatedEntity</td><td>3284563623</td><td>MSISDN</td><td></td></tr><tr><td>1-604305737940</td><td>5.567</td><td>relatedEntity</td><td>222885452388202</td><td>IMSI</td><td></td></tr><tr><td>1-604305737940</td><td>5.687</td><td>relatedEntity</td><td>222885452388198</td><td>IMSI</td><td></td></tr><tr><td>1-604305737940</td><td>5.689</td><td>relatedEntity</td><td>3292848436</td><td>MSISDN</td><td></td></tr><tr><td>1-604305737940</td><td>5.563</td><td>relatedEntity</td><td>3274277657</td><td>MSISDN</td><td></td></tr><tr><td>1-604305737940</td><td>5.691</td><td>relatedEntity</td><td>222885452388199</td><td>IMSI</td><td></td></tr><tr><td>1-604305737940</td><td>5.569</td><td>relatedEntity</td><td>222885452388199</td><td>IMSI</td><td></td></tr><tr><td>1-604305737940</td><td>6.064</td><td>relatedEntity</td><td>3274268702</td><td>MSISDN</td><td></td></tr><tr><td>1-604305737940</td><td>5.557</td><td>relatedEntity</td><td>222885452388196</td><td>IMSI</td><td></td></tr><tr><td>1-604305737940</td><td>5.563</td><td>relatedEntity</td><td>222885452388200</td><td>IMSI</td><td></td></tr><tr><td>1-604305737940</td><td>5.559</td><td>relatedEntity</td><td>222885452388197</td><td>IMSI</td><td></td></tr><tr><td>1-604305737940</td><td>5.557</td><td>relatedEntity</td><td>3292848436</td><td>MSISDN</td><td></td></tr><tr><td>1-604305737940</td><td>5.690</td><td>relatedEntity</td><td>222885452388197</td><td>IMSI</td><td></td></tr><tr><td>1-604305737940</td><td>5.561</td><td>relatedEntity</td><td>222885452388198</td><td>IMSI</td><td></td></tr><tr><td>1-604305737940</td><td>5.687</td><td>relatedEntity</td><td>3200149073</td><td>MSISDN</td><td></td></tr><tr><td>1-604305737940</td><td>6.064</td><td>relatedEntity</td><td>222885452388202</td><td>IMSI</td><td></td></tr><tr><td>1-604305737940</td><td>5.565</td><td>relatedEntity</td><td>222885452388201</td><td>IMSI</td><td></td></tr><tr><td>1-604305737940</td><td>5.561</td><td>relatedEntity</td><td>3200149073</td><td>MSISDN</td></tr></tbody></table></div></div><div class="section" id="ID1717487503180"><div class="section-column1"><div class="section-title">PAR 3.10 - Estrazione di tutti i campi pubblicati al SOM per id_ordine (***) (DIN1717487503180)<hr></div><pre><code class="language-sql">select * from (
			select table_input.*
			from (
								WITH RECURSIVE table_recursive AS 
								(
											  SELECT 
											  idOrdine,
											  actionId,
											  json_array_elements(message_xml::json-&gt;'productOrderItem') AS product_item
											  FROM 
												(--estrae tutte le action outbound som
														select distinct
														d.message_xml,
														c.id actionId,
														a.value idOrdine 
														from detail a, request b, action c ,action_msg d
														where a.value='1-604305737940' and 
														a.root_id=b.root_id and 
														c.request_id=b.id and 
														c.system='som' and 
														c.direction='outbound' and
														d.id=c.message_id
												)
											  table_input
								  UNION ALL
											  SELECT 
											  idOrdine,
											  actionId,
											  json_array_elements(product_item-&gt;'productOffering')as product_item
											  FROM table_recursive
											  WHERE product_item-&gt;'productOrderItem' IS NOT null
								)
								SELECT 
								idOrdine
								,actionId
								,'idbb:   '||(product_item-&gt;'productOffering'-&gt;'id')::text as field1
								,'externalIdbb:   '||(product_item-&gt;'product'-&gt;'externalId')::text as fiedl2
								,'productCharacteristic.name:   '||(json_array_elements(product_item-&gt;'product'-&gt;'productCharacteristic')-&gt;'name')::text as field3
								,'productCharacteristic.value:   '||(json_array_elements(product_item-&gt;'product'-&gt;'productCharacteristic')-&gt;'value')::text as fiedl4
								,'productOrItem.action:   '||(product_item-&gt;&gt;'action')::text as field5
								,'productOrItem.id:   '||(product_item-&gt;&gt;'id')::text as field6
								FROM table_recursive
								WHERE product_item-&gt;'productOffering' IS NOT null
			) table_input
) tabella_definitiva 
union all
	select distinct
	a.value as idOrdine 
	,c.id as actionId	
	,'' as field1
	,'' as field2
	,'attrs.name:   '||(json_array_elements(message_xml::json-&gt;'attrs')-&gt;&gt;'name')::text as field3
    ,'attrs.value:   '||(json_array_elements(message_xml::json-&gt;'attrs')-&gt;&gt;'value')::text as field4
    ,'' as field5
    ,'' as field6
    from detail a, request b, action c ,action_msg d
	where a.value='1-604305737940' and 
	a.root_id=b.root_id and 
	c.request_id=b.id and 
	c.system='som' and 
	c.direction='outbound' and
	d.id=c.message_id
union all 
	select distinct 
	a.value as idOrdine 
	,c.id as actionId
	,'' as field1
	,'' as field2
	,'relatedEntity.reference:   '||(json_array_elements(d.message_xml::json-&gt;'relatedEntity')-&gt;&gt;'reference')::text as field3
    ,'relatedEntity.role:   '||(json_array_elements(message_xml::json-&gt;'relatedEntity')-&gt;&gt;'role')::text as field4
    ,'' as field5
    ,'' as field6
	from detail a, request b, action c ,action_msg d
	where a.value='1-604305737940' and 
	a.root_id=b.root_id and 
	c.request_id=b.id and 
	c.system='som' and 
	c.direction='outbound' and
	d.id=c.message_id</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>idordine</th><th>actionid</th><th>field1</th><th>fiedl2</th><th>field3</th><th>fiedl4</th><th>field5</th><th>field6</th></tr></thead><tbody><tr><td>1-604305737940</td><td>620.153.341.707</td><td>idbb:   "bpo_Father_0001"</td><td>externalIdbb:   "1604318754380"</td><td>productCharacteristic.name:   "isVpnEnabled"</td><td>productCharacteristic.value:   "0"</td><td>productOrItem.action:   add</td><td>productOrItem.id:   620153341707_306976464</td></tr><tr><td>1-604305737940</td><td>620.153.341.707</td><td>idbb:   "bpo_Father_0001"</td><td>externalIdbb:   "1604318754380"</td><td>productCharacteristic.name:   "customerSegment"</td><td>productCharacteristic.value:   "Business"</td><td>productOrItem.action:   add</td><td>productOrItem.id:   620153341707_306976464</td></tr><tr><td>1-604305737940</td><td>620.153.341.707</td><td>idbb:   "bpo_Father_0001"</td><td>externalIdbb:   "1604318754380"</td><td>productCharacteristic.name:   "isEnelVpnEnabled"</td><td>productCharacteristic.value:   "0"</td><td>productOrItem.action:   add</td><td>productOrItem.id:   620153341707_306976464</td></tr><tr><td>1-604305737940</td><td>620.153.341.707</td><td>idbb:   "bpo_Father_0001"</td><td>externalIdbb:   "1604318754380"</td><td>productCharacteristic.name:   "famiglia"</td><td>productCharacteristic.value:   "sim"</td><td>productOrItem.action:   add</td><td>productOrItem.id:   620153341707_306976464</td></tr><tr><td>1-604305737940</td><td>620.153.341.707</td><td>idbb:   "bpo_Father_0001"</td><td>externalIdbb:   "1604318754380"</td><td>productCharacteristic.name:   "serialNumber"</td><td>productCharacteristic.value:   "8939880845120947068"</td><td>productOrItem.action:   add</td><td>productOrItem.id:   620153341707_306976464</td></tr><tr><td>1-604305737940</td><td>620.153.341.707</td><td>idbb:   "bpo_Father_0001"</td><td>externalIdbb:   "1604318754380"</td><td>productCharacteristic.name:   "technology"</td><td>productCharacteristic.value:   "UMTS"</td><td>productOrItem.action:   add</td><td>productOrItem.id:   620153341707_306976464</td></tr><tr><td>1-604305737940</td><td>620.153.341.707</td><td>idbb:   "bpo_Father_0001"</td><td>externalIdbb:   "1604318754380"</td><td>productCharacteristic.name:   "ctype"</td><td>productCharacteristic.value:   "PREPAGATO"</td><td>productOrItem.action:   add</td><td>productOrItem.id:   620153341707_306976464</td></tr><tr><td>1-604305737940</td><td>620.153.341.707</td><td>idbb:   "bpo_Father_0001"</td><td>externalIdbb:   "1604318754380"</td><td>productCharacteristic.name:   "commercialOfferName"</td><td>productCharacteristic.value:   "PHX00033"</td><td>productOrItem.action:   add</td><td>productOrItem.id:   620153341707_306976464</td></tr><tr><td>1-604305737940</td><td>620.153.341.707</td><td>idbb:   "bpo_Father_0001"</td><td>externalIdbb:   "1604318754380"</td><td>productCharacteristic.name:   "simType"</td><td>productCharacteristic.value:   "voice"</td><td>productOrItem.action:   add</td><td>productOrItem.id:   620153341707_306976464</td></tr><tr><td>1-604305737940</td><td>620.153.341.707</td><td>idbb:   "bpo_Father_0001"</td><td>externalIdbb:   "1604318754380"</td><td>productCharacteristic.name:   "imsi"</td><td>productCharacteristic.value:   "222885452388196"</td><td>productOrItem.action:   add</td><td>productOrItem.id:   620153341707_306976464</td></tr></tbody></table></div></div></div><div class="chapter-container" id="ID1717340190450"><div class="chapter-title">CAP 4 - Estrazioni provisioning GSI(DIN1717340190450)</div><button class="chapter-button">Aggiungi Paragrafo</button><button class="chapter-button">Elimina Paragrafo</button><div class="section" id="ID1717340494447"><div class="section-column1"><div class="section-title">PAR 4.1 - Estrae action GSI da dettagli dall'EMF (DIN1717340494447)<hr></div><pre><code class="language-sql">SELECT a.* FROM ACTION a, action_msg b
WHERE 
a.message_id=b.id AND
b.message_xml LIKE '%Reintegro per furto - Kasko Premium%'
AND a.name='Send Logistic Order to GSI'
AND a.status='SA'
AND a.ts_created&gt;current_date-80</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>id</th><th>name</th><th>direction</th><th>status</th><th>ts_requested</th><th>ts_created</th><th>ts_enqueued</th><th>ts_first_start</th><th>ts_start</th><th>ts_end</th><th>priority</th><th>ts_todo</th><th>queue</th><th>request_id</th><th>message_id</th><th>system</th><th>cfg_id</th><th>handler</th><th>response_id</th><th>adb_source</th><th>result</th></tr></thead><tbody><tr><td>620.153.950.220</td><td>Send Logistic Order to GSI</td><td>outbound</td><td>SA</td><td>2024-04-04 15:23:03.794 +0200</td><td>2024-04-04 15:23:03.798 +0200</td><td></td><td>2024-04-04 15:23:04.000 +0200</td><td>2024-04-04 15:23:04.000 +0200</td><td>2024-04-04 15:23:05.000 +0200</td><td></td><td></td><td>gsi-publisher-out</td><td>611.096</td><td>438.973</td><td>gsi</td><td>84</td><td>com2gsi.module/com2gsi.processes.businessProcess.SendOrderOut</td><td>0</td><td></td><td></td></tr><tr><td>620.154.140.532</td><td>Send Logistic Order to GSI</td><td>outbound</td><td>SA</td><td>2024-04-19 12:46:26.493 +0200</td><td>2024-04-19 12:46:26.500 +0200</td><td></td><td>2024-04-19 12:46:26.000 +0200</td><td>2024-04-19 12:46:26.000 +0200</td><td>2024-04-19 12:46:28.000 +0200</td><td></td><td></td><td>gsi-publisher-out</td><td>628.013</td><td>568.457</td><td>gsi</td><td>84</td><td>com2gsi.module/com2gsi.processes.businessProcess.SendOrderOut</td><td>0</td></tr></tbody></table></div></div></div><div class="chapter-container" id="ID1717341107452"><div class="chapter-title">CAP 5 - Estrazioni provisioning BILLING(DIN1717341107452)</div><button class="chapter-button">Aggiungi Paragrafo</button><button class="chapter-button">Elimina Paragrafo</button><div class="section" id="ID1717341162103"><div class="section-column1"><div class="section-title">PAR 5.1 - Estrae action billing a partire dal tel_no (DIN1717341162103)<hr></div><pre><code class="language-sql">select --d.value,b.name,b.id,a.root_id,b.status,
      distinct b.name,d.value,a.ts_created,a.name,a.status from request a, action  b,detail d
      where 
      b.request_id=a.id  
            and b.system='billing' and b.direction='outbound'
and a.root_id=d.root_id  and  d.name = 'tel_no' and b.name in ('Deactivation Service Instance','Active Service Instance')
and d.value IN (
'3801225517'
) order by 2</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>name</th><th>value</th><th>ts_created</th><th>name</th><th>status</th></tr></thead><tbody><tr><td>Active Service Instance</td><td>3801225517</td><td>2024-02-07 15:30:38.546 +0100</td><td>Network</td><td>SA</td></tr><tr><td>Active Service Instance</td><td>3801225517</td><td>2024-02-08 22:41:12.884 +0100</td><td>Logistics</td><td>SA</td></tr><tr><td>Deactivation Service Instance</td><td>3801225517</td><td>2024-04-03 17:21:02.667 +0200</td><td>Network</td><td>SA</td></tr></tbody></table></div></div></div><div class="chapter-container" id="ID1717345081937"><div class="chapter-title">CAP 6 - Estrazioni REPORT COM(DIN1717345081937)</div><button class="chapter-button">Aggiungi Paragrafo</button><button class="chapter-button">Elimina Paragrafo</button><div class="section" id="ID1717345154546"><div class="section-column1"><div class="section-title">PAR 6.1 - Estrazione ultimo report utile (DIN1717345154546)<hr></div><pre><code class="language-sql">SELECT count(*),(select max(id) from report_com_new)idrun FROM report_com_new where id = (select max(id) from report_com_new)</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>count</th><th>idrun</th></tr></thead><tbody><tr><td>58.267</td><td>16.847</td></tr></tbody></table></div></div><div class="section" id="ID1717345292330"><div class="section-column1"><div class="section-title">PAR 6.2 - Estrazione campi di dettaglio del report (DIN1717345292330)<hr></div><pre><code class="language-sql">select request_id,id_ordine,status,tipo,sottotipo,canale,csv_text from (
		SELECT 
		split_part(csv_text,';',1) request_id
		,split_part(csv_text,';',2) id_ordine
		,split_part(csv_text,';',8) tipo
		,split_part(csv_text,';',9) sottotipo
		,split_part(csv_text,';',10) canale
		,split_part(csv_text,';',51) status
		,csv_text
		FROM report_com_new where 
		id =12172 and outcome='TO CLUSTERIZE'
		--id=(select max(id) from report_com_new)
		)zz --where 
--		status&lt;&gt;'COMPLETED'
--		id_ordine='1-615870302022'
					where	zz.request_id::int in (638538)</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>request_id</th><th>id_ordine</th><th>status</th><th>tipo</th><th>sottotipo</th><th>canale</th><th>csv_text</th></tr></thead><tbody><tr><td>638538</td><td>N/A</td><td>TO CLUSTERIZE</td><td>N/A</td><td>N/A</td><td>N/A</td><td>638538;N/A;MnpDonor;WP;2024/04/24 20:41:55;N/A;1;N/A;N/A;N/A;N/A;N/A;N/A;N/A;1;0;0;0;0;0;0;1;0;0;0;0;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;0;0;0;0;0;0;TO CLUSTERIZE;</td></tr></tbody></table></div></div><div class="section" id="ID1717345416390"><div class="section-column1"><div class="section-title">PAR 6.3 - Estrae csv di un report (DIN1717345416390)<hr></div><pre><code class="language-sql">SELECT csv_text FROM report_com_new where id = (select max(id) from report_com_new)</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>csv_text</th></tr></thead><tbody><tr><td>720960;N/A;MnpDonor;WP;2024/05/30 20:41:51;N/A;2;N/A;N/A;N/A;N/A;N/A;N/A;N/A;1;0;0;0;0;0;0;0;1;0;0;0;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;0;0;0;0;0;0;TO CLUSTERIZE;</td></tr><tr><td>720959;N/A;MnpDonor;WP;2024/05/30 20:41:51;N/A;2;N/A;N/A;N/A;N/A;N/A;N/A;N/A;1;0;0;0;0;0;0;0;1;0;0;0;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;N/A;0;0;0;0;0;0;TO CLUSTERIZE;</td></tr></tbody></table></div></div></div><div class="chapter-container" id="ID1717346077096"><div class="chapter-title">CAP 7 - Estrazioni gestione PREFERENTIAL LIST(DIN1717346077096)</div><button class="chapter-button">Aggiungi Paragrafo</button><button class="chapter-button">Elimina Paragrafo</button><div class="section" id="ID1717346336964"><div class="section-column1"><div class="section-title">PAR 7.1 - Estrazione numerazioni dall'EMF di PL (DIN1717346336964)<hr></div><pre><code class="language-sql">select r.id,r.name,r.root_id,  myTab.*
from request r, 
request_doc rd  ,
xmltable(
	XMLNAMESPACES(	
					'http://bssevo_com/commons/B2B-CMF-JobSharedVariable' AS "tns3",
					'http://www.example.org/listaLotti' AS "tns2",
					'http://phoenix.wind.it/common/ManagingPL' as "tns4"
					),
				'/tns3:root/tns3:managingPL/tns4:lotto/tns4:numerazione'
	passing (rd.document_xml::xml)
	columns 
		azione  text path '@azione',
		num  text path 'text()'	,
		COMiD   text path '../../tns4:communityId'
	) myTab
where name = 'Managing Preferential List Events' and status = 'WP' and 
rd.id =r.document_id --and r.root_id=583521
limit 4</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>id</th><th>name</th><th>root_id</th><th>azione</th><th>num</th><th>comid</th></tr></thead><tbody><tr><td>566.901</td><td>Managing Preferential List Events</td><td>566.679</td><td>Add</td><td>3890038127</td><td>463194</td></tr><tr><td>8.320</td><td>Managing Preferential List Events</td><td>8.320</td><td>Add</td><td>3882404099</td><td>456002</td></tr><tr><td>8.320</td><td>Managing Preferential List Events</td><td>8.320</td><td>Add</td><td>3895069587</td><td>456002</td></tr><tr><td>564.289</td><td>Managing Preferential List Events</td><td>564.230</td><td>Add</td><td>3888324395</td><td>462756</td></tr></tbody></table></div></div><div class="section" id="ID1717346509167"><div class="section-column1"><div class="section-title">PAR 7.2 - Estrae request di PL ed il numero di telefono (DIN1717346509167)<hr></div><pre><code class="language-sql">Select distinct rr.id,d.* from 
request r,
request rr  , 
item2detail i2d, 
detail d
where 
r.name = 'Managing Preferential List Events' and 
r.status = 'WP' and 
r.root_id=rr.root_id and 
rr.name not in ('Managing Preferential List Events') and
i2d.request_id =rr.id and
d.id =i2d.detail_id and 
d.name='tel_no' limit 4</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>id</th><th>id</th><th>name</th><th>value</th><th>pos</th><th>cfg_id</th><th>root_id</th></tr></thead><tbody><tr><td>306.833</td><td>107.301</td><td>tel_no</td><td>3808923775</td><td>0</td><td>14</td><td>306.833</td></tr><tr><td>306.833</td><td>107.308</td><td>tel_no</td><td>3275934948</td><td>0</td><td>14</td><td>306.833</td></tr><tr><td>306.833</td><td>107.310</td><td>tel_no</td><td>3887309990</td><td>0</td><td>14</td><td>306.833</td></tr><tr><td>323.418</td><td>107.301</td><td>tel_no</td><td>3808923775</td><td>0</td><td>14</td><td>306.833</td></tr></tbody></table></div></div></div><div class="chapter-container" id="ID1717354015894"><div class="chapter-title">CAP 8 - Query DISCARD(DIN1717354015894)</div><button class="chapter-button">Aggiungi Paragrafo</button><button class="chapter-button">Elimina Paragrafo</button><div class="section" id="ID1717354317061"><div class="section-column1"><div class="section-title">PAR 8.1 - Estrazione dalla discard dal id_ordine (DIN1717354317061)<hr></div><pre><code class="language-sql">select *
from detail de, discard2detail dd, discard di
where di.id_discard = dd.id_discard
and dd.id_detail = de.id
and de.value = '1-617897653353'
order by ts_discard desc;</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>id_discard</th><th>id_detail</th><th>id</th><th>name</th><th>value</th><th>pos</th><th>cfg_id</th><th>root_id</th></tr></thead><tbody><tr><td>5.162.513</td><td>2.857.057</td><td>2.857.057</td><td>id_odl_crm</td><td>1-625981894945</td><td>0</td><td>13</td><td></td></tr><tr><td>5.159.513</td><td>2.857.055</td><td>2.857.055</td><td>tracking_id</td><td>1-625981894945</td><td>0</td><td>12</td></tr></tbody></table></div></div><div class="section" id="ID1717354434954"><div class="section-column1"><div class="section-title">PAR 8.2 - Estrae eventi dalla discard entrando per sistema e in like sul messaggio (DIN1717354434954)<hr></div><pre><code class="language-sql">select count(*), date_trunc('Day',ts_discard)
from discard a where system='Som' and error_msg like '%COM_SOM_403%' and ts_discard &gt; current_date -20 
group by  date_trunc('Day',ts_discard)</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>count</th><th>date_trunc</th></tr></thead><tbody><tr><td>1</td><td>2024-05-13 00:00:00.000 +0200</td></tr><tr><td>4</td><td>2024-05-14 00:00:00.000 +0200</td></tr><tr><td>1</td><td>2024-05-17 00:00:00.000 +0200</td></tr><tr><td>1</td><td>2024-05-20 00:00:00.000 +0200</td></tr><tr><td>1</td><td>2024-05-21 00:00:00.000 +0200</td></tr><tr><td>3</td><td>2024-05-22 00:00:00.000 +0200</td></tr><tr><td>20</td><td>2024-05-23 00:00:00.000 +0200</td></tr><tr><td>13</td><td>2024-05-24 00:00:00.000 +0200</td></tr><tr><td>14</td><td>2024-05-27 00:00:00.000 +0200</td></tr><tr><td>6</td><td>2024-05-29 00:00:00.000 +0200</td></tr><tr><td>2</td><td>2024-05-30 00:00:00.000 +0200</td></tr><tr><td>2</td><td>2024-05-31 00:00:00.000 +0200</td></tr></tbody></table></div></div></div><div class="chapter-container" id="ID1717408739474"><div class="chapter-title">CAP 9 - Estrazione eventi con CRM(DIN1717408739474)</div><button class="chapter-button">Aggiungi Paragrafo</button><button class="chapter-button">Elimina Paragrafo</button><div class="section" id="ID1717408932196"><div class="section-column1"><div class="section-title">PAR 9.1 - Estrazione dettaglio esiti dall'EMF CRM outbound (DIN1717408932196)<hr></div><pre><code class="language-sql">select b.id,A.ID,A.ROOT_ID,b.ts_start,b.ts_end,b.name,c.message_xml,c.id from 
request a, action b,action_msg c  
where 1=1
and c.id=b.message_id
and b.request_id=a.id 
AND b.status ='SA'
and b."system" ='crm'
and b.direction='outbound'
and root_id =579121 
--and root_id in (select distinct root_id from detail where value='1-618011418916')
--and b.id=620153514073
and c.message_xml  like '%xsdLocal3:GestioneEsiti%'
and b.name not in ('Notify Waiting IFX','Send start CVP to CRM','Send Welcome Call','Notify Start SOM to CRM','Notify Order')

select a.name,myTab.*,myTab.esito ||'-'||myTab.causale||'-'||a.id
from action_msg b 
,action a,request d,
xmltable(
	XMLNAMESPACES(	
					'http://www.siebel.com/xml/BSS%20Gestione%20Esiti%20Order%20INT%20IO' AS "xsdLocal3"
					),
	--'/xsdLocal3:GestioneEsiti/xsdLocal3:OrderEntry-Order/xsdLocal3:OrderEntry-LineItems'
					'/xsdLocal3:GestioneEsiti/xsdLocal3:OrderEntry-Order/descendant::xsdLocal3:OrderEntry-LineItems'
	passing (b.message_xml::xml)
	columns 
		Sottotipo  text path 'xsdLocal3:Sottotipo'
		,codice text path 'xsdLocal3:esitoItems/xsdLocal3:codice'
		,descrizione text path 'xsdLocal3:esitoItems/xsdLocal3:descrizione'
		,esito text path 'xsdLocal3:esitoItems/xsdLocal3:esito'
		,causale text path 'xsdLocal3:esitoItems/xsdLocal3:causale'
		,orderItemId text path 'xsdLocal3:OrderItemId'
	) myTab
where a.message_id=b.id 
--and a.id=620153596705 
and b.message_xml  like '%xsdLocal3:GestioneEsiti%'
and 
d.root_id =616306
--and a.id in (620153830538,620153796141)
 -- in (select distinct root_id from detail where value='1-619821002400')
and a.request_id=d.id
AND a.status ='SA'
and a."system" ='crm'
and a.name  not in ('Notify Waiting IFX','Send start CVP to CRM','Send Welcome Call','Notify Start SOM to CRM','Notify Order')
and a.direction='outbound' --LIMIT 30</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>name</th><th>sottotipo</th><th>codice</th><th>descrizione</th><th>esito</th><th>causale</th><th>orderitemid</th><th>?column?</th></tr></thead><tbody><tr><td>Send mobile provisioning result</td><td>OPZ</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPR0</td><td>Definitivo-OK-620154130962</td></tr><tr><td>Send mobile provisioning result</td><td>OPZ</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPQZ</td><td>Definitivo-OK-620154130962</td></tr><tr><td>Send mobile provisioning result</td><td>OPZ</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPQY</td><td>Definitivo-OK-620154130962</td></tr><tr><td>Send mobile provisioning result</td><td>PNTF</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPQX</td><td>Definitivo-OK-620154130962</td></tr><tr><td>Send mobile provisioning result</td><td>MNPIN</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPPY</td><td>Definitivo-OK-620154130962</td></tr><tr><td>Send mobile provisioning result</td><td>5GPRE</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYP684D</td><td>Definitivo-OK-620154130962</td></tr><tr><td>Send mobile provisioning result</td><td>RAS</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPPU</td><td>Definitivo-OK-620154130962</td></tr><tr><td>Send mobile provisioning result</td><td>LTE</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYP683U</td><td>Definitivo-OK-620154130962</td></tr><tr><td>Send mobile provisioning result</td><td>SCHMINT</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPPP</td><td>Definitivo-OK-620154130962</td></tr><tr><td>Send mobile provisioning result</td><td>SROMINT</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPPO</td><td>Definitivo-OK-620154130962</td></tr><tr><td>Send mobile provisioning result</td><td>INTWAPBIZ</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPQV</td><td>Definitivo-OK-620154130962</td></tr><tr><td>Send mobile provisioning result</td><td>SSMSORG</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPPT</td><td>Definitivo-OK-620154130962</td></tr><tr><td>Send mobile provisioning result</td><td>SSGRTEL</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPPQ</td><td>Definitivo-OK-620154130962</td></tr><tr><td>Send mobile provisioning result</td><td>MMS</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPQW</td><td>Definitivo-OK-620154130962</td></tr><tr><td>Send mobile provisioning result</td><td>OPZ</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPR2</td><td>Definitivo-OK-620154130962</td></tr><tr><td>Send mobile provisioning result</td><td>SES</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPR1</td><td>Definitivo-OK-620154130962</td></tr><tr><td>Send mobile provisioning result</td><td>SRVPREPMOB</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPPH</td><td>Definitivo-OK-620154130962</td></tr><tr><td>Send mobile provisioning result</td><td>MATS</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPP9</td><td>Definitivo-OK-620154130962</td></tr><tr><td>Send mobile provisioning result</td><td>ACCPREPMOB</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPOS</td><td>Definitivo-OK-620154130962</td></tr><tr><td>Send mobile provisioning result</td><td>WLESSPREPAG</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPOQ</td><td>Definitivo-OK-620154130962</td></tr><tr><td>Send GSI SITE result to CRM</td><td>OPZ</td><td>SAP_SEDE</td><td>Esito consegna sede SAP</td><td>Definitivo</td><td>OK</td><td>1-7WYODPOP</td><td>Definitivo-OK-620154080710</td></tr><tr><td>Send GSI SITE result to CRM</td><td>TERMOB</td><td>SAP_SEDE</td><td>Esito consegna sede SAP</td><td>Definitivo</td><td>OK</td><td>1-7WYODPO0</td><td>Definitivo-OK-620154080710</td></tr><tr><td>Send GSI SITE result to CRM</td><td>CPEM</td><td>SAP_SEDE</td><td>Esito consegna sede SAP</td><td>Definitivo</td><td>OK</td><td>1-7WYODPN9</td><td>Definitivo-OK-620154080710</td></tr><tr><td>Send GSI SITE result to CRM</td><td>OPZ</td><td>SAP_SEDE</td><td>Esito consegna sede SAP</td><td>Definitivo</td><td>OK</td><td>1-7WYODPN8</td><td>Definitivo-OK-620154080710</td></tr><tr><td>Send GSI SITE result to CRM</td><td>TERMOB</td><td>SAP_SEDE</td><td>Esito consegna sede SAP</td><td>Definitivo</td><td>OK</td><td>1-7WYODPMJ</td><td>Definitivo-OK-620154080710</td></tr><tr><td>Send GSI SITE result to CRM</td><td>CPEM</td><td>SAP_SEDE</td><td>Esito consegna sede SAP</td><td>Definitivo</td><td>OK</td><td>1-7WYODPLS</td><td>Definitivo-OK-620154080710</td></tr><tr><td>Send GSI SITE result to CRM</td><td>MATS</td><td>SAP_SEDE</td><td>Esito consegna sede GSI</td><td>Provvisionato</td><td>Consegnato seriale SIM</td><td>1-7WYODPRM</td><td>Provvisionato-Consegnato seriale SIM-620154080710</td></tr><tr><td>Send GSI SITE result to CRM</td><td>ACCPREPMOB</td><td>SAP_SEDE</td><td>Esito consegna SAP</td><td>Provvisionato</td><td>ICCID</td><td>1-7WYODPR5</td><td>Provvisionato-ICCID-620154080710</td></tr><tr><td>Send GSI SITE result to CRM</td><td>WLESSPREPAG</td><td>SAP_SEDE</td><td>Esito consegna SAP</td><td>Parziale</td><td>OK</td><td>1-7WYODPR3</td><td>Parziale-OK-620154080710</td></tr><tr><td>Send GSI SITE result to CRM</td><td>MATS</td><td>SAP_SEDE</td><td>Esito consegna sede GSI</td><td>Provvisionato</td><td>Consegnato seriale SIM</td><td>1-7WYODPP9</td><td>Provvisionato-Consegnato seriale SIM-620154080710</td></tr><tr><td>Send GSI SITE result to CRM</td><td>ACCPREPMOB</td><td>SAP_SEDE</td><td>Esito consegna SAP</td><td>Provvisionato</td><td>ICCID</td><td>1-7WYODPOS</td><td>Provvisionato-ICCID-620154080710</td></tr><tr><td>Send GSI SITE result to CRM</td><td>WLESSPREPAG</td><td>SAP_SEDE</td><td>Esito consegna SAP</td><td>Parziale</td><td>OK</td><td>1-7WYODPOQ</td><td>Parziale-OK-620154080710</td></tr><tr><td>Send mobile provisioning result</td><td>OPZ</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPR0</td><td>Definitivo-OK-620154080827</td></tr><tr><td>Send mobile provisioning result</td><td>OPZ</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPQZ</td><td>Definitivo-OK-620154080827</td></tr><tr><td>Send mobile provisioning result</td><td>OPZ</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPQY</td><td>Definitivo-OK-620154080827</td></tr><tr><td>Send mobile provisioning result</td><td>PNTF</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPQX</td><td>Definitivo-OK-620154080827</td></tr><tr><td>Send mobile provisioning result</td><td>5GPRE</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYP684D</td><td>Definitivo-OK-620154080827</td></tr><tr><td>Send mobile provisioning result</td><td>RAS</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPPU</td><td>Definitivo-OK-620154080827</td></tr><tr><td>Send mobile provisioning result</td><td>LTE</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYP683U</td><td>Definitivo-OK-620154080827</td></tr><tr><td>Send mobile provisioning result</td><td>SCHMINT</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPPP</td><td>Definitivo-OK-620154080827</td></tr><tr><td>Send mobile provisioning result</td><td>SROMINT</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPPO</td><td>Definitivo-OK-620154080827</td></tr><tr><td>Send mobile provisioning result</td><td>INTWAPBIZ</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPQV</td><td>Definitivo-OK-620154080827</td></tr><tr><td>Send mobile provisioning result</td><td>SSMSORG</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPPT</td><td>Definitivo-OK-620154080827</td></tr><tr><td>Send mobile provisioning result</td><td>SSGRTEL</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPPQ</td><td>Definitivo-OK-620154080827</td></tr><tr><td>Send mobile provisioning result</td><td>MMS</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPQW</td><td>Definitivo-OK-620154080827</td></tr><tr><td>Send mobile provisioning result</td><td>OPZ</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPR2</td><td>Definitivo-OK-620154080827</td></tr><tr><td>Send mobile provisioning result</td><td>SES</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPR1</td><td>Definitivo-OK-620154080827</td></tr><tr><td>Send mobile provisioning result</td><td>SRVPREPMOB</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPPH</td><td>Definitivo-OK-620154080827</td></tr><tr><td>Send mobile provisioning result</td><td>MATS</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPP9</td><td>Definitivo-OK-620154080827</td></tr><tr><td>Send mobile provisioning result</td><td>ACCPREPMOB</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPOS</td><td>Definitivo-OK-620154080827</td></tr><tr><td>Send mobile provisioning result</td><td>WLESSPREPAG</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPOQ</td><td>Definitivo-OK-620154080827</td></tr><tr><td>Send MNP Result OK to CRM</td><td>MNPIN</td><td>MOG_CN_ACCEPT</td><td>Esito richiesta MNP</td><td>Provvisionato</td><td>OK</td><td>1-7WYODPSB</td><td>Provvisionato-OK-620154102557</td></tr><tr><td>Send MNP Result OK to CRM</td><td>SRVPREPMOB</td><td>MOG_CN_ACCEPT</td><td>Esito richiesta MNP</td><td>Provvisionato</td><td>OK</td><td>1-7WYODPRU</td><td>Provvisionato-OK-620154102557</td></tr><tr><td>Send MNP Result OK to CRM</td><td>WLESSPREPAG</td><td>MOG_CN_ACCEPT</td><td>Esito richiesta MNP</td><td>Parziale</td><td>OK</td><td>1-7WYODPR3</td><td>Parziale-OK-620154102557</td></tr><tr><td>Send Espl MNP to CRM</td><td>MNPIN</td><td>MOG_CN_CMP</td><td>Esito Richiesta attivazione Espl MNP a MOG</td><td>Provvisionato</td><td>OK</td><td>1-7WYODPSB</td><td>Provvisionato-OK-620154129252</td></tr><tr><td>Send Espl MNP to CRM</td><td>SRVPREPMOB</td><td>MOG_CN_CMP</td><td>Esito Richiesta attivazione Espl MNP a MOG</td><td>Provvisionato</td><td>OK</td><td>1-7WYODPRU</td><td>Provvisionato-OK-620154129252</td></tr><tr><td>Send Espl MNP to CRM</td><td>ACCPREPMOB</td><td>MOG_CN_CMP</td><td>Esito Richiesta attivazione Espl MNP a MOG</td><td>Provvisionato</td><td>OK</td><td>1-7WYODPR5</td><td>Provvisionato-OK-620154129252</td></tr><tr><td>Send Espl MNP to CRM</td><td>WLESSPREPAG</td><td>MOG_CN_CMP</td><td>Esito Richiesta attivazione Espl MNP a MOG</td><td>Provvisionato</td><td>OK</td><td>1-7WYODPR3</td><td>Provvisionato-OK-620154129252</td></tr><tr><td>Send Espl MNP to CRM</td><td>MNPIN</td><td>MOG_CN_CMP</td><td>Esito Richiesta attivazione Espl MNP a MOG</td><td>Provvisionato</td><td>OK</td><td>1-7WYODPPY</td><td>Provvisionato-OK-620154130994</td></tr><tr><td>Send Espl MNP to CRM</td><td>SRVPREPMOB</td><td>MOG_CN_CMP</td><td>Esito Richiesta attivazione Espl MNP a MOG</td><td>Provvisionato</td><td>OK</td><td>1-7WYODPPH</td><td>Provvisionato-OK-620154130994</td></tr><tr><td>Send Espl MNP to CRM</td><td>ACCPREPMOB</td><td>MOG_CN_CMP</td><td>Esito Richiesta attivazione Espl MNP a MOG</td><td>Provvisionato</td><td>OK</td><td>1-7WYODPOS</td><td>Provvisionato-OK-620154130994</td></tr><tr><td>Send Espl MNP to CRM</td><td>WLESSPREPAG</td><td>MOG_CN_CMP</td><td>Esito Richiesta attivazione Espl MNP a MOG</td><td>Provvisionato</td><td>OK</td><td>1-7WYODPOQ</td><td>Provvisionato-OK-620154130994</td></tr><tr><td>Send start MNP to CRM</td><td>MNPIN</td><td>START_MOG</td><td>Invio richiesta MNP a MOG</td><td>Parziale</td><td>OK</td><td>1-7WYODPPY</td><td>Parziale-OK-620154081112</td></tr><tr><td>Send start MNP to CRM</td><td>SRVPREPMOB</td><td>START_MOG</td><td>Invio richiesta MNP a MOG</td><td>Parziale</td><td>OK</td><td>1-7WYODPPH</td><td>Parziale-OK-620154081112</td></tr><tr><td>Send start MNP to CRM</td><td>ACCPREPMOB</td><td>START_MOG</td><td>Invio richiesta MNP a MOG</td><td>Parziale</td><td>OK</td><td>1-7WYODPOS</td><td>Parziale-OK-620154081112</td></tr><tr><td>Send start MNP to CRM</td><td>WLESSPREPAG</td><td>START_MOG</td><td>Invio richiesta MNP a MOG</td><td>Parziale</td><td>OK</td><td>1-7WYODPOQ</td><td>Parziale-OK-620154081112</td></tr><tr><td>Send mobile provisioning result</td><td>OPZ</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPTD</td><td>Definitivo-OK-620154129229</td></tr><tr><td>Send mobile provisioning result</td><td>OPZ</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPTC</td><td>Definitivo-OK-620154129229</td></tr><tr><td>Send mobile provisioning result</td><td>OPZ</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPTB</td><td>Definitivo-OK-620154129229</td></tr><tr><td>Send mobile provisioning result</td><td>PNTF</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPTA</td><td>Definitivo-OK-620154129229</td></tr><tr><td>Send mobile provisioning result</td><td>MNPIN</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPSB</td><td>Definitivo-OK-620154129229</td></tr><tr><td>Send mobile provisioning result</td><td>5GPRE</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYP684M</td><td>Definitivo-OK-620154129229</td></tr><tr><td>Send mobile provisioning result</td><td>RAS</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPS7</td><td>Definitivo-OK-620154129229</td></tr><tr><td>Send mobile provisioning result</td><td>LTE</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYP6843</td><td>Definitivo-OK-620154129229</td></tr><tr><td>Send mobile provisioning result</td><td>SCHMINT</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPS2</td><td>Definitivo-OK-620154129229</td></tr><tr><td>Send mobile provisioning result</td><td>SROMINT</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPS1</td><td>Definitivo-OK-620154129229</td></tr><tr><td>Send mobile provisioning result</td><td>INTWAPBIZ</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPT8</td><td>Definitivo-OK-620154129229</td></tr><tr><td>Send mobile provisioning result</td><td>SSMSORG</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPS6</td><td>Definitivo-OK-620154129229</td></tr><tr><td>Send mobile provisioning result</td><td>SSGRTEL</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPS3</td><td>Definitivo-OK-620154129229</td></tr><tr><td>Send mobile provisioning result</td><td>MMS</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPT9</td><td>Definitivo-OK-620154129229</td></tr><tr><td>Send mobile provisioning result</td><td>OPZ</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPTF</td><td>Definitivo-OK-620154129229</td></tr><tr><td>Send mobile provisioning result</td><td>SES</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPTE</td><td>Definitivo-OK-620154129229</td></tr><tr><td>Send mobile provisioning result</td><td>SRVPREPMOB</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPRU</td><td>Definitivo-OK-620154129229</td></tr><tr><td>Send mobile provisioning result</td><td>MATS</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPRM</td><td>Definitivo-OK-620154129229</td></tr><tr><td>Send mobile provisioning result</td><td>ACCPREPMOB</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPR5</td><td>Definitivo-OK-620154129229</td></tr><tr><td>Send mobile provisioning result</td><td>WLESSPREPAG</td><td>SDM_CHG</td><td>Esito change SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPR3</td><td>Definitivo-OK-620154129229</td></tr><tr><td>Send GSI ACQ result to CRM</td><td>MNPIN</td><td>SAP_ACQ_OK</td><td>Esito acquisizione SAP</td><td>Parziale</td><td>OK</td><td>1-7WYODPPY</td><td>Parziale-OK-620154034814</td></tr><tr><td>Send GSI ACQ result to CRM</td><td>5GPRE</td><td>SAP_ACQ_OK</td><td>Esito acquisizione SAP</td><td>Parziale</td><td>OK</td><td>1-7WYP684D</td><td>Parziale-OK-620154034814</td></tr><tr><td>Send GSI ACQ result to CRM</td><td>RAS</td><td>SAP_ACQ_OK</td><td>Esito acquisizione SAP</td><td>Parziale</td><td>OK</td><td>1-7WYODPPU</td><td>Parziale-OK-620154034814</td></tr><tr><td>Send GSI ACQ result to CRM</td><td>LTE</td><td>SAP_ACQ_OK</td><td>Esito acquisizione SAP</td><td>Parziale</td><td>OK</td><td>1-7WYP683U</td><td>Parziale-OK-620154034814</td></tr><tr><td>Send GSI ACQ result to CRM</td><td>SCHMINT</td><td>SAP_ACQ_OK</td><td>Esito acquisizione SAP</td><td>Parziale</td><td>OK</td><td>1-7WYODPPP</td><td>Parziale-OK-620154034814</td></tr><tr><td>Send GSI ACQ result to CRM</td><td>SROMINT</td><td>SAP_ACQ_OK</td><td>Esito acquisizione SAP</td><td>Parziale</td><td>OK</td><td>1-7WYODPPO</td><td>Parziale-OK-620154034814</td></tr><tr><td>Send GSI ACQ result to CRM</td><td>INTWAPBIZ</td><td>SAP_ACQ_OK</td><td>Esito acquisizione SAP</td><td>Parziale</td><td>OK</td><td>1-7WYODPQV</td><td>Parziale-OK-620154034814</td></tr><tr><td>Send GSI ACQ result to CRM</td><td>SSMSORG</td><td>SAP_ACQ_OK</td><td>Esito acquisizione SAP</td><td>Parziale</td><td>OK</td><td>1-7WYODPPT</td><td>Parziale-OK-620154034814</td></tr><tr><td>Send GSI ACQ result to CRM</td><td>SSGRTEL</td><td>SAP_ACQ_OK</td><td>Esito acquisizione SAP</td><td>Parziale</td><td>OK</td><td>1-7WYODPPQ</td><td>Parziale-OK-620154034814</td></tr><tr><td>Send GSI ACQ result to CRM</td><td>MMS</td><td>SAP_ACQ_OK</td><td>Esito acquisizione SAP</td><td>Parziale</td><td>OK</td><td>1-7WYODPQW</td><td>Parziale-OK-620154034814</td></tr><tr><td>Send GSI ACQ result to CRM</td><td>SES</td><td>SAP_ACQ_OK</td><td>Esito acquisizione SAP</td><td>Parziale</td><td>OK</td><td>1-7WYODPR1</td><td>Parziale-OK-620154034814</td></tr><tr><td>Send GSI ACQ result to CRM</td><td>SRVPREPMOB</td><td>SAP_ACQ_OK</td><td>Esito acquisizione SAP</td><td>Parziale</td><td>OK</td><td>1-7WYODPPH</td><td>Parziale-OK-620154034814</td></tr><tr><td>Send GSI ACQ result to CRM</td><td>WLESSPREPAG</td><td>SAP_ACQ_OK</td><td>Esito acquisizione SAP</td><td>Parziale</td><td>OK</td><td>1-7WYODPOQ</td><td>Parziale-OK-620154034814</td></tr><tr><td>Send MNP Result OK to CRM</td><td>MNPIN</td><td>MOG_CN_ACCEPT</td><td>Esito richiesta MNP</td><td>Provvisionato</td><td>OK</td><td>1-7WYODPPY</td><td>Provvisionato-OK-620154102938</td></tr><tr><td>Send MNP Result OK to CRM</td><td>SRVPREPMOB</td><td>MOG_CN_ACCEPT</td><td>Esito richiesta MNP</td><td>Provvisionato</td><td>OK</td><td>1-7WYODPPH</td><td>Provvisionato-OK-620154102938</td></tr><tr><td>Send MNP Result OK to CRM</td><td>WLESSPREPAG</td><td>MOG_CN_ACCEPT</td><td>Esito richiesta MNP</td><td>Parziale</td><td>OK</td><td>1-7WYODPOQ</td><td>Parziale-OK-620154102938</td></tr><tr><td>Send mobile provisioning result</td><td>OPZ</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPTD</td><td>Definitivo-OK-620154081090</td></tr><tr><td>Send mobile provisioning result</td><td>OPZ</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPTC</td><td>Definitivo-OK-620154081090</td></tr><tr><td>Send mobile provisioning result</td><td>OPZ</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPTB</td><td>Definitivo-OK-620154081090</td></tr><tr><td>Send mobile provisioning result</td><td>PNTF</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPTA</td><td>Definitivo-OK-620154081090</td></tr><tr><td>Send mobile provisioning result</td><td>5GPRE</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYP684M</td><td>Definitivo-OK-620154081090</td></tr><tr><td>Send mobile provisioning result</td><td>RAS</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPS7</td><td>Definitivo-OK-620154081090</td></tr><tr><td>Send mobile provisioning result</td><td>LTE</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYP6843</td><td>Definitivo-OK-620154081090</td></tr><tr><td>Send mobile provisioning result</td><td>SCHMINT</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPS2</td><td>Definitivo-OK-620154081090</td></tr><tr><td>Send mobile provisioning result</td><td>SROMINT</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPS1</td><td>Definitivo-OK-620154081090</td></tr><tr><td>Send mobile provisioning result</td><td>INTWAPBIZ</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPT8</td><td>Definitivo-OK-620154081090</td></tr><tr><td>Send mobile provisioning result</td><td>SSMSORG</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPS6</td><td>Definitivo-OK-620154081090</td></tr><tr><td>Send mobile provisioning result</td><td>SSGRTEL</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPS3</td><td>Definitivo-OK-620154081090</td></tr><tr><td>Send mobile provisioning result</td><td>MMS</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPT9</td><td>Definitivo-OK-620154081090</td></tr><tr><td>Send mobile provisioning result</td><td>OPZ</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPTF</td><td>Definitivo-OK-620154081090</td></tr><tr><td>Send mobile provisioning result</td><td>SES</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPTE</td><td>Definitivo-OK-620154081090</td></tr><tr><td>Send mobile provisioning result</td><td>SRVPREPMOB</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPRU</td><td>Definitivo-OK-620154081090</td></tr><tr><td>Send mobile provisioning result</td><td>MATS</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPRM</td><td>Definitivo-OK-620154081090</td></tr><tr><td>Send mobile provisioning result</td><td>ACCPREPMOB</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPR5</td><td>Definitivo-OK-620154081090</td></tr><tr><td>Send mobile provisioning result</td><td>WLESSPREPAG</td><td>SDM_ACT</td><td>Esito attivazione SDM</td><td>Definitivo</td><td>OK</td><td>1-7WYODPR3</td><td>Definitivo-OK-620154081090</td></tr><tr><td>Send start MNP to CRM</td><td>MNPIN</td><td>START_MOG</td><td>Invio richiesta MNP a MOG</td><td>Parziale</td><td>OK</td><td>1-7WYODPSB</td><td>Parziale-OK-620154081441</td></tr><tr><td>Send start MNP to CRM</td><td>SRVPREPMOB</td><td>START_MOG</td><td>Invio richiesta MNP a MOG</td><td>Parziale</td><td>OK</td><td>1-7WYODPRU</td><td>Parziale-OK-620154081441</td></tr><tr><td>Send start MNP to CRM</td><td>ACCPREPMOB</td><td>START_MOG</td><td>Invio richiesta MNP a MOG</td><td>Parziale</td><td>OK</td><td>1-7WYODPR5</td><td>Parziale-OK-620154081441</td></tr><tr><td>Send start MNP to CRM</td><td>WLESSPREPAG</td><td>START_MOG</td><td>Invio richiesta MNP a MOG</td><td>Parziale</td><td>OK</td><td>1-7WYODPR3</td><td>Parziale-OK-620154081441</td></tr></tbody></table></div></div><div class="section" id="ID1717413417324"><div class="section-column1"><div class="section-title">PAR 9.2 - Estrazione dettagli sede consegna su EMF CRM (DIN1717413417324)<hr></div><pre><code class="language-sql">select d.name,d.id,myTab.*
from request_doc b ,
request d,
xmltable(
	XMLNAMESPACES(	
					'http://bssevo_com/commons/B2B-CMF-CommercialOrder' AS "tns28",
					'http://bssevo_com/commons/B2B-CMF-JobSharedVariable' AS "tns",
					'http://bssevo_com/commons/B2B-CMF-CommercialOrder' AS "tns17",
					'http://bssevo_com/commons/B2B-CMF-CommercialOrder'AS "tns2"
					),
					'/tns:root/tns:commercialOrder/tns2:order/tns28:sedeConsegna'
	passing (b.document_xml::xml)
	columns 
		tipologiaSede  text path 'tns17:tipologiaSede',
		idSedeConsegna  text path 'tns17:idSedeConsegna',
		rowIdSedeConsegna  text path 'tns17:rowIdSedeConsegna',
		condizionePagamento text path 'tns17:condizionePagamento'
	) myTab
where 1=1 
and d.id =598149 
--and d.id in (select distinct root_id from detail where value='1-619807037680')
and d.document_id=b.id
--and d.ts_created &gt;current_date -10
and exists (select 1 from request z where name='Logistics' and z.root_id=d.id)
--limit 40
order by 2</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>name</th><th>id</th><th>tipologiasede</th><th>idsedeconsegna</th><th>rowidsedeconsegna</th><th>condizionepagamento</th></tr></thead><tbody><tr><td>Activation Order</td><td>598.149</td><td>Noleggio</td><td>562636824</td><td>1-7WYP683D</td><td></td></tr><tr><td>Activation Order</td><td>598.149</td><td>Vendita Rateizzata</td><td>562636824</td><td>1-7WYP683G</td><td>ZRAT</td></tr></tbody></table></div></div><div class="section" id="ID1717418490154"><div class="section-column1"><div class="section-title">PAR 9.3 - Estrazione timing task di long aging da id_ordine o root_id (DIN1717418490154)<hr></div><pre><code class="language-sql">SELECT 
(select distinct value from detail where root_id = a.root_id and name='id_odl_crm') id_ordine,
a.root_id,a.name,a.id,a.status,a.ts_created,a.ts_end,
case when a.name='Logistics' then 
 'C'||(select value from item2detail zz,detail z where zz.request_id=a.id and z.id=zz.detail_id and z.name='transaction_id' and zz.action_id is null limit 1)
 end as aging_last_outcome_log,
case when a.name='Logistics' then 
 (select max(z.ts_end) from action z where z.request_id=a.id and z.direction='inbound' and z.system='gsi')-
 (select min(z.ts_end) from action z where z.request_id=a.id and z.direction='outbound' and z.system='gsi'and z.name='Send Logistic Order to GSI')
 end as aging_last_outcome_log
 ,
 case when a.name='Logistics' then 
 (select current_date)-
 (select min(z.ts_end) from action z where z.request_id=a.id and z.direction='outbound' and z.system='gsi'and z.name='Send Logistic Order to GSI')
 end as aging_absolute_logi
 ,
 case when a.name='Logistics' then 
 (select count(*) from action z where z.request_id=a.id and status&lt;&gt;'SA')
 end as failure_logistic
,
 case when a.name='Network' then 
 (select count(*) from action z where z.request_id=a.id and status&lt;&gt;'SA')
 end as failure_network
 ,
 case when a.name='Network' then 
 (select max(z.ts_end) from action z where z.request_id=a.id and z.direction='inbound' and z.system='som')-
 (select min(z.ts_end) from action z where z.request_id=a.id and z.direction='outbound' and z.system='som'and z.name='Send Service Order')
 end as aging_network
 ,
 case when a.name='MnpRecipient' then 
 (select count(*) from action z where z.request_id=a.id and status&lt;&gt;'SA')
 end as failure_mog
 ,
 case when a.name='MnpRecipient' then 
 (select max(z.ts_end) from action z where z.request_id=a.id and z.direction='inbound' and z.system='mog')-
 (select min(z.ts_end) from action z where z.request_id=a.id and z.direction='outbound' and z.system='mog'and z.name='Send Request Mnp')
 end as aging_mog
 ,
( select count(*) from action z where z.request_id=a.root_id and status&lt;&gt;'SA') failure_root
 ,
( select count(*) from action z where z.request_id=a.root_id and z.name='Notify Order') count_order_end
FROM REquest a WHERE a.root_id in (
620918,
624971,
627900,
627970,
634222,
634285
)
order by 1,3,5</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>id_ordine</th><th>root_id</th><th>name</th><th>id</th><th>status</th><th>ts_created</th><th>ts_end</th><th>aging_last_outcome_log</th><th>aging_last_outcome_log</th><th>aging_absolute_logi</th><th>failure_logistic</th><th>failure_network</th><th>aging_network</th><th>failure_mog</th><th>aging_mog</th><th>failure_root</th><th>count_order_end</th></tr></thead><tbody><tr><td>1-622512594047</td><td>620.918</td><td>Activation Order</td><td>620.918</td><td>SA</td><td>2024-04-16 10:14:39.732 +0200</td><td>2024-05-06 04:03:36.806 +0200</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-622512594047</td><td>620.918</td><td>MnpRecipient</td><td>620.976</td><td>SA</td><td>2024-04-16 11:01:01.333 +0200</td><td>2024-04-18 06:08:03.529 +0200</td><td></td><td></td><td></td><td></td><td></td><td></td><td>0</td><td>16:51:45</td><td>0</td><td>1</td></tr><tr><td>1-622512594047</td><td>620.918</td><td>MnpRecipient</td><td>620.970</td><td>SA</td><td>2024-04-16 11:01:01.295 +0200</td><td>2024-04-18 06:06:57.409 +0200</td><td></td><td></td><td></td><td></td><td></td><td></td><td>0</td><td>16:47:11</td><td>0</td><td>1</td></tr><tr><td>1-622512594047</td><td>620.918</td><td>MnpRecipient</td><td>620.975</td><td>SA</td><td>2024-04-16 11:01:01.413 +0200</td><td>2024-05-06 04:03:22.348 +0200</td><td></td><td></td><td></td><td></td><td></td><td></td><td>0</td><td>11:02:19</td><td>0</td><td>1</td></tr><tr><td>1-622512594047</td><td>620.918</td><td>MnpRecipient</td><td>620.974</td><td>SA</td><td>2024-04-16 11:01:01.341 +0200</td><td>2024-04-18 04:03:57.544 +0200</td><td></td><td></td><td></td><td></td><td></td><td></td><td>0</td><td>16:58:26</td><td>0</td><td>1</td></tr><tr><td>1-622512594047</td><td>620.918</td><td>Network</td><td>622.299</td><td>SA</td><td>2024-04-17 04:10:52.609 +0200</td><td>2024-04-18 06:07:53.005 +0200</td><td></td><td></td><td></td><td></td><td>0</td><td>1 day 01:56:26</td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-622512594047</td><td>620.918</td><td>Network</td><td>620.971</td><td>SA</td><td>2024-04-16 11:01:01.333 +0200</td><td>2024-04-18 06:08:07.333 +0200</td><td></td><td></td><td></td><td></td><td>0</td><td>00:01:36</td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-622512594047</td><td>620.918</td><td>Network</td><td>622.336</td><td>SA</td><td>2024-04-17 04:14:12.719 +0200</td><td>2024-04-18 04:03:50.524 +0200</td><td></td><td></td><td></td><td></td><td>0</td><td>23:49:17</td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-622512594047</td><td>620.918</td><td>Network</td><td>653.052</td><td>SA</td><td>2024-05-03 04:11:37.144 +0200</td><td>2024-05-06 04:03:10.041 +0200</td><td></td><td></td><td></td><td></td><td>0</td><td>2 days 23:50:56</td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-622512594047</td><td>620.918</td><td>Network</td><td>622.323</td><td>SA</td><td>2024-04-17 04:11:22.678 +0200</td><td>2024-04-18 06:06:49.513 +0200</td><td></td><td></td><td></td><td></td><td>0</td><td>1 day 01:55:07</td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-622512594047</td><td>620.918</td><td>Network</td><td>620.972</td><td>SA</td><td>2024-04-16 11:01:01.341 +0200</td><td>2024-04-18 04:03:59.340 +0200</td><td></td><td></td><td></td><td></td><td>0</td><td>00:01:24</td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-622512594047</td><td>620.918</td><td>Network</td><td>620.969</td><td>SA</td><td>2024-04-16 11:01:01.295 +0200</td><td>2024-04-18 06:07:01.807 +0200</td><td></td><td></td><td></td><td></td><td>0</td><td>00:01:29</td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-622512594047</td><td>620.918</td><td>Network</td><td>620.973</td><td>SA</td><td>2024-04-16 11:01:01.413 +0200</td><td>2024-05-06 04:03:28.833 +0200</td><td></td><td></td><td></td><td></td><td>0</td><td>00:01:32</td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-622723701408</td><td>624.971</td><td>Activation Order</td><td>624.971</td><td>SA</td><td>2024-04-18 12:22:03.844 +0200</td><td>2024-05-02 12:21:00.166 +0200</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-622723701408</td><td>624.971</td><td>MnpRecipient</td><td>625.117</td><td>SA</td><td>2024-04-18 13:39:46.928 +0200</td><td>2024-04-22 04:06:42.457 +0200</td><td></td><td></td><td></td><td></td><td></td><td></td><td>0</td><td>14:23:19</td><td>0</td><td>1</td></tr><tr><td>1-622723701408</td><td>624.971</td><td>MnpRecipient</td><td>625.118</td><td>SA</td><td>2024-04-18 13:39:46.979 +0200</td><td>2024-04-22 04:07:43.545 +0200</td><td></td><td></td><td></td><td></td><td></td><td></td><td>0</td><td>14:24:35</td><td>0</td><td>1</td></tr><tr><td>1-622723701408</td><td>624.971</td><td>MnpRecipient</td><td>625.120</td><td>SA</td><td>2024-04-18 13:39:47.022 +0200</td><td>2024-05-02 06:19:31.471 +0200</td><td></td><td></td><td></td><td></td><td></td><td></td><td>0</td><td>11:47:34</td><td>0</td><td>1</td></tr><tr><td>1-622723701408</td><td>624.971</td><td>Network</td><td>625.116</td><td>SA</td><td>2024-04-18 13:39:46.979 +0200</td><td>2024-04-22 04:07:46.292 +0200</td><td></td><td></td><td></td><td></td><td>0</td><td>00:02:26</td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-622723701408</td><td>624.971</td><td>Network</td><td>647.061</td><td>SA</td><td>2024-04-30 04:26:23.478 +0200</td><td>2024-05-02 06:19:20.946 +0200</td><td></td><td></td><td></td><td></td><td>0</td><td>2 days 01:52:29</td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-622723701408</td><td>624.971</td><td>Network</td><td>627.032</td><td>SA</td><td>2024-04-19 04:13:57.603 +0200</td><td>2024-04-22 04:07:33.959 +0200</td><td></td><td></td><td></td><td></td><td>0</td><td>2 days 23:53:01</td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-622723701408</td><td>624.971</td><td>Network</td><td>625.115</td><td>SA</td><td>2024-04-18 13:39:46.928 +0200</td><td>2024-04-22 04:06:44.788 +0200</td><td></td><td></td><td></td><td></td><td>0</td><td>00:01:43</td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-622723701408</td><td>624.971</td><td>Network</td><td>625.119</td><td>SA</td><td>2024-04-18 13:39:47.022 +0200</td><td>2024-05-02 06:19:35.797 +0200</td><td></td><td></td><td></td><td></td><td>0</td><td>00:01:31</td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-622723701408</td><td>624.971</td><td>Network</td><td>627.044</td><td>SA</td><td>2024-04-19 04:14:25.604 +0200</td><td>2024-04-22 04:06:35.967 +0200</td><td></td><td></td><td></td><td></td><td>0</td><td>2 days 23:51:49</td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-622828109187</td><td>627.900</td><td>Activation Order</td><td>627.900</td><td>SA</td><td>2024-04-19 11:37:29.372 +0200</td><td>2024-04-29 16:32:40.433 +0200</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-622828109187</td><td>627.900</td><td>Network</td><td>627.996</td><td>SA</td><td>2024-04-19 12:37:27.767 +0200</td><td>2024-04-29 16:32:35.338 +0200</td><td></td><td></td><td></td><td></td><td>0</td><td>00:01:22</td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-622829857989</td><td>627.970</td><td>Extend Order</td><td>627.970</td><td>SA</td><td>2024-04-19 12:20:16.792 +0200</td><td>2024-04-29 16:39:20.238 +0200</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-622829857989</td><td>627.970</td><td>Network</td><td>628.285</td><td>SA</td><td>2024-04-19 15:57:16.200 +0200</td><td>2024-04-29 16:39:08.363 +0200</td><td></td><td></td><td></td><td></td><td>0</td><td>00:01:42</td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-622851936592</td><td>634.285</td><td>Extend Order</td><td>634.285</td><td>SA</td><td>2024-04-23 11:32:16.421 +0200</td><td>2024-05-03 11:07:31.800 +0200</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-622851936592</td><td>634.285</td><td>Network</td><td>634.755</td><td>SA</td><td>2024-04-23 15:14:43.736 +0200</td><td>2024-05-03 11:07:17.852 +0200</td><td></td><td></td><td></td><td></td><td>0</td><td>00:01:31</td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-623076960538</td><td>634.222</td><td>Activation Order</td><td>634.222</td><td>SA</td><td>2024-04-23 10:37:33.150 +0200</td><td>2024-05-03 11:22:16.042 +0200</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-623076960538</td><td>634.222</td><td>Network</td><td>634.401</td><td>SA</td><td>2024-04-23 12:04:33.390 +0200</td><td>2024-05-03 11:09:22.228 +0200</td><td></td><td></td><td></td><td></td><td>0</td><td>00:03:58</td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-623076960538</td><td>634.222</td><td>Network</td><td>634.402</td><td>SA</td><td>2024-04-23 12:04:33.421 +0200</td><td>2024-05-03 11:22:07.491 +0200</td><td></td><td></td><td></td><td></td><td>0</td><td>00:16:46</td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-623076960538</td><td>634.222</td><td>Network</td><td>634.400</td><td>SA</td><td>2024-04-23 12:04:33.376 +0200</td><td>2024-05-03 11:07:29.328 +0200</td><td></td><td></td><td></td><td></td><td>0</td><td>00:01:45</td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-623076960538</td><td>634.222</td><td>Network</td><td>634.404</td><td>SA</td><td>2024-04-23 12:04:34.488 +0200</td><td>2024-05-03 11:14:35.730 +0200</td><td></td><td></td><td></td><td></td><td>0</td><td>00:08:56</td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-623076960538</td><td>634.222</td><td>Network</td><td>634.399</td><td>SA</td><td>2024-04-23 12:04:33.333 +0200</td><td>2024-05-03 11:19:24.792 +0200</td><td></td><td></td><td></td><td></td><td>0</td><td>00:13:52</td><td></td><td></td><td>0</td><td>1</td></tr><tr><td>1-623076960538</td><td>634.222</td><td>Network</td><td>634.403</td><td>SA</td><td>2024-04-23 12:04:33.431 +0200</td><td>2024-05-03 11:07:36.171 +0200</td><td></td><td></td><td></td><td></td><td>0</td><td>00:01:58</td><td></td><td></td><td>0</td><td>1</td></tr></tbody></table></div></div><div class="section" id="ID1717428066319"><div class="section-column1"><div class="section-title">PAR 9.4 - Parsing ordine CRM json in forma non gerarchica su COM (DIN1717428066319)<hr></div><pre><code class="language-sql">-- query non strutturata 

select * from (
WITH RECURSIVE product_recursive AS (
  SELECT 
  	json_array_elements(message_xml::json-&gt;'payload'-&gt;'productOrderItem') AS product_item,
	  message_xml as msg
  FROM 
--  	(select b.message_xml from action a,action_msg b where a.message_id=b.id and a.id=620155183956) -- 1-617808480689
  (  select b.message_xml from action a,action_msg b where a.message_id=b.id and a.name='Receive Sim/Handset Change' and a.ts_created&gt;current_date-20 
  and b.message_xml like '%"flagSospensione":"1"%')
  	your_table_name
  UNION ALL
  SELECT json_array_elements(product_item-&gt;'productOrderItem'),msg as msg
  FROM product_recursive
  WHERE product_item-&gt;'productOrderItem' IS NOT NULL
)
SELECT 
--product_item-&gt;'product'-&gt;&gt;'id' AS product_id
msg::json-&gt;'payload'-&gt;'externalId',
msg::json-&gt;'payload'-&gt;'flagSospensione',
msg::json-&gt;'payload'-&gt;'causaleOrdine',
msg::json-&gt;'payload'-&gt;'tipo',
msg::json-&gt;'payload'-&gt;'sottotipo',
msg::json-&gt;'request_root_name'/*,
product_item-&gt;&gt;'componentRoot' as componentRoot
,product_item-&gt;&gt;'integrationId' as integrationId
,product_item-&gt;&gt;'componentPadre' as componentPadre
,product_item-&gt;&gt;'codicePs'as codicePs
,product_item-&gt;&gt;'action'as action_
,product_item-&gt;&gt;'sottotipo'as sottotipo
,product_item-&gt;&gt;'tipo'as tipo
,product_item-&gt;&gt;'idPrice'as idPrice
,product_item-&gt;&gt;'mdf'as mdf*/
FROM product_recursive
WHERE product_item-&gt;'product' IS NOT null
) your_table_name</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>?column?</th><th>?column?</th><th>?column?</th><th>?column?</th><th>?column?</th><th>?column?</th></tr></thead><tbody><tr><td>"1-625645759767"</td><td>"1"</td><td>"Smarrimento"</td><td>"Modifica"</td><td>"Cambio SIM/Terminale"</td><td>"Sim/Handset Change"</td></tr><tr><td>"1-625958290686"</td><td>"1"</td><td>"Furto"</td><td>"Modifica"</td><td>"Cambio SIM/Terminale"</td><td>"Sim/Handset Change"</td></tr><tr><td>"1-625446840694"</td><td>"1"</td><td>"Smarrimento"</td><td>"Modifica"</td><td>"Cambio SIM/Terminale"</td><td>"Sim/Handset Change"</td></tr><tr><td>"1-625446840694"</td><td>"1"</td><td>"Smarrimento"</td><td>"Modifica"</td><td>"Cambio SIM/Terminale"</td><td>"Sim/Handset Change"</td></tr><tr><td>"1-625446840694"</td><td>"1"</td><td>"Smarrimento"</td><td>"Modifica"</td><td>"Cambio SIM/Terminale"</td><td>"Sim/Handset Change"</td></tr><tr><td>"1-625446840694"</td><td>"1"</td><td>"Smarrimento"</td><td>"Modifica"</td><td>"Cambio SIM/Terminale"</td><td>"Sim/Handset Change"</td></tr><tr><td>"1-625446840694"</td><td>"1"</td><td>"Smarrimento"</td><td>"Modifica"</td><td>"Cambio SIM/Terminale"</td><td>"Sim/Handset Change"</td></tr><tr><td>"1-625446840694"</td><td>"1"</td><td>"Smarrimento"</td><td>"Modifica"</td><td>"Cambio SIM/Terminale"</td><td>"Sim/Handset Change"</td></tr><tr><td>"1-625148343039"</td><td>"1"</td><td>"Furto"</td><td>"Modifica"</td><td>"Cambio SIM/Terminale"</td><td>"Sim/Handset Change"</td></tr><tr><td>"1-625296533217"</td><td>"1"</td><td>"Smarrimento"</td><td>"Modifica"</td><td>"Cambio SIM/Terminale"</td><td>"Sim/Handset Change"</td></tr></tbody></table></div></div><div class="section" id="ID1717430756354"><div class="section-column1"><div class="section-title">PAR 9.5 - Estrazione oggetti di pricing e override su cmf-root COM  (DIN1717430756354)<hr></div><pre><code class="language-sql">SELECT rr.name,a.name,a.id,ext.* FROM 
(
		select * from (								-- evento change billing element - override cross contratto
		select r.id,r.name,r.root_id, 
		myTab.rcOverridePrice, 
		myTab.idCommercialOrder, 
		myTab.integrationId, 
		myTab.idPrice, 
		myTab.CodiceCatalogo, 
		myTab.azione,
		myTab.descrizione,
		myTab.sottotipoPadre,
		myTab.sottotipo,
		myTab.tipo,
		myTab.causaleOrdine
		from request r, 
		request_doc rd,
		xmltable(
			XMLNAMESPACES(	
							'http://bssevo_com/commons/B2B-CMF-CommercialOrder' as "tns1",
							'http://bssevo_com/commons/B2B-CMF-JobSharedVariable' as "ns21"
							),
							'/ns21:root/ns21:commercialOrder/tns1:order/descendant::tns1:pricingComponent'
						PASSING (rd.document_xml::xml) 
			COLUMNS
				idCommercialOrder varchar(100) path '/ns21:root/ns21:commercialOrder/tns1:order/tns1:idCommercialOrder' 
				,sottotipo varchar(100) path '/ns21:root/ns21:commercialOrder/tns1:order/@sottotipo'
				,tipo varchar(100) path '/ns21:root/ns21:commercialOrder/tns1:order/@tipo'
				,causaleOrdine varchar(100) path '/ns21:root/ns21:commercialOrder/tns1:order/tns1:causaleOrdine'				
				,rcOverridePrice varchar(100) path 'tns1:rcOverridePrice' 
				,integrationId varchar(100) path '@integrationId'
			    ,idPrice varchar(100) path 'tns1:idPrice'
				,CodiceCatalogo varchar(100) path 'tns1:codiceCatalogo'
				,azione varchar(100) path 'tns1:azione'
				,sottotipoPadre varchar(100) path '../@sottoTipo'
				,descrizione varchar(100) path 'tns1:descrizione'
			)as myTab
		where
		r.name = 'Change Order'
		and rd.id = r.document_id
		and rd.document_xml like '%pricingComponent%'
		and r.root_id in  (select distinct root_id from detail where 
		value IN ('1-626039052881'
                  ))
		and r.ts_created&gt;current_date -280
		) zz where zz.rcOverridePrice is not null 
		union all
		select * from (								-- attivazioni
		select r.id,r.name,r.root_id, 
		myTab.rcOverridePrice, 
		myTab.idCommercialOrder, 
		myTab.integrationId, 
		myTab.idPrice, 
		myTab.CodiceCatalogo, 
		myTab.azione,
		myTab.descrizione,
		myTab.sottotipoPadre,
		myTab.sottotipo,
		myTab.tipo,
		myTab.causaleOrdine
		from request r, 
		request_doc rd,
		xmltable(
			XMLNAMESPACES(	
							'http://bssevo_com/commons/B2B-CMF-JobSharedVariable' as "tns",
							'http://bssevo_com/commons/B2B-CMF-CommercialOrder' as "tns1"
							),
							'/tns:root/tns:commercialOrder/tns1:order/descendant::tns1:pricingComponent'
						PASSING (rd.document_xml::xml) 
			COLUMNS
				idCommercialOrder varchar(100) path '/tns:root/tns:commercialOrder/tns1:order/tns1:idCommercialOrder' 
				,sottotipo varchar(100) path '/tns:root/tns:commercialOrder/tns1:order/@sottotipo'
				,tipo varchar(100) path '/tns:root/tns:commercialOrder/tns1:order/@tipo'
				,causaleOrdine varchar(100) path '/tns:root/tns:commercialOrder/tns1:order/tns1:causaleOrdine'				
				,rcOverridePrice varchar(100) path 'tns1:rcOverridePrice' 
				,integrationId varchar(100) path '@integrationId'
			    ,idPrice varchar(100) path 'tns1:idPrice'
				,CodiceCatalogo varchar(100) path 'tns1:codiceCatalogo'
				,azione varchar(100) path 'tns1:azione'
				,sottotipoPadre varchar(100) path '../@sottoTipo'
				,descrizione varchar(100) path 'tns1:descrizione'
			)as myTab
		where
		r.name = 'Activation Order'
		and rd.id = r.document_id
		and rd.document_xml like '%pricingComponent%'
		and r.root_id in (select distinct root_id from detail where 
		value IN (
		'1-626039052881'
		--'1-619650892429', --INC7181401 roberti
        --'1-616847928744' , --INC7181562
        --'1-616847928746'--INC7181562
                  ))
--		and r.ts_created&gt;current_date -80
		) zz --where zz.rcOverridePrice is not null
--		order by 1
		union all
select * from (								-- ampliamento
		select r.id,r.name,r.root_id, 
		myTab.rcOverridePrice, 
		myTab.idCommercialOrder, 
		myTab.integrationId, 
		myTab.idPrice, 
		myTab.CodiceCatalogo, 
		myTab.azione,
		myTab.descrizione,
		myTab.sottotipoPadre,
		myTab.sottotipo,
		myTab.tipo,
		myTab.causaleOrdine
		from request r, 
		request_doc rd,
		xmltable(
			XMLNAMESPACES(	
							'http://bssevo_com/commons/B2B-CMF-JobSharedVariable' as "tns1",
							'http://bssevo_com/commons/B2B-CMF-CommercialOrder' as "pfx11",
							'http://bssevo_com/commons/B2B-CMF-CommercialOrder' as "tns6"
							),
							'/tns1:root/tns1:commercialOrder/pfx11:order/descendant::tns6:pricingComponent'
						PASSING (rd.document_xml::xml) 
			COLUMNS
				idCommercialOrder varchar(100) path '/tns1:root/tns1:commercialOrder/pfx11:order/pfx11:idCommercialOrder' 
				,sottotipo varchar(100) path '/tns1:root/tns1:commercialOrder/pfx11:order/@sottotipo'
				,tipo varchar(100) path '/tns1:root/tns1:commercialOrder/pfx11:order/@tipo'
				,causaleOrdine varchar(100) path '/tns1:root/tns1:commercialOrder/pfx11:order/pfx11:causaleOrdine'				
				,rcOverridePrice varchar(100) path 'tns6:rcOverridePrice' 
				,integrationId varchar(100) path '@integrationId'
			    ,idPrice varchar(100) path 'tns6:idPrice'
				,CodiceCatalogo varchar(100) path 'tns6:codiceCatalogo'
				,azione varchar(100) path 'tns6:azione'
				,sottotipoPadre varchar(100) path '../@sottoTipo'
				,descrizione varchar(100) path 'tns6:descrizione'
			)as myTab
		where
		r.name = 'Extend Order'
		and rd.id = r.document_id
		and rd.document_xml like '%pricingComponent%'
		--and r.root_id='586850' 
		AND r.root_id in (select distinct root_id from detail where 
		value IN ('1-618472067646'
		--'1-619650892429', --INC7181401 roberti
        --'1-616847928744' , --INC7181562
        --'1-616847928746'--INC7181562
                  ))
		and r.ts_created&gt;current_date -80
		) zz --where zz.rcOverridePrice is not null
) ext, request rr,ACTION a WHERE 
ext.id=rr.root_id AND 
a.request_id=rr.id AND 
   a.system='billing' and 
      a.direction='outbound'-- LIMIT 2</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>id</th><th>name</th><th>root_id</th><th>rcoverrideprice</th><th>idcommercialorder</th><th>integrationid</th><th>idprice</th><th>codicecatalogo</th><th>azione</th><th>descrizione</th><th>sottotipopadre</th><th>sottotipo</th><th>tipo</th><th>causaleordine</th></tr></thead><tbody><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041455709</td><td>ID_PRICE_4675</td><td>PHX80101</td><td>Add</td><td>PC Secure Web Mobile Pre</td><td>SES</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041455705</td><td>ID_PRICE_66</td><td>PHX70087</td><td>Add</td><td>SUPER Unlimited</td><td>SRVPREPMOB</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041455706</td><td>ID_PRICE_118</td><td>PHX70089</td><td>Add</td><td>Promozione 12% SUPER Unlimited</td><td>SRVPREPMOB</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041455707</td><td>ID_PRICE_119</td><td>PHX70090</td><td>Add</td><td>Promozione 20% SUPER Unlimited</td><td>SRVPREPMOB</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041455785</td><td>ID_PRICE_4675</td><td>PHX80101</td><td>Add</td><td>PC Secure Web Mobile Pre</td><td>SES</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041455781</td><td>ID_PRICE_66</td><td>PHX70087</td><td>Add</td><td>SUPER Unlimited</td><td>SRVPREPMOB</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041455782</td><td>ID_PRICE_118</td><td>PHX70089</td><td>Add</td><td>Promozione 12% SUPER Unlimited</td><td>SRVPREPMOB</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041455783</td><td>ID_PRICE_119</td><td>PHX70090</td><td>Add</td><td>Promozione 20% SUPER Unlimited</td><td>SRVPREPMOB</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041455861</td><td>ID_PRICE_4675</td><td>PHX80101</td><td>Add</td><td>PC Secure Web Mobile Pre</td><td>SES</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041455857</td><td>ID_PRICE_66</td><td>PHX70087</td><td>Add</td><td>SUPER Unlimited</td><td>SRVPREPMOB</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041455858</td><td>ID_PRICE_118</td><td>PHX70089</td><td>Add</td><td>Promozione 12% SUPER Unlimited</td><td>SRVPREPMOB</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041455859</td><td>ID_PRICE_119</td><td>PHX70090</td><td>Add</td><td>Promozione 20% SUPER Unlimited</td><td>SRVPREPMOB</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041455937</td><td>ID_PRICE_4675</td><td>PHX80101</td><td>Add</td><td>PC Secure Web Mobile Pre</td><td>SES</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041455933</td><td>ID_PRICE_66</td><td>PHX70087</td><td>Add</td><td>SUPER Unlimited</td><td>SRVPREPMOB</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041455934</td><td>ID_PRICE_118</td><td>PHX70089</td><td>Add</td><td>Promozione 12% SUPER Unlimited</td><td>SRVPREPMOB</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041455935</td><td>ID_PRICE_119</td><td>PHX70090</td><td>Add</td><td>Promozione 20% SUPER Unlimited</td><td>SRVPREPMOB</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041456013</td><td>ID_PRICE_4675</td><td>PHX80101</td><td>Add</td><td>PC Secure Web Mobile Pre</td><td>SES</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041456009</td><td>ID_PRICE_66</td><td>PHX70087</td><td>Add</td><td>SUPER Unlimited</td><td>SRVPREPMOB</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041456010</td><td>ID_PRICE_118</td><td>PHX70089</td><td>Add</td><td>Promozione 12% SUPER Unlimited</td><td>SRVPREPMOB</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041456011</td><td>ID_PRICE_119</td><td>PHX70090</td><td>Add</td><td>Promozione 20% SUPER Unlimited</td><td>SRVPREPMOB</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041456090</td><td>ID_PRICE_4675</td><td>PHX80101</td><td>Add</td><td>PC Secure Web Mobile Pre</td><td>SES</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041456085</td><td>ID_PRICE_66</td><td>PHX70087</td><td>Add</td><td>SUPER Unlimited</td><td>SRVPREPMOB</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041456086</td><td>ID_PRICE_118</td><td>PHX70089</td><td>Add</td><td>Promozione 12% SUPER Unlimited</td><td>SRVPREPMOB</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041456087</td><td>ID_PRICE_119</td><td>PHX70090</td><td>Add</td><td>Promozione 20% SUPER Unlimited</td><td>SRVPREPMOB</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041456088</td><td>ID_PRICE_67</td><td>PHX70098</td><td>Add</td><td>Roaming Pass</td><td>SRVPREPMOB</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041456167</td><td>ID_PRICE_4675</td><td>PHX80101</td><td>Add</td><td>PC Secure Web Mobile Pre</td><td>SES</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041456162</td><td>ID_PRICE_66</td><td>PHX70087</td><td>Add</td><td>SUPER Unlimited</td><td>SRVPREPMOB</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041456163</td><td>ID_PRICE_118</td><td>PHX70089</td><td>Add</td><td>Promozione 12% SUPER Unlimited</td><td>SRVPREPMOB</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041456164</td><td>ID_PRICE_119</td><td>PHX70090</td><td>Add</td><td>Promozione 20% SUPER Unlimited</td><td>SRVPREPMOB</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041456165</td><td>ID_PRICE_67</td><td>PHX70098</td><td>Add</td><td>Roaming Pass</td><td>SRVPREPMOB</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041456219</td><td>ID_PRICE_4674</td><td>PHX80100</td><td>Add</td><td>PC Secure Web Mobile</td><td>ESM</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041456225</td><td>ID_PRICE_3655</td><td>PHX70101</td><td>Add</td><td>SUPER Giga Unlimited</td><td>VDAT</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr><tr><td>704.711</td><td>Activation Order</td><td>704.711</td><td></td><td>1-626039052881</td><td>1626041456226</td><td>ID_PRICE_783</td><td>PHX70105</td><td>Add</td><td>Promozione SUPER Giga Unlimited</td><td>VDAT</td><td>Attivazione</td><td>Attivazione</td><td>Prima Attivazione</td></tr></tbody></table></div></div><div class="section" id="ID1717432710041"><div class="section-column1"><div class="section-title">PAR 9.6 - Parsing ordine CRM json in forma gerarchica su COM entrando per action_id EMF siebel (DIN1717432710041)<hr></div><pre><code class="language-sql">WITH RECURSIVE hierarchy AS (
--QUESTA QUERY DEFINISCE IL LEGAME TRA PADRE E FIGLIO DEI productOrderItem ED ESTRAE PADRE
---------------------------------------------------------------------------------------  
SELECT
    componentroot,
    integrationid,
    componentpadre,
    codiceps,
    action_,
    sottotipo,
    tipo,
    1 AS level
  FROM
  (
  				--QUESTA QUERY ESTRARE TUTTI I productOrderItem ANNIDATI NEL JSON DELL'ORDINE
				---------------------------------------------------------------------------------------
				WITH RECURSIVE product_recursive AS 
				(
				  SELECT json_array_elements(message_xml::json-&gt;'payload'-&gt;'productOrderItem') AS product_item
				  FROM 
				  (select b.message_xml from action a,action_msg b where a.message_id=b.id and a.id=620154930838)--EMF INBOUND ESB
				  your_table_name
				  UNION ALL
				  SELECT json_array_elements(product_item-&gt;'productOrderItem')
				  FROM product_recursive
				  WHERE product_item-&gt;'productOrderItem' IS NOT NULL
				)
				SELECT 
				--product_item-&gt;'product'-&gt;&gt;'id' AS product_id
				product_item-&gt;&gt;'componentRoot' as componentRoot
				,product_item-&gt;&gt;'integrationId' as integrationId
				,product_item-&gt;&gt;'componentPadre' as componentPadre
				,product_item-&gt;&gt;'codicePs'as codicePs
				,product_item-&gt;&gt;'action'as action_
				,product_item-&gt;&gt;'sottotipo'as sottotipo
				,product_item-&gt;&gt;'tipo'as tipo
				FROM product_recursive
				WHERE product_item-&gt;'product' IS NOT null
				---------------------------------------------------------------------------------------
  ) your_table_name
  WHERE
    componentpadre = componentRoot and componentPadre=integrationId -- definisce il padre da cui poi far partire la ricorsione
  UNION all
  --QUESTA QUERY DEFINISCE IL LEGAME TRA PADRE E FIGLIO DEI productOrderItem ED ESTRAE I FIGLI
  ---------------------------------------------------------------------------------------  
  SELECT
    t.componentroot,
    t.integrationid,
    t.componentpadre,
    t.codiceps,
    t.action_,
    t.sottotipo,
    t.tipo,
    h.level + 1
  FROM
    (   		--QUESTA QUERY ESTRARE TUTTI I productOrderItem ANNIDATI NEL JSON DELL'ORDINE
				---------------------------------------------------------------------------------------
				WITH RECURSIVE product_recursive AS 
				(
				  SELECT json_array_elements(message_xml::json-&gt;'payload'-&gt;'productOrderItem') AS product_item
				  FROM 
				  (select b.message_xml from action a,action_msg b where a.message_id=b.id and a.id=620154930838)
				  your_table_name
				  UNION ALL
				  SELECT json_array_elements(product_item-&gt;'productOrderItem')
				  FROM product_recursive
				  WHERE product_item-&gt;'productOrderItem' IS NOT NULL
				)
				SELECT 
				--product_item-&gt;'product'-&gt;&gt;'id' AS product_id
				product_item-&gt;&gt;'componentRoot' as componentRoot
				,product_item-&gt;&gt;'integrationId' as integrationId
				,product_item-&gt;&gt;'componentPadre' as componentPadre
				,product_item-&gt;&gt;'codicePs'as codicePs
				,product_item-&gt;&gt;'action'as action_
				,product_item-&gt;&gt;'sottotipo'as sottotipo
				,product_item-&gt;&gt;'tipo'as tipo
				FROM product_recursive
				WHERE product_item-&gt;'product' IS NOT null
	)  
		t,hierarchy h where h.integrationid=t.componentpadre and t.tipo &lt;&gt;'PRD'
	)
---------------------------------------------------------------------------------------  
select
case level 
when 1 then tipo||'-'|| sottotipo
when 2 then '  |_'||tipo||'-'|| sottotipo
when 3 then '     |_'||tipo||'-'|| sottotipo 
when 4 then '        |_'||tipo||'-'|| sottotipo
when 5 then '           |_'||tipo||'-'|| sottotipo
when 6 then '              |_'||tipo||'-'|| sottotipo
else lpad('', level - 1, '    ')|| sottotipo
end as sottotipo_dec,
level,
    componentroot,
    integrationid,
    componentpadre,
    codiceps,
    action_
FROM
  hierarchy 
  order by componentPadre,integrationId</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>sottotipo_dec</th><th>level</th><th>componentroot</th><th>integrationid</th><th>componentpadre</th><th>codiceps</th><th>action_</th></tr></thead><tbody><tr><td>PRD-WLESSPREPAG</td><td>1</td><td>1626041455634</td><td>1626041455634</td><td>1626041455634</td><td>PHX00032</td><td>Add</td></tr><tr><td>|_TC-ACCPREPMOB</td><td>2</td><td>1626041455634</td><td>1626041455636</td><td>1626041455634</td><td>PHX00033</td><td>Add</td></tr><tr><td>|_TC-SRVPREPMOB</td><td>2</td><td>1626041455634</td><td>1626041455653</td><td>1626041455634</td><td>PHX00034</td><td>Add</td></tr><tr><td>|_TE-SROMINT</td><td>3</td><td>1626041455634</td><td>1626041455660</td><td>1626041455653</td><td>PHX00039</td><td>Add</td></tr><tr><td>|_TE-SCHMINT</td><td>3</td><td>1626041455634</td><td>1626041455661</td><td>1626041455653</td><td>PHX00040</td><td>Add</td></tr><tr><td>|_TE-SSGRTEL</td><td>3</td><td>1626041455634</td><td>1626041455662</td><td>1626041455653</td><td>PHX00041</td><td>Add</td></tr><tr><td>|_TE-SSMSORG</td><td>3</td><td>1626041455634</td><td>1626041455665</td><td>1626041455653</td><td>PHX00042</td><td>Add</td></tr><tr><td>|_TE-RAS</td><td>3</td><td>1626041455634</td><td>1626041455666</td><td>1626041455653</td><td>PHX00089</td><td>Add</td></tr><tr><td>|_TE-MNPIN</td><td>3</td><td>1626041455634</td><td>1626041455670</td><td>1626041455653</td><td>PHX30009</td><td>Add</td></tr><tr><td>|_TE-INTWAPBIZ</td><td>3</td><td>1626041455634</td><td>1626041455703</td><td>1626041455653</td><td>PHX30014</td><td>Add</td></tr><tr><td>|_TE-MMS</td><td>3</td><td>1626041455634</td><td>1626041455704</td><td>1626041455653</td><td>PHX30017</td><td>Add</td></tr><tr><td>|_PC-PNTF</td><td>3</td><td>1626041455634</td><td>1626041455705</td><td>1626041455653</td><td>PHX70087</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>3</td><td>1626041455634</td><td>1626041455706</td><td>1626041455653</td><td>PHX70089</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>3</td><td>1626041455634</td><td>1626041455707</td><td>1626041455653</td><td>PHX70090</td><td>Add</td></tr><tr><td>|_TE-SES</td><td>3</td><td>1626041455634</td><td>1626041455708</td><td>1626041455653</td><td>PHX80093</td><td>Add</td></tr><tr><td>|_TE-LTE</td><td>3</td><td>1626041455634</td><td>1626042303682</td><td>1626041455653</td><td>PHX50805</td><td>Add</td></tr><tr><td>|_TE-5GPRE</td><td>3</td><td>1626041455634</td><td>1626042318365</td><td>1626041455653</td><td>PHX70278</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>4</td><td>1626041455634</td><td>1626041455709</td><td>1626041455708</td><td>PHX80101</td><td>Add</td></tr><tr><td>PRD-WLESSPREPAG</td><td>1</td><td>1626041455710</td><td>1626041455710</td><td>1626041455710</td><td>PHX00032</td><td>Add</td></tr><tr><td>|_TC-ACCPREPMOB</td><td>2</td><td>1626041455710</td><td>1626041455712</td><td>1626041455710</td><td>PHX00033</td><td>Add</td></tr><tr><td>|_TC-SRVPREPMOB</td><td>2</td><td>1626041455710</td><td>1626041455729</td><td>1626041455710</td><td>PHX00034</td><td>Add</td></tr><tr><td>|_TE-SROMINT</td><td>3</td><td>1626041455710</td><td>1626041455736</td><td>1626041455729</td><td>PHX00039</td><td>Add</td></tr><tr><td>|_TE-SCHMINT</td><td>3</td><td>1626041455710</td><td>1626041455737</td><td>1626041455729</td><td>PHX00040</td><td>Add</td></tr><tr><td>|_TE-SSGRTEL</td><td>3</td><td>1626041455710</td><td>1626041455738</td><td>1626041455729</td><td>PHX00041</td><td>Add</td></tr><tr><td>|_TE-SSMSORG</td><td>3</td><td>1626041455710</td><td>1626041455741</td><td>1626041455729</td><td>PHX00042</td><td>Add</td></tr><tr><td>|_TE-RAS</td><td>3</td><td>1626041455710</td><td>1626041455742</td><td>1626041455729</td><td>PHX00089</td><td>Add</td></tr><tr><td>|_TE-MNPIN</td><td>3</td><td>1626041455710</td><td>1626041455746</td><td>1626041455729</td><td>PHX30009</td><td>Add</td></tr><tr><td>|_TE-INTWAPBIZ</td><td>3</td><td>1626041455710</td><td>1626041455779</td><td>1626041455729</td><td>PHX30014</td><td>Add</td></tr><tr><td>|_TE-MMS</td><td>3</td><td>1626041455710</td><td>1626041455780</td><td>1626041455729</td><td>PHX30017</td><td>Add</td></tr><tr><td>|_PC-PNTF</td><td>3</td><td>1626041455710</td><td>1626041455781</td><td>1626041455729</td><td>PHX70087</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>3</td><td>1626041455710</td><td>1626041455782</td><td>1626041455729</td><td>PHX70089</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>3</td><td>1626041455710</td><td>1626041455783</td><td>1626041455729</td><td>PHX70090</td><td>Add</td></tr><tr><td>|_TE-SES</td><td>3</td><td>1626041455710</td><td>1626041455784</td><td>1626041455729</td><td>PHX80093</td><td>Add</td></tr><tr><td>|_TE-LTE</td><td>3</td><td>1626041455710</td><td>1626042303761</td><td>1626041455729</td><td>PHX50805</td><td>Add</td></tr><tr><td>|_TE-5GPRE</td><td>3</td><td>1626041455710</td><td>1626042318494</td><td>1626041455729</td><td>PHX70278</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>4</td><td>1626041455710</td><td>1626041455785</td><td>1626041455784</td><td>PHX80101</td><td>Add</td></tr><tr><td>PRD-WLESSPREPAG</td><td>1</td><td>1626041455786</td><td>1626041455786</td><td>1626041455786</td><td>PHX00032</td><td>Add</td></tr><tr><td>|_TC-ACCPREPMOB</td><td>2</td><td>1626041455786</td><td>1626041455788</td><td>1626041455786</td><td>PHX00033</td><td>Add</td></tr><tr><td>|_TC-SRVPREPMOB</td><td>2</td><td>1626041455786</td><td>1626041455805</td><td>1626041455786</td><td>PHX00034</td><td>Add</td></tr><tr><td>|_TE-SROMINT</td><td>3</td><td>1626041455786</td><td>1626041455812</td><td>1626041455805</td><td>PHX00039</td><td>Add</td></tr><tr><td>|_TE-SCHMINT</td><td>3</td><td>1626041455786</td><td>1626041455813</td><td>1626041455805</td><td>PHX00040</td><td>Add</td></tr><tr><td>|_TE-SSGRTEL</td><td>3</td><td>1626041455786</td><td>1626041455814</td><td>1626041455805</td><td>PHX00041</td><td>Add</td></tr><tr><td>|_TE-SSMSORG</td><td>3</td><td>1626041455786</td><td>1626041455817</td><td>1626041455805</td><td>PHX00042</td><td>Add</td></tr><tr><td>|_TE-RAS</td><td>3</td><td>1626041455786</td><td>1626041455818</td><td>1626041455805</td><td>PHX00089</td><td>Add</td></tr><tr><td>|_TE-MNPIN</td><td>3</td><td>1626041455786</td><td>1626041455822</td><td>1626041455805</td><td>PHX30009</td><td>Add</td></tr><tr><td>|_TE-INTWAPBIZ</td><td>3</td><td>1626041455786</td><td>1626041455855</td><td>1626041455805</td><td>PHX30014</td><td>Add</td></tr><tr><td>|_TE-MMS</td><td>3</td><td>1626041455786</td><td>1626041455856</td><td>1626041455805</td><td>PHX30017</td><td>Add</td></tr><tr><td>|_PC-PNTF</td><td>3</td><td>1626041455786</td><td>1626041455857</td><td>1626041455805</td><td>PHX70087</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>3</td><td>1626041455786</td><td>1626041455858</td><td>1626041455805</td><td>PHX70089</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>3</td><td>1626041455786</td><td>1626041455859</td><td>1626041455805</td><td>PHX70090</td><td>Add</td></tr><tr><td>|_TE-SES</td><td>3</td><td>1626041455786</td><td>1626041455860</td><td>1626041455805</td><td>PHX80093</td><td>Add</td></tr><tr><td>|_TE-LTE</td><td>3</td><td>1626041455786</td><td>1626042303770</td><td>1626041455805</td><td>PHX50805</td><td>Add</td></tr><tr><td>|_TE-5GPRE</td><td>3</td><td>1626041455786</td><td>1626042318643</td><td>1626041455805</td><td>PHX70278</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>4</td><td>1626041455786</td><td>1626041455861</td><td>1626041455860</td><td>PHX80101</td><td>Add</td></tr><tr><td>PRD-WLESSPREPAG</td><td>1</td><td>1626041455862</td><td>1626041455862</td><td>1626041455862</td><td>PHX00032</td><td>Add</td></tr><tr><td>|_TC-ACCPREPMOB</td><td>2</td><td>1626041455862</td><td>1626041455864</td><td>1626041455862</td><td>PHX00033</td><td>Add</td></tr><tr><td>|_TC-SRVPREPMOB</td><td>2</td><td>1626041455862</td><td>1626041455881</td><td>1626041455862</td><td>PHX00034</td><td>Add</td></tr><tr><td>|_TE-SROMINT</td><td>3</td><td>1626041455862</td><td>1626041455888</td><td>1626041455881</td><td>PHX00039</td><td>Add</td></tr><tr><td>|_TE-SCHMINT</td><td>3</td><td>1626041455862</td><td>1626041455889</td><td>1626041455881</td><td>PHX00040</td><td>Add</td></tr><tr><td>|_TE-SSGRTEL</td><td>3</td><td>1626041455862</td><td>1626041455890</td><td>1626041455881</td><td>PHX00041</td><td>Add</td></tr><tr><td>|_TE-SSMSORG</td><td>3</td><td>1626041455862</td><td>1626041455893</td><td>1626041455881</td><td>PHX00042</td><td>Add</td></tr><tr><td>|_TE-RAS</td><td>3</td><td>1626041455862</td><td>1626041455894</td><td>1626041455881</td><td>PHX00089</td><td>Add</td></tr><tr><td>|_TE-MNPIN</td><td>3</td><td>1626041455862</td><td>1626041455898</td><td>1626041455881</td><td>PHX30009</td><td>Add</td></tr><tr><td>|_TE-INTWAPBIZ</td><td>3</td><td>1626041455862</td><td>1626041455931</td><td>1626041455881</td><td>PHX30014</td><td>Add</td></tr><tr><td>|_TE-MMS</td><td>3</td><td>1626041455862</td><td>1626041455932</td><td>1626041455881</td><td>PHX30017</td><td>Add</td></tr><tr><td>|_PC-PNTF</td><td>3</td><td>1626041455862</td><td>1626041455933</td><td>1626041455881</td><td>PHX70087</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>3</td><td>1626041455862</td><td>1626041455934</td><td>1626041455881</td><td>PHX70089</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>3</td><td>1626041455862</td><td>1626041455935</td><td>1626041455881</td><td>PHX70090</td><td>Add</td></tr><tr><td>|_TE-SES</td><td>3</td><td>1626041455862</td><td>1626041455936</td><td>1626041455881</td><td>PHX80093</td><td>Add</td></tr><tr><td>|_TE-LTE</td><td>3</td><td>1626041455862</td><td>1626042303909</td><td>1626041455881</td><td>PHX50805</td><td>Add</td></tr><tr><td>|_TE-5GPRE</td><td>3</td><td>1626041455862</td><td>1626042318732</td><td>1626041455881</td><td>PHX70278</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>4</td><td>1626041455862</td><td>1626041455937</td><td>1626041455936</td><td>PHX80101</td><td>Add</td></tr><tr><td>PRD-WLESSPREPAG</td><td>1</td><td>1626041455938</td><td>1626041455938</td><td>1626041455938</td><td>PHX00032</td><td>Add</td></tr><tr><td>|_TC-ACCPREPMOB</td><td>2</td><td>1626041455938</td><td>1626041455940</td><td>1626041455938</td><td>PHX00033</td><td>Add</td></tr><tr><td>|_TC-SRVPREPMOB</td><td>2</td><td>1626041455938</td><td>1626041455957</td><td>1626041455938</td><td>PHX00034</td><td>Add</td></tr><tr><td>|_TE-SROMINT</td><td>3</td><td>1626041455938</td><td>1626041455964</td><td>1626041455957</td><td>PHX00039</td><td>Add</td></tr><tr><td>|_TE-SCHMINT</td><td>3</td><td>1626041455938</td><td>1626041455965</td><td>1626041455957</td><td>PHX00040</td><td>Add</td></tr><tr><td>|_TE-SSGRTEL</td><td>3</td><td>1626041455938</td><td>1626041455966</td><td>1626041455957</td><td>PHX00041</td><td>Add</td></tr><tr><td>|_TE-SSMSORG</td><td>3</td><td>1626041455938</td><td>1626041455969</td><td>1626041455957</td><td>PHX00042</td><td>Add</td></tr><tr><td>|_TE-RAS</td><td>3</td><td>1626041455938</td><td>1626041455970</td><td>1626041455957</td><td>PHX00089</td><td>Add</td></tr><tr><td>|_TE-MNPIN</td><td>3</td><td>1626041455938</td><td>1626041455974</td><td>1626041455957</td><td>PHX30009</td><td>Add</td></tr><tr><td>|_TE-INTWAPBIZ</td><td>3</td><td>1626041455938</td><td>1626041456007</td><td>1626041455957</td><td>PHX30014</td><td>Add</td></tr><tr><td>|_TE-MMS</td><td>3</td><td>1626041455938</td><td>1626041456008</td><td>1626041455957</td><td>PHX30017</td><td>Add</td></tr><tr><td>|_PC-PNTF</td><td>3</td><td>1626041455938</td><td>1626041456009</td><td>1626041455957</td><td>PHX70087</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>3</td><td>1626041455938</td><td>1626041456010</td><td>1626041455957</td><td>PHX70089</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>3</td><td>1626041455938</td><td>1626041456011</td><td>1626041455957</td><td>PHX70090</td><td>Add</td></tr><tr><td>|_TE-SES</td><td>3</td><td>1626041455938</td><td>1626041456012</td><td>1626041455957</td><td>PHX80093</td><td>Add</td></tr><tr><td>|_TE-LTE</td><td>3</td><td>1626041455938</td><td>1626042303988</td><td>1626041455957</td><td>PHX50805</td><td>Add</td></tr><tr><td>|_TE-5GPRE</td><td>3</td><td>1626041455938</td><td>1626042318861</td><td>1626041455957</td><td>PHX70278</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>4</td><td>1626041455938</td><td>1626041456013</td><td>1626041456012</td><td>PHX80101</td><td>Add</td></tr><tr><td>PRD-WLESSPREPAG</td><td>1</td><td>1626041456014</td><td>1626041456014</td><td>1626041456014</td><td>PHX00032</td><td>Add</td></tr><tr><td>|_TC-ACCPREPMOB</td><td>2</td><td>1626041456014</td><td>1626041456016</td><td>1626041456014</td><td>PHX00033</td><td>Add</td></tr><tr><td>|_TC-SRVPREPMOB</td><td>2</td><td>1626041456014</td><td>1626041456033</td><td>1626041456014</td><td>PHX00034</td><td>Add</td></tr><tr><td>|_TE-SROMINT</td><td>3</td><td>1626041456014</td><td>1626041456040</td><td>1626041456033</td><td>PHX00039</td><td>Add</td></tr><tr><td>|_TE-SCHMINT</td><td>3</td><td>1626041456014</td><td>1626041456041</td><td>1626041456033</td><td>PHX00040</td><td>Add</td></tr><tr><td>|_TE-SSGRTEL</td><td>3</td><td>1626041456014</td><td>1626041456042</td><td>1626041456033</td><td>PHX00041</td><td>Add</td></tr><tr><td>|_TE-SSMSORG</td><td>3</td><td>1626041456014</td><td>1626041456045</td><td>1626041456033</td><td>PHX00042</td><td>Add</td></tr><tr><td>|_TE-RAS</td><td>3</td><td>1626041456014</td><td>1626041456046</td><td>1626041456033</td><td>PHX00089</td><td>Add</td></tr><tr><td>|_TE-MNPIN</td><td>3</td><td>1626041456014</td><td>1626041456050</td><td>1626041456033</td><td>PHX30009</td><td>Add</td></tr><tr><td>|_TE-INTWAPBIZ</td><td>3</td><td>1626041456014</td><td>1626041456083</td><td>1626041456033</td><td>PHX30014</td><td>Add</td></tr><tr><td>|_TE-MMS</td><td>3</td><td>1626041456014</td><td>1626041456084</td><td>1626041456033</td><td>PHX30017</td><td>Add</td></tr><tr><td>|_PC-PNTF</td><td>3</td><td>1626041456014</td><td>1626041456085</td><td>1626041456033</td><td>PHX70087</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>3</td><td>1626041456014</td><td>1626041456086</td><td>1626041456033</td><td>PHX70089</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>3</td><td>1626041456014</td><td>1626041456087</td><td>1626041456033</td><td>PHX70090</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>3</td><td>1626041456014</td><td>1626041456088</td><td>1626041456033</td><td>PHX70098</td><td>Add</td></tr><tr><td>|_TE-SES</td><td>3</td><td>1626041456014</td><td>1626041456089</td><td>1626041456033</td><td>PHX80093</td><td>Add</td></tr><tr><td>|_TE-LTE</td><td>3</td><td>1626041456014</td><td>1626042304097</td><td>1626041456033</td><td>PHX50805</td><td>Add</td></tr><tr><td>|_TE-5GPRE</td><td>3</td><td>1626041456014</td><td>1626042318870</td><td>1626041456033</td><td>PHX70278</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>4</td><td>1626041456014</td><td>1626041456090</td><td>1626041456089</td><td>PHX80101</td><td>Add</td></tr><tr><td>PRD-WLESSPREPAG</td><td>1</td><td>1626041456091</td><td>1626041456091</td><td>1626041456091</td><td>PHX00032</td><td>Add</td></tr><tr><td>|_TC-ACCPREPMOB</td><td>2</td><td>1626041456091</td><td>1626041456093</td><td>1626041456091</td><td>PHX00033</td><td>Add</td></tr><tr><td>|_TC-SRVPREPMOB</td><td>2</td><td>1626041456091</td><td>1626041456110</td><td>1626041456091</td><td>PHX00034</td><td>Add</td></tr><tr><td>|_TE-SROMINT</td><td>3</td><td>1626041456091</td><td>1626041456117</td><td>1626041456110</td><td>PHX00039</td><td>Add</td></tr><tr><td>|_TE-SCHMINT</td><td>3</td><td>1626041456091</td><td>1626041456118</td><td>1626041456110</td><td>PHX00040</td><td>Add</td></tr><tr><td>|_TE-SSGRTEL</td><td>3</td><td>1626041456091</td><td>1626041456119</td><td>1626041456110</td><td>PHX00041</td><td>Add</td></tr><tr><td>|_TE-SSMSORG</td><td>3</td><td>1626041456091</td><td>1626041456122</td><td>1626041456110</td><td>PHX00042</td><td>Add</td></tr><tr><td>|_TE-RAS</td><td>3</td><td>1626041456091</td><td>1626041456123</td><td>1626041456110</td><td>PHX00089</td><td>Add</td></tr><tr><td>|_TE-MNPIN</td><td>3</td><td>1626041456091</td><td>1626041456127</td><td>1626041456110</td><td>PHX30009</td><td>Add</td></tr><tr><td>|_TE-INTWAPBIZ</td><td>3</td><td>1626041456091</td><td>1626041456160</td><td>1626041456110</td><td>PHX30014</td><td>Add</td></tr><tr><td>|_TE-MMS</td><td>3</td><td>1626041456091</td><td>1626041456161</td><td>1626041456110</td><td>PHX30017</td><td>Add</td></tr><tr><td>|_PC-PNTF</td><td>3</td><td>1626041456091</td><td>1626041456162</td><td>1626041456110</td><td>PHX70087</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>3</td><td>1626041456091</td><td>1626041456163</td><td>1626041456110</td><td>PHX70089</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>3</td><td>1626041456091</td><td>1626041456164</td><td>1626041456110</td><td>PHX70090</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>3</td><td>1626041456091</td><td>1626041456165</td><td>1626041456110</td><td>PHX70098</td><td>Add</td></tr><tr><td>|_TE-SES</td><td>3</td><td>1626041456091</td><td>1626041456166</td><td>1626041456110</td><td>PHX80093</td><td>Add</td></tr><tr><td>|_TE-LTE</td><td>3</td><td>1626041456091</td><td>1626042304166</td><td>1626041456110</td><td>PHX50805</td><td>Add</td></tr><tr><td>|_TE-5GPRE</td><td>3</td><td>1626041456091</td><td>1626042318959</td><td>1626041456110</td><td>PHX70278</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>4</td><td>1626041456091</td><td>1626041456167</td><td>1626041456166</td><td>PHX80101</td><td>Add</td></tr><tr><td>PRD-WLESS</td><td>1</td><td>1626041456168</td><td>1626041456168</td><td>1626041456168</td><td>PHX00001</td><td>Add</td></tr><tr><td>|_TC-ACCM</td><td>2</td><td>1626041456168</td><td>1626041456173</td><td>1626041456168</td><td>PHX20001</td><td>Add</td></tr><tr><td>|_TC-VDAT</td><td>2</td><td>1626041456168</td><td>1626041456192</td><td>1626041456168</td><td>PHX20007</td><td>Add</td></tr><tr><td>|_TE-ESM</td><td>3</td><td>1626041456168</td><td>1626041456218</td><td>1626041456192</td><td>PHX80094</td><td>Add</td></tr><tr><td>|_TE-SMSD</td><td>3</td><td>1626041456168</td><td>1626041456220</td><td>1626041456192</td><td>PHX10642</td><td>Add</td></tr><tr><td>|_TE-INTWAPBIZ</td><td>3</td><td>1626041456168</td><td>1626041456221</td><td>1626041456192</td><td>PHX30014</td><td>Add</td></tr><tr><td>|_TE-MMS</td><td>3</td><td>1626041456168</td><td>1626041456222</td><td>1626041456192</td><td>PHX30017</td><td>Add</td></tr><tr><td>|_TE-SMS</td><td>3</td><td>1626041456168</td><td>1626041456223</td><td>1626041456192</td><td>PHX30033</td><td>Add</td></tr><tr><td>|_PC-PNTF</td><td>3</td><td>1626041456168</td><td>1626041456225</td><td>1626041456192</td><td>PHX70101</td><td>Add</td></tr><tr><td>|_PC-DIS</td><td>3</td><td>1626041456168</td><td>1626041456226</td><td>1626041456192</td><td>PHX70105</td><td>Add</td></tr><tr><td>|_TE-SGU</td><td>3</td><td>1626041456168</td><td>1626041456227</td><td>1626041456192</td><td>PHX70262</td><td>Add</td></tr><tr><td>|_TE-LTE</td><td>3</td><td>1626041456168</td><td>1626042304285</td><td>1626041456192</td><td>PHX50805</td><td>Add</td></tr><tr><td>|_TE-5GPOST</td><td>3</td><td>1626041456168</td><td>1626042319088</td><td>1626041456192</td><td>PHX70279</td><td>Add</td></tr><tr><td>|_PC-OPZ</td><td>4</td><td>1626041456168</td><td>1626041456219</td><td>1626041456218</td><td>PHX80100</td><td>Add</td></tr></tbody></table></div></div><div class="section" id="ID1717432776047"><div class="section-column1"><div class="section-title">PAR 9.7 - Parsing ordine CRM json in forma gerarchica su COM entrando per action_id EMF siebel (ottimizzata) (DIN1717432776047)<hr></div><pre><code class="language-sql">WITH RECURSIVE product_recursive AS 
				(
				  SELECT json_array_elements(message_xml::json-&gt;'payload'-&gt;'productOrderItem') AS product_item
				  FROM 
				  (select b.message_xml from action a,action_msg b where a.message_id=b.id and a.id=620154930838)--EMF INBOUND ESB
				  your_table_name
				  UNION ALL
				  SELECT json_array_elements(product_item-&gt;'productOrderItem')
				  FROM product_recursive
				  WHERE product_item-&gt;'productOrderItem' IS NOT NULL
				),
				second_recursive as 
				( -- estrae il prodotto 
						SELECT 
						product_item-&gt;&gt;'componentRoot' as componentRoot
						,product_item-&gt;&gt;'integrationId' as integrationId
						,product_item-&gt;&gt;'componentPadre' as componentPadre
						,product_item-&gt;&gt;'codicePs'as codicePs
						,product_item-&gt;&gt;'action'as action_
						,product_item-&gt;&gt;'sottotipo'as sottotipo
						,product_item-&gt;&gt;'tipo'as tipo
						,1 as level
						FROM product_recursive h
						WHERE product_item-&gt;'product' IS NOT null and
					    product_item-&gt;&gt;'componentPadre' = product_item-&gt;&gt;'componentRoot' and 
					    product_item-&gt;&gt;'componentPadre'=product_item-&gt;&gt;'integrationId'
				union all
				-- estrae i figli del prodotto 
					    SELECT 
						product_item-&gt;&gt;'componentRoot' as componentRoot
						,product_item-&gt;&gt;'integrationId' as integrationId
						,product_item-&gt;&gt;'componentPadre' as componentPadre
						,product_item-&gt;&gt;'codicePs'as codicePs
						,product_item-&gt;&gt;'action'as action_
						,product_item-&gt;&gt;'sottotipo'as sottotipo
						,product_item-&gt;&gt;'tipo'as tipo
						,z.level+1
						FROM product_recursive t,second_recursive z -- per creare il livello devo mettere in join la tabella stessa del CTE
						WHERE t.product_item-&gt;'product' IS NOT null and t.product_item-&gt;&gt;'tipo' &lt;&gt;'PRD'
						and  t.product_item-&gt;&gt;'componentPadre'=z.integrationid -- relazione padre figlio
					)
select
case level 
when 1 then tipo||'-'|| sottotipo
when 2 then '  |_'||tipo||'-'|| sottotipo
when 3 then '     |_'||tipo||'-'|| sottotipo 
when 4 then '        |_'||tipo||'-'|| sottotipo
when 5 then '           |_'||tipo||'-'|| sottotipo
when 6 then '              |_'||tipo||'-'|| sottotipo
else lpad('', level - 1, '    ')|| sottotipo
end as sottotipo_dec,
level,
    componentroot,
    integrationid,
    componentpadre,
    codiceps,
    action_
FROM
  second_recursive 
  order by componentPadre,integrationId</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>sottotipo_dec</th><th>level</th><th>componentroot</th><th>integrationid</th><th>componentpadre</th><th>codiceps</th><th>action_</th></tr></thead><tbody><tr><td>PRD-WLESSPREPAG</td><td>1</td><td>1626041455634</td><td>1626041455634</td><td>1626041455634</td><td>PHX00032</td><td>Add</td></tr><tr><td>|_TC-ACCPREPMOB</td><td>2</td><td>1626041455634</td><td>1626041455636</td><td>1626041455634</td><td>PHX00033</td><td>Add</td></tr><tr><td>|_TC-SRVPREPMOB</td><td>2</td><td>1626041455634</td><td>1626041455653</td><td>1626041455634</td><td>PHX00034</td><td>Add</td></tr><tr><td>|_TE-SROMINT</td><td>3</td><td>1626041455634</td><td>1626041455660</td><td>1626041455653</td><td>PHX00039</td><td>Add</td></tr><tr><td>|_TE-SCHMINT</td><td>3</td><td>1626041455634</td><td>1626041455661</td><td>1626041455653</td><td>PHX00040</td><td>Add</td></tr><tr><td>|_TE-SSGRTEL</td><td>3</td><td>1626041455634</td><td>1626041455662</td><td>1626041455653</td><td>PHX00041</td><td>Add</td></tr><tr><td>|_TE-SSMSORG</td><td>3</td><td>1626041455634</td><td>1626041455665</td><td>1626041455653</td><td>PHX00042</td><td>Add</td></tr><tr><td>|_TE-RAS</td><td>3</td><td>1626041455634</td><td>1626041455666</td><td>1626041455653</td><td>PHX00089</td><td>Add</td></tr><tr><td>|_TE-MNPIN</td><td>3</td><td>1626041455634</td><td>1626041455670</td><td>1626041455653</td><td>PHX30009</td><td>Add</td></tr><tr><td>|_TE-INTWAPBIZ</td><td>3</td><td>1626041455634</td><td>1626041455703</td><td>1626041455653</td><td>PHX30014</td><td>Add</td></tr></tbody></table></div></div><div class="section" id="ID1717432901025"><div class="section-column1"><div class="section-title">PAR 9.8 - Parsing ordine CRM json in forma gerarchica su COM entrando per id_ordine EMF siebel (DIN1717432901025)<hr></div><pre><code class="language-sql">WITH RECURSIVE first_recursive AS 
				-- ESTRAE L'EMF ESB (ORDINE SIEBEL)
  				(  
				--select b.message_xml from action a,action_msg b where a.message_id=b.id and a.id=620153351594 --action 
  				select b.message_xml,a.* from action a,action_msg b,request c,detail d 
				where 
				a.message_id=b.id and 
				d.value='1-626039052881' and 
				d.name='id_odl_crm' and 
				d.root_id=c.id and 
				c.id=a.request_id and 
				a.system='crm' and 
				a.direction='inbound'and 
				b.message_xml like '{%1-626039052881%'
				),
				-- ESTRAE I LINEITEM SIEBEL (PRODUCTORDERITEM)
				product_recursive as  
				(
					  SELECT --estrae la prima istanza del productOrderItem
					  	json_array_elements(first_recursive.message_xml::json-&gt;'payload'-&gt;'productOrderItem') AS product_item
					  FROM first_recursive
				  UNION ALL
					  select  --estrae in maniera ricorsiva tutte le strutture productOrderItem non vuote
					  	json_array_elements(product_item-&gt;'productOrderItem')
					  FROM product_recursive				  
					  WHERE product_item-&gt;'productOrderItem' IS NOT NULL
				),
				second_recursive as 
				( 
				-- estrae il prodotto a partire dalla tabella product_recursive che contiene tutti i productOrderItem (lineitem siebel)
						SELECT 
						product_item-&gt;&gt;'componentRoot' as componentRoot
						,product_item-&gt;&gt;'integrationId' as integrationId
						,product_item-&gt;&gt;'componentPadre' as componentPadre
						,product_item-&gt;&gt;'codicePs'as codicePs
						,product_item-&gt;&gt;'action'as action_
						,product_item-&gt;&gt;'sottotipo'as sottotipo
						,product_item-&gt;&gt;'tipo'as tipo
						,product_item-&gt;&gt;'idPrice'as idPrice
						,product_item-&gt;&gt;'mdf'as mdf
						,1 as level
						FROM product_recursive h
						WHERE product_item-&gt;'product' IS NOT null and
					    product_item-&gt;&gt;'componentPadre' = product_item-&gt;&gt;'componentRoot' and 
					    product_item-&gt;&gt;'componentPadre'=product_item-&gt;&gt;'integrationId'
				union all
				-- estrae i figli del prodotto 
					    SELECT 
						product_item-&gt;&gt;'componentRoot' as componentRoot
						,product_item-&gt;&gt;'integrationId' as integrationId
						,product_item-&gt;&gt;'componentPadre' as componentPadre
						,product_item-&gt;&gt;'codicePs'as codicePs
						,product_item-&gt;&gt;'action'as action_
						,product_item-&gt;&gt;'sottotipo'as sottotipo
						,product_item-&gt;&gt;'tipo'as tipo
						,product_item-&gt;&gt;'idPrice'as idPrice
						,product_item-&gt;&gt;'mdf'as mdf
						,z.level+1
						FROM product_recursive t,
						second_recursive z -- per creare il livello devo mettere in join la tabella stessa del CTE
						WHERE t.product_item-&gt;'product' IS NOT null 
						and t.product_item-&gt;&gt;'tipo' &lt;&gt;'PRD'
						and  t.product_item-&gt;&gt;'componentPadre'=z.integrationid -- relazione padre figlio
					)
SELECT -- FORMATTA L'OUTPUT
    CASE 
        WHEN level = 1 THEN tipo||'-'|| sottotipo
        ELSE lpad('', level, '    ') || '|_' || tipo || '-' || sottotipo
    END AS sottotipo_dec,
    level,
    componentroot,
    idPrice,mdf,
    integrationid,
    componentpadre,
    codiceps,
    action_
FROM
  second_recursive 
  order by componentPadre,integrationId</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>sottotipo_dec</th><th>level</th><th>componentroot</th><th>integrationid</th><th>componentpadre</th><th>codiceps</th><th>action_</th></tr></thead><tbody><tr><td>PRD-WLESSPREPAG</td><td>1</td><td>1626041455634</td><td>1626041455634</td><td>1626041455634</td><td>PHX00032</td><td>Add</td></tr><tr><td>|_TC-ACCPREPMOB</td><td>2</td><td>1626041455634</td><td>1626041455636</td><td>1626041455634</td><td>PHX00033</td><td>Add</td></tr><tr><td>|_TC-SRVPREPMOB</td><td>2</td><td>1626041455634</td><td>1626041455653</td><td>1626041455634</td><td>PHX00034</td><td>Add</td></tr><tr><td>|_TE-SROMINT</td><td>3</td><td>1626041455634</td><td>1626041455660</td><td>1626041455653</td><td>PHX00039</td><td>Add</td></tr><tr><td>|_TE-SCHMINT</td><td>3</td><td>1626041455634</td><td>1626041455661</td><td>1626041455653</td><td>PHX00040</td><td>Add</td></tr><tr><td>|_TE-SSGRTEL</td><td>3</td><td>1626041455634</td><td>1626041455662</td><td>1626041455653</td><td>PHX00041</td><td>Add</td></tr><tr><td>|_TE-SSMSORG</td><td>3</td><td>1626041455634</td><td>1626041455665</td><td>1626041455653</td><td>PHX00042</td><td>Add</td></tr><tr><td>|_TE-RAS</td><td>3</td><td>1626041455634</td><td>1626041455666</td><td>1626041455653</td><td>PHX00089</td><td>Add</td></tr><tr><td>|_TE-MNPIN</td><td>3</td><td>1626041455634</td><td>1626041455670</td><td>1626041455653</td><td>PHX30009</td><td>Add</td></tr><tr><td>|_TE-INTWAPBIZ</td><td>3</td><td>1626041455634</td><td>1626041455703</td><td>1626041455653</td><td>PHX30014</td><td>Add</td></tr></tbody></table></div></div><div class="section" id="ID1717487792380"><div class="section-column1"><div class="section-title">PAR 9.9 - Estrazione dettaglio ordini per ordini sospensione CRM (DIN1717487792380)<hr></div><pre><code class="language-sql">select * from (
WITH RECURSIVE product_recursive AS (
SELECT
json_array_elements(message_xml::json-&gt;'payload'-&gt;'productOrderItem') AS product_item,
message_xml as msg,
reqIdRoot
FROM
-- (select b.message_xml from action a,action_msg b where a.message_id=b.id and a.id=620155183956) -- 1-617808480689
( select b.message_xml,a.request_id reqIdRoot from action a,action_msg b where a.message_id=b.id and a.name='Receive Sim/Handset Change'
and a.ts_created&gt;current_date-80
and b.message_xml like '%"flagSospensione":"1%' )
your_table_name
UNION ALL
SELECT json_array_elements(product_item-&gt;'productOrderItem'),msg as msg,reqIdRoot
FROM product_recursive
WHERE product_item-&gt;'productOrderItem' IS NOT NULL
)
SELECT
reqIdRoot,b.ts_created,
b.id,
msg::json-&gt;'payload'-&gt;'externalId',
msg::json-&gt;'payload'-&gt;'flagSospensione',
msg::json-&gt;'payload'-&gt;'causaleOrdine',
msg::json-&gt;'payload'-&gt;'tipo',
msg::json-&gt;'payload'-&gt;'sottotipo',
msg::json-&gt;'request_root_name'
FROM product_recursive a,request b
WHERE product_item-&gt;'product' IS NOT null
and root_id=reqIdRoot
and b.name='Network'
) your_table_name</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>reqidroot</th><th>ts_created</th><th>id</th><th>?column?</th><th>?column?</th><th>?column?</th><th>?column?</th><th>?column?</th><th>?column?</th></tr></thead><tbody><tr><td>712.436</td><td>2024-05-30 12:30:17.015 +0200</td><td>719.715</td><td>"1-626348371642"</td><td>"1"</td><td>"Furto"</td><td>"Modifica"</td><td>"Cambio SIM/Terminale"</td><td>"Sim/Handset Change"</td></tr><tr><td>609.122</td><td>2024-04-04 23:26:51.674 +0200</td><td>611.386</td><td>"1-621379130297"</td><td>"1"</td><td>"Smarrimento"</td><td>"Modifica"</td><td>"Cambio SIM/Terminale"</td><td>"Sim/Handset Change"</td></tr><tr><td>617.831</td><td>2024-04-12 11:48:24.803 +0200</td><td>617.832</td><td>"1-622219974841"</td><td>"1"</td><td>"Smarrimento"</td><td>"Modifica"</td><td>"Cambio SIM/Terminale"</td><td>"Sim/Handset Change"</td></tr><tr><td>617.062</td><td>2024-04-16 23:30:26.628 +0200</td><td>621.764</td><td>"1-622138726687"</td><td>"1"</td><td>"Furto"</td><td>"Modifica"</td><td>"Cambio SIM/Terminale"</td><td>"Sim/Handset Change"</td></tr><tr><td>641.148</td><td>2024-04-26 09:49:09.768 +0200</td><td>641.150</td><td>"1-623281149439"</td><td>"1"</td><td>"Smarrimento"</td><td>"Modifica"</td><td>"Cambio SIM/Terminale"</td><td>"Sim/Handset Change"</td></tr><tr><td>625.229</td><td>2024-04-23 01:30:24.490 +0200</td><td>632.778</td><td>"1-622727598457"</td><td>"1"</td><td>"Smarrimento"</td><td>"Modifica"</td><td>"Cambio SIM/Terminale"</td><td>"Sim/Handset Change"</td></tr><tr><td>641.368</td><td>2024-04-30 23:20:34.720 +0200</td><td>648.820</td><td>"1-623413943423"</td><td>"1"</td><td>"Furto"</td><td>"Modifica"</td><td>"Cambio SIM/Terminale"</td><td>"Sim/Handset Change"</td></tr><tr><td>654.648</td><td>2024-05-05 19:59:05.138 +0200</td><td>654.649</td><td>"1-624111963267"</td><td>"1"</td><td>"Smarrimento"</td><td>"Modifica"</td><td>"Cambio SIM/Terminale"</td><td>"Sim/Handset Change"</td></tr><tr><td>688.179</td><td>2024-05-23 22:30:54.262 +0200</td><td>701.297</td><td>"1-625645759767"</td><td>"1"</td><td>"Smarrimento"</td><td>"Modifica"</td><td>"Cambio SIM/Terminale"</td><td>"Sim/Handset Change"</td></tr><tr><td>653.918</td><td>2024-05-03 16:56:28.592 +0200</td><td>653.920</td><td>"1-623977080039"</td><td>"1"</td><td>"Furto"</td><td>"Modifica"</td><td>"Cambio SIM/Terminale"</td><td>"Sim/Handset Change"</td></tr></tbody></table></div></div></div><div class="chapter-container" id="ID1717421225849"><div class="chapter-title">CAP 10 - Estrazione dettaglio eventi verso COMBILLING(DIN1717421225849)</div><button class="chapter-button">Aggiungi Paragrafo</button><button class="chapter-button">Elimina Paragrafo</button><div class="section" id="ID1717429267359"><div class="section-column1"><div class="section-title">PAR 10.1 - Estrae dettaglio dei Billing Element su eventi di attivazione a partire da id_ordine (DIN1717429267359)<hr></div><pre><code class="language-sql">select a.id,a.name,c.name, 
      b.message_xml::json-&gt;'serviceIstance'-&gt;'extIdSI' extIdSI,
      b.message_xml::json-&gt;'serviceIstance'-&gt;'idCliente' idCliente,
      b.message_xml::json-&gt;'serviceIstance'-&gt;'DescLine' DescLine,
      b.message_xml::json-&gt;'serviceIstance'-&gt;'CRMsottotipoSI' CRMsottotipoSI,
      b.message_xml::json-&gt;'serviceIstance'-&gt;'extIdSI' extIdSI,
      prdSI::json-&gt;'CRMsottotipo' CRMsottotipo,
      prdSI::json-&gt;'dtAttivazione' dtAttivazione,
      prdSI::json-&gt;'dtCessazione' dtCessazione,
      prdSI::json-&gt;'extIdBE' extIdBE,
      prdSI::json-&gt;'idBE' idBe,
      prdSI::json-&gt;'idOrdine' idOrdine,
      prdSI::json-&gt;'idPrice' idPrice,
      prdSI::json-&gt;'mdf' mdf,
      prdSI::json-&gt;'typeOpBE' typeOpBE,
      prdSI::json-&gt;'overrideRC' overrideRC
      from action  a ,action_msg b ,request c,request d
,json_array_elements(b.message_xml::json-&gt;'serviceIstance'-&gt;'billingElement') prdSI
--,json_array_elements(b.message_xml::json-&gt;'actionBillingElement'-&gt;'billingElement') prdACTBE
where 
1=1 and
b.id=a.message_id and
c.id=a.request_id and 
d.id=c.root_id and 
a.status='SA' AND 
a.id in (select a.id from action a , request c , detail d
where 
a.direction='outbound' and
a.system='billing' and 
c.id=a.request_id and
d.root_id=c.root_id and 
d.name='id_odl_crm' and 
d.value in ('1-618472067646'))
and b.message_xml  like '%serviceIstance%'</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>id</th><th>name</th><th>name</th><th>extidsi</th><th>idcliente</th><th>descline</th><th>crmsottotiposi</th><th>extidsi</th><th>crmsottotipo</th><th>dtattivazione</th><th>dtcessazione</th><th>extidbe</th><th>idbe</th><th>idordine</th><th>idprice</th><th>mdf</th><th>typeopbe</th><th>overriderc</th></tr></thead><tbody><tr><td>620.153.653.841</td><td>Active Service Instance</td><td>Logistics</td><td>"1618481264555"</td><td>"565145193"</td><td>"CPE Fonia"</td><td>"TERMOB"</td><td>"1618481264555"</td><td>"TERMOB"</td><td>"2024-02-28T13:14:15+01:00"</td><td>""</td><td>"1618481264583"</td><td>"PHX61554"</td><td>"1-618472067646"</td><td>"PRICE_MAN_08"</td><td>"POSTPAGATA"</td><td>"ADD"</td><td>""</td></tr></tbody></table></div></div><div class="section" id="ID1717429433200"><div class="section-column1"><div class="section-title">PAR 10.2 - Estrae dettaglio dei Billing Element su eventi di change be a partire da id_ordine (DIN1717429433200)<hr></div><pre><code class="language-sql">--change be

select a.id,a.name,c.name, 
      b.message_xml::json-&gt;'actionBillingElement'-&gt;'extIdSI' extIdSI,
      b.message_xml::json-&gt;'actionBillingElement'-&gt;'idCliente' idCliente,
      b.message_xml::json-&gt;'actionBillingElement'-&gt;'DescLine' DescLine,
      b.message_xml::json-&gt;'actionBillingElement'-&gt;'CRMsottotipoSI' CRMsottotipoSI,
      b.message_xml::json-&gt;'actionBillingElement'-&gt;'extIdSI' extIdSI,
      prdSI::json-&gt;'CRMsottotipo' CRMsottotipo,
      prdSI::json-&gt;'dtAttivazione' dtAttivazione,
      prdSI::json-&gt;'dtCessazione' dtCessazione,
      prdSI::json-&gt;'extIdBE' extIdBE,
      prdSI::json-&gt;'idOrdine' idOrdine,
      prdSI::json-&gt;'idPrice' idPrice,
      prdSI::json-&gt;'mdf' mdf,
      prdSI::json-&gt;'typeOpBE' typeOpBE
      from action  a ,action_msg b ,request c,request d
,json_array_elements(b.message_xml::json-&gt;'actionBillingElement'-&gt;'billingElement') prdSI
where 
1=1 and
b.id=a.message_id and
c.id=a.request_id and 
d.id=c.root_id and 
a.status='SA' AND 
a.id in --('620153328190')
(select a.id from action a , request c , detail d
where 
a.direction='outbound' and
a.system='billing' and 
c.id=a.request_id and
d.root_id=c.root_id and 
d.name='id_odl_crm' and 
d.value in ('1-618472067646'))
and b.message_xml  like '%actionBillingElement%'</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>id</th><th>name</th><th>name</th><th>extidsi</th><th>idcliente</th><th>descline</th><th>crmsottotiposi</th><th>extidsi</th><th>crmsottotipo</th><th>dtattivazione</th><th>dtcessazione</th><th>extidbe</th><th>idordine</th><th>idprice</th><th>mdf</th><th>typeopbe</th></tr></thead><tbody><tr><td>620.153.328.190</td><td>Change Billing Element Service Instance</td><td>Network</td><td>"1594036147444"</td><td>"609180505"</td><td></td><td></td><td>"1594036147444"</td><td>"OPZ"</td><td>"2023-06-09T11:25:42Z"</td><td>""</td><td>"1596019572069"</td><td>"1-596001964637"</td><td>"ID_PRICE_26"</td><td>"PRENOTAX"</td><td>"ADD"</td></tr><tr><td>620.153.328.190</td><td>Change Billing Element Service Instance</td><td>Network</td><td>"1594036147444"</td><td>"609180505"</td><td></td><td></td><td>"1594036147444"</td><td>"PNTF"</td><td>"2023-06-09T11:25:42Z"</td><td>""</td><td>"1596019572068"</td><td>"1-596001964637"</td><td>"ID_PRICE_3571"</td><td>"PRENOTAX"</td><td>"ADD"</td></tr></tbody></table></div></div><div class="section" id="ID1717429607738"><div class="section-column1"><div class="section-title">PAR 10.3 - Estrae dettaglio dei Billing Element su eventi di subentro a partire da id_ordine (DIN1717429607738)<hr></div><pre><code class="language-sql">-- subentro 

select a.id,a.name,c.name, 
      b.message_xml::json-&gt;'actionSubentroSI'-&gt;'serviceIstance'-&gt;0-&gt;'extIdSI' extIdSI,
      b.message_xml::json-&gt;'actionSubentroSI'-&gt;'serviceIstance'-&gt;0-&gt;'idCliente' idCliente,
      b.message_xml::json-&gt;'actionSubentroSI'-&gt;'serviceIstance'-&gt;0-&gt;'DescLine' DescLine,
      b.message_xml::json-&gt;'actionSubentroSI'-&gt;'serviceIstance'-&gt;0-&gt;'CRMsottotipoSI' CRMsottotipoSI,
      b.message_xml::json-&gt;'actionSubentroSI'-&gt;'serviceIstance'-&gt;0-&gt;'extIdSI' extIdSI,
      --b.message_xml::json-&gt;'actionSubentroSI'-&gt;'serviceIstance'-&gt;0-&gt;'dataAttivazione' dataAttivazione,
      --b.message_xml::json-&gt;'actionSubentroSI'-&gt;'serviceIstance'-&gt;0-&gt;'dataCessazione' dataCessazione,
      json_array_elements(prdSI::json-&gt;'billingElement')::json-&gt;'CRMsottotipo'CRMsottotipo
      ,json_array_elements(prdSI::json-&gt;'billingElement')::json-&gt;'dtAttivazione'dtAttivazione
      ,json_array_elements(prdSI::json-&gt;'billingElement')::json-&gt;'dtCessazione'dtCessazione
      ,json_array_elements(prdSI::json-&gt;'billingElement')::json-&gt;'extIdBE'extIdBE
      ,json_array_elements(prdSI::json-&gt;'billingElement')::json-&gt;'idOrdine'idOrdine
      ,json_array_elements(prdSI::json-&gt;'billingElement')::json-&gt;'idPrice'idPrice
      ,json_array_elements(prdSI::json-&gt;'billingElement')::json-&gt;'mdf'mdf
      ,json_array_elements(prdSI::json-&gt;'billingElement')::json-&gt;'typeOpBE'typeOpBE
      from action  a ,action_msg b ,request c,request d
,json_array_elements(b.message_xml::json-&gt;'actionSubentroSI'-&gt;'serviceIstance') prdSI
where 
1=1 and
b.id=a.message_id and
c.id=a.request_id and 
d.id=c.root_id and 
a.status='SA' AND 
a.id in ('620153814160') 
/*(select a.id from action a , request c , detail d
where 
a.direction='outbound' and
a.system='billing' and 
c.id=a.request_id and
d.root_id=c.root_id and 
d.name='id_odl_crm' and 
d.value in ('1-618472067646'))*/
and b.message_xml  like '%actionSubentroSI%'  --limit 1</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>id</th><th>name</th><th>name</th><th>extidsi</th><th>idcliente</th><th>descline</th><th>crmsottotiposi</th><th>extidsi</th><th>crmsottotipo</th><th>dtattivazione</th><th>dtcessazione</th><th>extidbe</th><th>idordine</th><th>idprice</th><th>mdf</th><th>typeopbe</th></tr></thead><tbody><tr><td>620.153.814.160</td><td>Change-over Service Instance</td><td>Change-over</td><td>"1546960952369"</td><td>"619868063"</td><td>"Servizio Mobile Ricaricabile"</td><td>"SRVPREPMOB"</td><td>"1546960952369"</td><td>"OPZ"</td><td>"2024-03-21T09:39:25+01:00"</td><td>""</td><td>"1595048566206"</td><td>"1-620301946607"</td><td>"ID_PRICE_246"</td><td>"PRENOTAX"</td><td>"ADD"</td></tr><tr><td>620.153.814.160</td><td>Change-over Service Instance</td><td>Change-over</td><td>"1546960952369"</td><td>"619868063"</td><td>"Servizio Mobile Ricaricabile"</td><td>"SRVPREPMOB"</td><td>"1546960952369"</td><td>"PNTF"</td><td>"2024-03-21T09:39:25+01:00"</td><td>""</td><td>"1546960952382"</td><td>"1-620301946607"</td><td>"ID_PRICE_66"</td><td>"PRENOTAX"</td><td>"ADD"</td></tr><tr><td>620.153.814.160</td><td>Change-over Service Instance</td><td>Change-over</td><td>"1546960952369"</td><td>"619868063"</td><td>"Servizio Mobile Ricaricabile"</td><td>"SRVPREPMOB"</td><td>"1546960952369"</td><td>"OPZ"</td><td>"2024-03-21T09:39:25+01:00"</td><td>""</td><td>"1547014512494"</td><td>"1-620301946607"</td><td>"ID_PRICE_119"</td><td>"PRENOTAX"</td><td>"ADD"</td></tr></tbody></table></div></div><div class="section" id="ID1717429903512"><div class="section-column1"><div class="section-title">PAR 10.4 - Estrae dettaglio linea su eventi di attivazione da id_ordine (DIN1717429903512)<hr></div><pre><code class="language-sql">select * from ( -- attivazione
      select a.id,a.name,c.name,
      b.message_xml::json-&gt;'serviceIstance'-&gt;'extIdSI' extIdSI,
      b.message_xml::json-&gt;'serviceIstance'-&gt;'idCliente' idCliente,
      b.message_xml::json-&gt;'serviceIstance'-&gt;'DescLine' DescLine,
      b.message_xml::json-&gt;'serviceIstance'-&gt;'numeroTelefono' numeroTelefono,
      b.message_xml::json-&gt;'serviceIstance'-&gt;'dataAttivazione' dataAttivazione,
      b.message_xml::json-&gt;'serviceIstance'-&gt;'dataCessazione' dataCessazione
      from action  a ,action_msg b ,request c,request d
--,json_array_elements(b.message_xml::json-&gt;'actionBillingElement'-&gt;'billingElement') prdACTBE
where 
1=1 and
b.id=a.message_id and
c.id=a.request_id and 
d.id=c.root_id and 
a.status='SA' AND 
a.id in (select a.id from action a , request c , detail d
where 
a.direction='outbound' and
a.system='billing' and 
c.id=a.request_id and
d.root_id=c.root_id and 
d.name='id_odl_crm' and 
d.value = ('1-621322387760'))
and b.message_xml  like '%serviceIstance%'</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>id</th><th>name</th><th>name</th><th>extidsi</th><th>idcliente</th><th>descline</th><th>numerotelefono</th><th>dataattivazione</th><th>datacessazione</th></tr></thead><tbody><tr><td>620.153.938.852</td><td>Active Service Instance</td><td>Activation Order</td><td>"1621479393975"</td><td>"619985335"</td><td>"Componente generico 1"</td><td>"A21621479393975"</td><td>"2024-04-03T00:00:00+02:00"</td></tr></tbody></table></div></div><div class="section" id="ID1717430086778"><div class="section-column1"><div class="section-title">PAR 10.5 - Estrae dettaglio linea su evento di cessazione a partire da id_ordine (DIN1717430086778)<hr></div><pre><code class="language-sql">select a.id,a.name,c.name, -- cessazione
      b.message_xml::json-&gt;'serviceIstanceDaCessare'-&gt;'extIdSI' extIdSI ,
      b.message_xml::json-&gt;'serviceIstanceDaCessare'-&gt;'idCliente' idCliente,
      b.message_xml::json-&gt;'serviceIstanceDaCessare'-&gt;'DescLine' DescLine,
      b.message_xml::json-&gt;'serviceIstanceDaCessare'-&gt;'numeroTelefono' numeroTelefono,
      b.message_xml::json-&gt;'serviceIstanceDaCessare'-&gt;'dataAttivazioneSI' dataAttivazione,
      b.message_xml::json-&gt;'serviceIstanceDaCessare'-&gt;'dataCessazione' dataCessazione
      from action  a ,action_msg b ,request c,request d
where 
1=1 and
b.id=a.message_id and
c.id=a.request_id and 
d.id=c.root_id and 
a.status='SA' AND 
b.message_xml  like '%serviceIstanceDaCessare%' and
a.id in (
620153331608,
-123)
/*(select a.id from action a , request c , detail d
where 
a.direction='outbound' and
a.system='billing' and 
c.id=a.request_id and
d.root_id=c.root_id and 
d.name='id_odl_crm' and 
d.value = ('1-621322387760'))*/</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>id</th><th>name</th><th>name</th><th>extidsi</th><th>idcliente</th><th>descline</th><th>numerotelefono</th><th>dataattivazione</th><th>datacessazione</th></tr></thead><tbody><tr><td>620.153.331.608</td><td>Deactivation Service Instance</td><td>Network</td><td>"1599612397263"</td><td>"612758701"</td><td></td><td>"A21599612397263"</td><td>"2023-07-17T00:00:00+02:00"</td><td>"2023-07-24T12:00:42+02:00"</td></tr></tbody></table></div></div></div><div class="chapter-container" id="ID1717431168285"><div class="chapter-title">CAP 11 - Estrazione caistiche con CVP(DIN1717431168285)</div><button class="chapter-button">Aggiungi Paragrafo</button><button class="chapter-button">Elimina Paragrafo</button><div class="section" id="ID1717431275021"><div class="section-column1"><div class="section-title">PAR 11.1 - Estrazione subentri con KO di CVP andati avanti (DIN1717431275021)<hr></div><pre><code class="language-sql">SELECT c.value ,b.root_id,b.name,a.ts_created  FROM 
ACTION a,
request b,detail c
WHERE b.name='Change-over' AND 
a.request_id=b.id AND 
a.name in ('Response async CVP KO','Ko Verify MdP')
AND 
	(
		EXISTS (SELECT 1 FROM ACTION z WHERE z.request_id=b.id AND z.SYSTEM='billing') or -- root
		EXISTS (SELECT 1 FROM ACTION z,request zz  WHERE z.request_id=zz.id and zz.root_id=b.id AND z.SYSTEM='billing')  --network
	)
and c.root_id=b.root_id 
and c.name='id_odl_crm'
order by ts_created
--AND b.id in (612764 , 602740)</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>value</th><th>root_id</th><th>name</th><th>ts_created</th></tr></thead><tbody><tr><td>1-616942296927</td><td>589.755</td><td>Change-over</td><td>2024-03-11 14:29:04.637 +0100</td></tr><tr><td>1-619859097260</td><td>594.900</td><td>Change-over</td><td>2024-03-18 13:16:45.343 +0100</td></tr><tr><td>1-619922670466</td><td>594.975</td><td>Change-over</td><td>2024-03-18 14:12:10.128 +0100</td></tr><tr><td>1-620094596748</td><td>595.593</td><td>Change-over</td><td>2024-03-18 18:15:07.015 +0100</td></tr><tr><td>1-620707152788</td><td>602.800</td><td>Change-over</td><td>2024-03-25 17:32:44.949 +0100</td></tr><tr><td>1-620707152788</td><td>602.800</td><td>Change-over</td><td>2024-03-25 17:34:04.844 +0100</td></tr><tr><td>1-620707152849</td><td>602.856</td><td>Change-over</td><td>2024-03-25 17:42:18.256 +0100</td></tr><tr><td>1-620701347992</td><td>602.740</td><td>Change-over</td><td>2024-03-26 10:21:40.597 +0100</td></tr><tr><td>1-621861098331</td><td>612.726</td><td>Change-over</td><td>2024-04-09 09:46:56.272 +0200</td></tr><tr><td>1-621861098420</td><td>612.797</td><td>Change-over</td><td>2024-04-09 09:47:30.992 +0200</td></tr><tr><td>1-621861098410</td><td>612.764</td><td>Change-over</td><td>2024-04-09 09:47:45.428 +0200</td></tr><tr><td>1-621861098400</td><td>612.751</td><td>Change-over</td><td>2024-04-09 09:47:59.931 +0200</td></tr><tr><td>1-621861098358</td><td>612.744</td><td>Change-over</td><td>2024-04-09 09:48:14.711 +0200</td></tr></tbody></table></div></div><div class="section" id="ID1717431489004"><div class="section-column1"><div class="section-title">PAR 11.2 - Estrazione subentri con KO di CVP bloccati (DIN1717431489004)<hr></div><pre><code class="language-sql">SELECT c.value ,b.root_id,b.name,a.ts_created   FROM 
ACTION a,
request b,detail c
WHERE b.name='Change-over' AND 
a.request_id=b.id AND 
a.name='Response async CVP KO'
AND 
	(
		not EXISTS (SELECT 1 FROM ACTION z WHERE z.request_id=b.id AND z.SYSTEM='billing') and -- root
		not EXISTS (SELECT 1 FROM ACTION z,request zz  WHERE z.request_id=zz.id and zz.root_id=b.id AND z.SYSTEM='billing')  
	)
and c.root_id=b.root_id 
and c.name='id_odl_crm' order by ts_created
limit 10
--AND b.id in (612764 , 602740)
</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>value</th><th>root_id</th><th>name</th><th>ts_created</th></tr></thead><tbody><tr><td>1-620115865675</td><td>602.871</td><td>Change-over</td><td>2024-03-27 12:35:26.099 +0100</td></tr><tr><td>1-620737820982</td><td>602.991</td><td>Change-over</td><td>2024-03-27 13:28:02.897 +0100</td></tr><tr><td>1-622443244016</td><td>619.696</td><td>Change-over</td><td>2024-04-15 16:20:30.538 +0200</td></tr><tr><td>1-622443244028</td><td>619.698</td><td>Change-over</td><td>2024-04-15 16:21:24.955 +0200</td></tr><tr><td>1-622443244058</td><td>619.704</td><td>Change-over</td><td>2024-04-15 16:22:22.316 +0200</td></tr><tr><td>1-622443244038</td><td>619.700</td><td>Change-over</td><td>2024-04-15 16:23:16.601 +0200</td></tr><tr><td>1-623501653813</td><td>642.732</td><td>Change-over</td><td>2024-04-27 13:32:40.202 +0200</td></tr><tr><td>1-623514241767</td><td>642.800</td><td>Change-over</td><td>2024-04-27 14:26:10.905 +0200</td></tr><tr><td>1-623739737739</td><td>647.702</td><td>Change-over</td><td>2024-04-30 18:33:11.737 +0200</td></tr><tr><td>1-623753645570</td><td>648.164</td><td>Change-over</td><td>2024-04-30 22:26:02.724 +0200</td></tr></tbody></table></div></div><div class="section" id="ID1717431562684"><div class="section-column1"><div class="section-title">PAR 11.3 - Estrazione esito di CVP  (DIN1717431562684)<hr></div><pre><code class="language-sql">SELECT c.value ,b.root_id,b.name,a.ts_created ,--d.message_xml,
regexp_match(d.message_xml, '&lt;impl:note&gt;(.*?)&lt;/impl:note&gt;')
FROM 
ACTION a,action_msg d,
request b,detail c
WHERE b.name='Change-over' AND 
a.request_id=b.id AND 
a.name in ('Response async CVP KO')
and c.root_id=b.root_id 
and c.name='id_odl_crm'
and d.id=a.message_id
order by ts_created</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>value</th><th>root_id</th><th>name</th><th>ts_created</th><th>regexp_match</th></tr></thead><tbody><tr><td>1-619859097260</td><td>594.900</td><td>Change-over</td><td>2024-03-18 13:16:45.343 +0100</td><td>{"CVP: Per la consistenza economico-finanziaria e per l'attività svolta si richiede pagamento tramite domiciliazione bancaria o carta di credito (RID/RIA)."}</td></tr><tr><td>1-619922670466</td><td>594.975</td><td>Change-over</td><td>2024-03-18 14:12:10.128 +0100</td><td>{"CVP: Reiterare ordine dopo il pagamento degli importi scaduti e non pagati per un totale di euro 97,56 su cc attivo 575749228"}</td></tr><tr><td>1-620094596748</td><td>595.593</td><td>Change-over</td><td>2024-03-18 18:15:07.015 +0100</td><td>{"CVP: Reiterare ordine allegando modulo di subentro firmato da i referenti con rispettivi documenti, visura del subentrante e del subentrato. "}</td></tr><tr><td>1-620707152788</td><td>602.800</td><td>Change-over</td><td>2024-03-25 17:32:44.949 +0100</td><td>{"CVP: Reiterare ordine dopo il pagamento degli importi scaduti e non pagati per un totale di euro 62,87 su codice Cliente 614551286  ATTIVO.</td></tr><tr><td>"}</td></tr><tr><td>1-620707152849</td><td>602.856</td><td>Change-over</td><td>2024-03-25 17:42:18.256 +0100</td><td>{"CVP: Reiterare ordine dopo il pagamento degli importi scaduti e non pagati per un totale di euro 97,56 su codice Cliente attivo 575749228-W"}</td></tr><tr><td>1-620701347992</td><td>602.740</td><td>Change-over</td><td>2024-03-26 10:21:40.597 +0100</td><td>{"CVP: Per la consistenza economico-finanziaria e per l'attività svolta si richiede pagamento tramite domiciliazione bancaria o carta di credito (RID/RIA).Normalizzare cdf: 619863188  attualmente in bollettino postale."}</td></tr><tr><td>1-620115865675</td><td>602.871</td><td>Change-over</td><td>2024-03-27 12:35:26.099 +0100</td><td>{"CVP: L'ordine non deve essere reiterato: lazienda risulta in liquidazione."}</td></tr><tr><td>1-620737820982</td><td>602.991</td><td>Change-over</td><td>2024-03-27 13:28:02.897 +0100</td><td>{"CVP: Per la consistenza economico-finanziaria e per l'attività svolta si richiede pagamento tramite domiciliazione bancaria o carta di credito (RID/RIA) su CDF 620248437 (attualmente in Bollettino Postale)"}</td></tr><tr><td>1-621861098331</td><td>612.726</td><td>Change-over</td><td>2024-04-09 09:46:56.272 +0200</td><td>{"CVP: Per la consistenza economico-finanziaria e per l'attività svolta si richiede pagamento tramite domiciliazione bancaria o carta di credito (RID/RIA)."}</td></tr><tr><td>1-621861098420</td><td>612.797</td><td>Change-over</td><td>2024-04-09 09:47:30.992 +0200</td><td>{"CVP: Per la consistenza economico-finanziaria e per l'attività svolta si richiede pagamento tramite domiciliazione bancaria o carta di credito (RID/RIA)."}</td></tr><tr><td>1-621861098410</td><td>612.764</td><td>Change-over</td><td>2024-04-09 09:47:45.428 +0200</td><td>{"CVP: Per la consistenza economico-finanziaria e per l'attività svolta si richiede pagamento tramite domiciliazione bancaria o carta di credito (RID/RIA)."}</td></tr><tr><td>1-621861098400</td><td>612.751</td><td>Change-over</td><td>2024-04-09 09:47:59.931 +0200</td><td>{"CVP: Per la consistenza economico-finanziaria e per l'attività svolta si richiede pagamento tramite domiciliazione bancaria o carta di credito (RID/RIA)."}</td></tr><tr><td>1-621861098358</td><td>612.744</td><td>Change-over</td><td>2024-04-09 09:48:14.711 +0200</td><td>{"CVP: Per la consistenza economico-finanziaria e per l'attività svolta si richiede pagamento tramite domiciliazione bancaria o carta di credito (RID/RIA)."}</td></tr><tr><td>1-622443244016</td><td>619.696</td><td>Change-over</td><td>2024-04-15 16:20:30.538 +0200</td><td>{"CVP: Reiterare ordine dopo il pagamento degli importi scaduti e non pagati per un totale di euro 1.936,04 cod clt H3G att 2254901 "}</td></tr><tr><td>1-622443244028</td><td>619.698</td><td>Change-over</td><td>2024-04-15 16:21:24.955 +0200</td><td>{"CVP: Reiterare ordine dopo il pagamento degli importi scaduti e non pagati per un totale di euro 1.936,04 cod clt H3G att 2254901 "}</td></tr><tr><td>1-622443244058</td><td>619.704</td><td>Change-over</td><td>2024-04-15 16:22:22.316 +0200</td><td>{"CVP: Reiterare ordine dopo il pagamento degli importi scaduti e non pagati per un totale di euro 1.936,04 cod clt H3G att 2254901 "}</td></tr><tr><td>1-622443244038</td><td>619.700</td><td>Change-over</td><td>2024-04-15 16:23:16.601 +0200</td><td>{"CVP: Reiterare ordine dopo il pagamento degli importi scaduti e non pagati per un totale di euro 1.936,04 cod clt H3G att 2254901 "}</td></tr><tr><td>1-623501653813</td><td>642.732</td><td>Change-over</td><td>2024-04-27 13:32:40.202 +0200</td><td>{"CVP: Reiterare ordine con PdC firmata."}</td></tr><tr><td>1-623514241767</td><td>642.800</td><td>Change-over</td><td>2024-04-27 14:26:10.905 +0200</td><td>{"CVP: Reiterare ordine dopo il pagamento degli importi scaduti e non pagati per un totale di euro 246,40 su codice Cliente attivo cc 534795183  "}</td></tr><tr><td>1-623739737739</td><td>647.702</td><td>Change-over</td><td>2024-04-30 18:33:11.737 +0200</td><td>{"CVP: Reiterare ordine dopo il pagamento degli importi scaduti pari a 36,58 su cc W3 503793386 Attivo</td></tr><tr><td>"}</td></tr><tr><td>1-623753645570</td><td>648.164</td><td>Change-over</td><td>2024-04-30 22:26:02.724 +0200</td><td>{"CVP: Reiterare ordine dopo il pagamento degli importi scaduti e non pagati per un totale di euro 105,72 relativi al cc P1131124752-W Attivo"}</td></tr><tr><td>1-624036014583</td><td>654.358</td><td>Change-over</td><td>2024-05-06 14:07:35.295 +0200</td><td>{"CVP: Reiterare ordine dopo verifica correttezza dati."}</td></tr><tr><td>1-624036014581</td><td>654.357</td><td>Change-over</td><td>2024-05-06 14:09:17.470 +0200</td><td>{"CVP: Reiterare ordine dopo verifica correttezza dati."}</td></tr><tr><td>1-624180264514</td><td>656.989</td><td>Change-over</td><td>2024-05-07 11:57:23.121 +0200</td><td>{"CVP: Reiterare ordine dopo verifica correttezza dati: p.iva 1557601588457 inserita non corretta. Inserire p.iva corretta"}</td></tr><tr><td>1-624180264516</td><td>656.992</td><td>Change-over</td><td>2024-05-07 11:59:09.224 +0200</td><td>{"CVP: Reiterare ordine dopo verifica correttezza dati: p.iva 1557601588457 inserita non corretta. Inserire p.iva corretta</td><td>"}</td></tr><tr><td>1-624431540236</td><td>662.842</td><td>Change-over</td><td>2024-05-09 11:47:43.638 +0200</td><td>{"CVP: Reiterare ordine dopo il pagamento degli importi scaduti e non pagati per un totale di euro 1.011,78 su codice Cliente 539191386 wind "}</td></tr><tr><td>1-624442280009</td><td>663.011</td><td>Change-over</td><td>2024-05-09 12:03:12.057 +0200</td><td>{"CVP: Reiterare ordine dopo il pagamento degli importi Passati a Perdita di euro 244,09  su Codice Cliente 521205394-W.</td></tr><tr><td>Reiterare ordine dopo il pagamento degli importi scaduti e non pagati per un totale di euro 54,16 su codice Cliente attivo cc 552438031-W."}</td></tr><tr><td>1-624418982397</td><td>663.022</td><td>Change-over</td><td>2024-05-09 12:24:43.654 +0200</td><td>{"CVP: Reiterare ordine dopo il pagamento degli importi Passati a Perdita di euro 818,1 su Codice Cliente 425678444-W Disattivo"}</td></tr><tr><td>1-625041461376</td><td>677.379</td><td>Change-over</td><td>2024-05-15 14:39:35.149 +0200</td><td>{"CVP: Reiterare ordine dopo il pagamento degli importi scaduti e non pagati per un totale di euro 139,00 su codice Cliente 598189593-W"}</td></tr><tr><td>1-625041461366</td><td>677.368</td><td>Change-over</td><td>2024-05-15 14:41:23.720 +0200</td><td>{"CVP: Reiterare ordine dopo il pagamento degli importi scaduti e non pagati per un totale di euro 139,00 su codice Cliente 598189593-W"}</td></tr><tr><td>1-625186375060</td><td>678.268</td><td>Change-over</td><td>2024-05-16 13:12:13.591 +0200</td><td>{"CVP: Per la consistenza economico-finanziaria e per l'attività svolta si richiede pagamento tramite domiciliazione bancaria o carta di credito (RID/RIA)."}</td></tr><tr><td>1-625186375052</td><td>678.291</td><td>Change-over</td><td>2024-05-16 13:12:41.716 +0200</td><td>{"CVP: Per la consistenza economico-finanziaria e per l'attività svolta si richiede pagamento tramite domiciliazione bancaria o carta di credito (RID/RIA)."}</td></tr><tr><td>1-625825236774</td><td>694.367</td><td>Change-over</td><td>2024-05-22 16:53:40.128 +0200</td><td>{"CVP: Reiterare ordine dopo il pagamento degli importi scaduti e non pagati per un totale (PAP) di euro 499,20 su codice Cliente 20660200 disattivo.</td></tr><tr><td></td></tr><tr><td>"}</td></tr><tr><td>1-625817770332</td><td>694.377</td><td>Change-over</td><td>2024-05-22 16:54:50.203 +0200</td><td>{"CVP: Reiterare ordine dopo il pagamento degli importi scaduti e non pagati per un totale (PAP) di euro 499,20 su codice Cliente 20660200 disattivo.</td></tr><tr><td></td></tr><tr><td>"}</td></tr><tr><td>1-625825737290</td><td>696.446</td><td>Change-over</td><td>2024-05-23 11:36:58.728 +0200</td><td>{"CVP: Reiterare ordine dopo il pagamento degli importi scaduti e non pagati per un totale di euro 214,64 su cc 568618413 attivo."}</td></tr><tr><td>1-625825331449</td><td>694.879</td><td>Change-over</td><td>2024-05-23 14:37:44.448 +0200</td><td>{"CVP: Reiterare ordine dopo il pagamento degli importi scaduti e non pagati per un totale di euro 146,30 su codice Cliente 561137237 wind attivo "}</td></tr><tr><td>1-626028010615</td><td>703.699</td><td>Change-over</td><td>2024-05-27 09:40:46.202 +0200</td><td>{"CVP: Reiterare ordine dopo il pagamento degli importi Passati a Perdita di euro 244,09  su Codice Cliente 521205394-W."}</td></tr><tr><td>1-626271070750</td><td>710.443</td><td>Change-over</td><td>2024-05-28 12:56:32.768 +0200</td><td>{"CVP: Reiterare ordine con PdC firmata."}</td></tr><tr><td>1-626329698851</td><td>711.994</td><td>Change-over</td><td>2024-05-28 16:24:34.861 +0200</td><td>{"CVP: Per la consistenza economico-finanziaria e per l'attività svolta si richiede pagamento tramite domiciliazione bancaria o carta di credito (RID/RIA)."}</td></tr><tr><td>1-626868013534</td><td>726.965</td><td>Change-over</td><td>2024-06-03 15:14:21.703 +0200</td><td>{"CVP: Reiterare ordine con PdC firmata."}</td></tr></tbody></table></div></div><div class="section" id="ID1717431655251"><div class="section-column1"><div class="section-title">PAR 11.4 - Estrazione dei CDF associati ai subentri con KO di CVP (DIN1717431655251)<hr></div><pre><code class="language-sql">SELECT --d.document_xml ,
c.value ,b.root_id,b.name,a.ts_created  ,mytab.code
FROM 
ACTION a,
request b,detail c,request_doc d,
xmltable(
			XMLNAMESPACES(	
							'http://bssevo_com/commons/B2B-CMF-JobSharedVariable' as "tns3",
							'http://bssevo_com/commons/B2B-CMF-CommercialOrder' as "tns4",
							'http://bssevo_com/commons/B2B-CMF-CommercialOrder' as "tns1",
							'http://bssevo_com/commons/B2B-CMF-CommercialOrder' as "tns30",
							'http://bssevo_com/commons/B2B-CMF-CommercialOrder' as "tns17"
							),
							'/tns3:root/tns3:commercialOrder/tns1:order/descendant::tns30:billingAccount'
						PASSING (d.document_xml::xml) 
			COLUMNS
				code varchar(100) path 'tns17:code' 
			)as myTab
WHERE b.name='Change-over' AND 
a.request_id=b.id AND 
a.name in ('Response async CVP KO','Ko Verify MdP')
and c.root_id=b.root_id 
and c.name='id_odl_crm'
and d.id=b.document_id
--and b.id=589755
order by ts_created</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button disabled" disabled="">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>value</th><th>root_id</th><th>name</th><th>ts_created</th><th>code</th></tr></thead><tbody><tr><td>1-616942296927</td><td>589.755</td><td>Change-over</td><td>2024-03-11 14:29:04.637 +0100</td><td>612873894</td></tr><tr><td>1-616942296927</td><td>589.755</td><td>Change-over</td><td>2024-03-11 14:29:04.637 +0100</td><td>608820827</td></tr><tr><td>1-619859097260</td><td>594.900</td><td>Change-over</td><td>2024-03-18 13:16:45.343 +0100</td><td>606981857</td></tr><tr><td>1-619859097260</td><td>594.900</td><td>Change-over</td><td>2024-03-18 13:16:45.343 +0100</td><td>619864491</td></tr><tr><td>1-619922670466</td><td>594.975</td><td>Change-over</td><td>2024-03-18 14:12:10.128 +0100</td><td>619866991</td></tr><tr><td>1-619922670466</td><td>594.975</td><td>Change-over</td><td>2024-03-18 14:12:10.128 +0100</td><td>575749489</td></tr><tr><td>1-620094596748</td><td>595.593</td><td>Change-over</td><td>2024-03-18 18:15:07.015 +0100</td><td>619867457</td></tr><tr><td>1-620094596748</td><td>595.593</td><td>Change-over</td><td>2024-03-18 18:15:07.015 +0100</td><td>6700319606</td></tr><tr><td>1-620707152788</td><td>602.800</td><td>Change-over</td><td>2024-03-25 17:32:44.949 +0100</td><td>614552453</td></tr><tr><td>1-620707152788</td><td>602.800</td><td>Change-over</td><td>2024-03-25 17:32:44.949 +0100</td><td>613628686</td></tr><tr><td>1-620707152788</td><td>602.800</td><td>Change-over</td><td>2024-03-25 17:34:04.844 +0100</td><td>614552453</td></tr><tr><td>1-620707152788</td><td>602.800</td><td>Change-over</td><td>2024-03-25 17:34:04.844 +0100</td><td>613628686</td></tr><tr><td>1-620707152849</td><td>602.856</td><td>Change-over</td><td>2024-03-25 17:42:18.256 +0100</td><td>619866991</td></tr><tr><td>1-620701347992</td><td>602.740</td><td>Change-over</td><td>2024-03-26 10:21:40.597 +0100</td><td>562835019</td></tr><tr><td>1-620701347992</td><td>602.740</td><td>Change-over</td><td>2024-03-26 10:21:40.597 +0100</td><td>619863188</td></tr><tr><td>1-620115865675</td><td>602.871</td><td>Change-over</td><td>2024-03-27 12:35:26.099 +0100</td><td>619870457</td></tr><tr><td>1-620737820982</td><td>602.991</td><td>Change-over</td><td>2024-03-27 13:28:02.897 +0100</td><td>620248437</td></tr><tr><td>1-621861098331</td><td>612.726</td><td>Change-over</td><td>2024-04-09 09:46:56.272 +0200</td><td>6800309453</td></tr><tr><td>1-621861098331</td><td>612.726</td><td>Change-over</td><td>2024-04-09 09:46:56.272 +0200</td><td>620423222</td></tr><tr><td>1-621861098420</td><td>612.797</td><td>Change-over</td><td>2024-04-09 09:47:30.992 +0200</td><td>620423222</td></tr><tr><td>1-621861098420</td><td>612.797</td><td>Change-over</td><td>2024-04-09 09:47:30.992 +0200</td><td>6800309453</td></tr><tr><td>1-621861098410</td><td>612.764</td><td>Change-over</td><td>2024-04-09 09:47:45.428 +0200</td><td>620423222</td></tr><tr><td>1-621861098400</td><td>612.751</td><td>Change-over</td><td>2024-04-09 09:47:59.931 +0200</td><td>620423222</td></tr><tr><td>1-621861098358</td><td>612.744</td><td>Change-over</td><td>2024-04-09 09:48:14.711 +0200</td><td>620423222</td></tr><tr><td>1-621861098358</td><td>612.744</td><td>Change-over</td><td>2024-04-09 09:48:14.711 +0200</td><td>6800309453</td></tr><tr><td>1-622443244016</td><td>619.696</td><td>Change-over</td><td>2024-04-15 16:20:30.538 +0200</td><td>592199495</td></tr><tr><td>1-622443244016</td><td>619.696</td><td>Change-over</td><td>2024-04-15 16:20:30.538 +0200</td><td>6700200690</td></tr><tr><td>1-622443244028</td><td>619.698</td><td>Change-over</td><td>2024-04-15 16:21:24.955 +0200</td><td>6700200690</td></tr><tr><td>1-622443244028</td><td>619.698</td><td>Change-over</td><td>2024-04-15 16:21:24.955 +0200</td><td>592199495</td></tr><tr><td>1-622443244058</td><td>619.704</td><td>Change-over</td><td>2024-04-15 16:22:22.316 +0200</td><td>6700200690</td></tr><tr><td>1-622443244058</td><td>619.704</td><td>Change-over</td><td>2024-04-15 16:22:22.316 +0200</td><td>592199495</td></tr><tr><td>1-622443244038</td><td>619.700</td><td>Change-over</td><td>2024-04-15 16:23:16.601 +0200</td><td>592199495</td></tr><tr><td>1-622443244038</td><td>619.700</td><td>Change-over</td><td>2024-04-15 16:23:16.601 +0200</td><td>6700200690</td></tr><tr><td>1-623501653813</td><td>642.732</td><td>Change-over</td><td>2024-04-27 13:32:40.202 +0200</td><td>621098740</td></tr><tr><td>1-623501653813</td><td>642.732</td><td>Change-over</td><td>2024-04-27 13:32:40.202 +0200</td><td>553079995</td></tr><tr><td>1-623514241767</td><td>642.800</td><td>Change-over</td><td>2024-04-27 14:26:10.905 +0200</td><td>621104838</td></tr><tr><td>1-623739737739</td><td>647.702</td><td>Change-over</td><td>2024-04-30 18:33:11.737 +0200</td><td>621173516</td></tr><tr><td>1-623753645570</td><td>648.164</td><td>Change-over</td><td>2024-04-30 22:26:02.724 +0200</td><td>621184543</td></tr><tr><td>1-624036014583</td><td>654.358</td><td>Change-over</td><td>2024-05-06 14:07:35.295 +0200</td><td>6800177319</td></tr><tr><td>1-624036014583</td><td>654.358</td><td>Change-over</td><td>2024-05-06 14:07:35.295 +0200</td><td>621277696</td></tr><tr><td>1-624036014581</td><td>654.357</td><td>Change-over</td><td>2024-05-06 14:09:17.470 +0200</td><td>621277696</td></tr><tr><td>1-624036014581</td><td>654.357</td><td>Change-over</td><td>2024-05-06 14:09:17.470 +0200</td><td>6800177319</td></tr><tr><td>1-624180264514</td><td>656.989</td><td>Change-over</td><td>2024-05-07 11:57:23.121 +0200</td><td>621277696</td></tr><tr><td>1-624180264514</td><td>656.989</td><td>Change-over</td><td>2024-05-07 11:57:23.121 +0200</td><td>6800177319</td></tr><tr><td>1-624180264516</td><td>656.992</td><td>Change-over</td><td>2024-05-07 11:59:09.224 +0200</td><td>621277696</td></tr><tr><td>1-624180264516</td><td>656.992</td><td>Change-over</td><td>2024-05-07 11:59:09.224 +0200</td><td>6800177319</td></tr><tr><td>1-624431540236</td><td>662.842</td><td>Change-over</td><td>2024-05-09 11:47:43.638 +0200</td><td>621376008</td></tr><tr><td>1-624431540236</td><td>662.842</td><td>Change-over</td><td>2024-05-09 11:47:43.638 +0200</td><td>571084596</td></tr><tr><td>1-624442280009</td><td>663.011</td><td>Change-over</td><td>2024-05-09 12:03:12.057 +0200</td><td>621381335</td></tr><tr><td>1-624418982397</td><td>663.022</td><td>Change-over</td><td>2024-05-09 12:24:43.654 +0200</td><td>570211394</td></tr><tr><td>1-624418982397</td><td>663.022</td><td>Change-over</td><td>2024-05-09 12:24:43.654 +0200</td><td>621382010</td></tr><tr><td>1-625041461376</td><td>677.379</td><td>Change-over</td><td>2024-05-15 14:39:35.149 +0200</td><td>621222460</td></tr><tr><td>1-625041461366</td><td>677.368</td><td>Change-over</td><td>2024-05-15 14:41:23.720 +0200</td><td>621222460</td></tr><tr><td>1-625186375060</td><td>678.268</td><td>Change-over</td><td>2024-05-16 13:12:13.591 +0200</td><td>621568136</td></tr><tr><td>1-625186375052</td><td>678.291</td><td>Change-over</td><td>2024-05-16 13:12:41.716 +0200</td><td>621568136</td></tr><tr><td>1-625825236774</td><td>694.367</td><td>Change-over</td><td>2024-05-22 16:53:40.128 +0200</td><td>572237973</td></tr><tr><td>1-625817770332</td><td>694.377</td><td>Change-over</td><td>2024-05-22 16:54:50.203 +0200</td><td>572237973</td></tr><tr><td>1-625825737290</td><td>696.446</td><td>Change-over</td><td>2024-05-23 11:36:58.728 +0200</td><td>568619229</td></tr><tr><td>1-625825331449</td><td>694.879</td><td>Change-over</td><td>2024-05-23 14:37:44.448 +0200</td><td>621523050</td></tr><tr><td>1-626028010615</td><td>703.699</td><td>Change-over</td><td>2024-05-27 09:40:46.202 +0200</td><td>621381335</td></tr><tr><td>1-626271070750</td><td>710.443</td><td>Change-over</td><td>2024-05-28 12:56:32.768 +0200</td><td>621524506</td></tr><tr><td>1-626329698851</td><td>711.994</td><td>Change-over</td><td>2024-05-28 16:24:34.861 +0200</td><td>621889840</td></tr><tr><td>1-626868013534</td><td>726.965</td><td>Change-over</td><td>2024-06-03 15:14:21.703 +0200</td><td>617135760</td></tr><tr><td>1-626868013534</td><td>726.965</td><td>Change-over</td><td>2024-06-03 15:14:21.703 +0200</td><td>601883895</td></tr></tbody></table></div></div></div></body></html>