<html lang="it"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CATALOGO QUERY COM</title>
    <link rel="stylesheet" type="text/css" href="CollectionEsbQuery.css">
	<link rel="icon" href="dbCOM.png" type="image/png">
    <script src="CollectionEsbQuery.js" defer=""></script> <!-- Collegamento al file JavaScript -->
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

</head>
<body>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CATALOGO QUERY COM</title>


 <!-- Chiamata alla funzione ripristinaTabella() al caricamento della pagina -->
    <div class="title">CATALOGO QUERY COM</div>
    <!-- Tabella puntamenti -->
    <div class="container">
        <div>
            <div class="database-description">
                Puntamenti Database COM
            </div>
                <table id="myTable">
					<thead>
						<tr>
							<th>Ambiente</th>
							<th>Host</th>
							<th>Port</th>
							<th>Service Name</th>
							<th>Console</th>
							<th>Console Details</th>							
							<th>Console Reprocesser</th>										
							<th>Azioni</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>PROD</td>
							<td>10.55.207.217</td>
							<td>1567</td>
							<td>BWKp_PDB</td>
							<td>https://ehconsole-prod.aws.windtre.it/#/pages/Login</td>
							<td>https://ehconsolebackend-prod.aws.windtre.it/api/ehc/detail/getCfgDetails</td>
							<td>https://ehconsoletibco-prod.aws.windtre.it/reprocess</td>							
							<td>n.a.</td>
						</tr>
						<tr>
							<td>STORICO</td>
							<td>crm-ora-iv-scan.wind.root.it</td>
							<td>1521</td>
							<td>h1esbp_app_service.wind.root.it</td>
							<td>n.a.</td>
							<td>n.a.</td>							
							<td>n.a.</td>							
							<td>n.a.</td>
						</tr>
						<tr>
							<td>INT</td>
							<td>esbdbs50.wind.root.it</td>
							<td>1522</td>
							<td>bwkd_pdbint1</td>
							<td>https://ehconsole-int.aws.windtre.it/#/pages/Login</td>
							<td>https://ehconsolebackend-int.aws.windtre.it/api/ehc/detail/getCfgDetails</td>				
							<td>n.a.</td>							
							<td>n.a.</td>
						</tr>
						<tr>
							<td>HT</td>
							<td>esbdbs50.wind.root.it</td>
							<td>1522</td>
							<td>bwkd_pdbhf</td>
							<td>https://ehconsole-st.aws.windtre.it/#/pages/Login</td>
							<td>https://ehconsolebackend-st.aws.windtre.it/api/ehc/detail/getCfgDetails</td>							
							<td>n.a.</td>							
							<td>n.a.</td>
						</tr>
					</tbody>
				</table>
			<p></p>
            <button class="chapter-button" onclick="aggiungiRiga()">Aggiungi Riga</button> <!-- Pulsante per aggiungere una riga -->
	
    </div>
        </div>
		

<!-- Indice -->

    <div class="index-container">
        <div class="index-title">Indice
		</div>
		<button class="chapter-button" onclick="aggiungiCapitolo()">Aggiungi Capitolo</button>
        <ul class="index-list">
            <li class="index-item"><a href="#chapter1">CAP 1 - Esempio</a>
                <ul class="paragraphs-list">
                    <li><a href="#chapter1-section1">PAR 1.1 - Esempio</a></li>
                </ul>
				<ul class="paragraphs-list"></ul>
			</li>

		<li class="index-item"><a href="#DIN1717335096082">CAP 2 - Query utilità generale</a><ul class="paragraphs-list"></ul><ul class="paragraphs-list"><li><a href="#DIN1717335490633">PAR 2.1 - Estrazione EMF a partire da action e request name</a></li></ul><ul class="paragraphs-list"><li><a href="#DIN1717336002931">PAR 2.2 - Estrazione id ordine a partire dall'action id</a></li></ul><ul class="paragraphs-list"><li><a href="#DIN1717337127952">PAR 2.3 - Estrae un dettaglio di una certa action a partire da id_ordine</a></li></ul><ul class="paragraphs-list"><li><a href="#DIN1717338322350">PAR 2.4 - Estrae ordini per i quali a fronte di una richiesta SOM non è stata ricevuta risposta</a></li></ul><ul class="paragraphs-list"><li><a href="#DIN1717338466444">PAR 2.5 - Estrae informazioni dalla cfg_action (query 1)</a></li></ul><ul class="paragraphs-list"><li><a href="#DIN1717338756343">PAR 2.6 - Estrae EMD della action SOM a partire da id_ordine</a></li></ul><ul class="paragraphs-list"><li><a href="#DIN1717338860913">PAR 2.7 - Estrae tutte le action verso COMB a partire da id_ordine</a></li></ul></li><li class="index-item"><a href="#DIN1717339283017">CAP 3 - Estrazioni provisioning SOM</a><ul class="paragraphs-list"></ul><ul class="paragraphs-list"><li><a href="#DIN1717339748096">PAR 3.1 - Esegue parsing dell'errore sui fallimenti SOM</a></li></ul></li><li class="index-item"><a href="#DIN1717340190450">CAP 4 - Estrazioni provisioning GSI</a><ul class="paragraphs-list"><li><a href="#DIN1717340494447">PAR 4.1 - Estrae action GSI da dettagli dall'EMF</a></li></ul></li><li class="index-item"><a href="#DIN1717341107452">CAP 5 - Estrazioni provisioning BILLING</a><ul class="paragraphs-list"><li><a href="#DIN1717341162103">PAR 5.1 - Estrae action billing a partire dal tel_no</a></li></ul></li></ul>
    </div>



<!-- STRUTTURA Capitolo 1 -->

    
<div class="chapter-container" id="chapter1">


        <div class="chapter-title">CAP 1 - Esempio</div>
				<button class="chapter-button" onclick="aggiungiParagrafo('chapter1')">Aggiungi Paragrafo</button>
				<button class="chapter-button" onclick="eliminaParagrafo('chapter1')">Elimina Paragrafo</button>
		
		<!-- STRUTTURA DEL PARAGRAFO -->
		<div class="section" id="chapter1-section1">
			
			<!-- STRUTTURA DEL TITOLO DEL PARAGRAFO -->
			<div class="section-column1">
			
				<div class="section-title">PAR 1.1 - Esempio</div>
				<hr>
				<!-- STRUTTURA DELLA QUERY DEL PARAGRAFO -->
				<pre class="bkg-section">				<code class="language-sql">
SELECT * FROM table_name where pippo="pluto";
				</code>
				</pre>
				<button class="chapter-button" onclick="copiaCode('chapter1-section1')">Copia codice</button>
				<button class="chapter-button disabled" onclick="modificaCode('chapter1-section1')" disabled="">Modifica codice</button>
				<button class="chapter-button" onclick="tornaAllInizio()">Torna inizio</button>
			</div>
			<p></p> 
			<div class="section-column2">
				<!-- STRUTTURA DELLA TABELLA DI OUTPUT DEL PARAGRAFO -->
				<table>
					<thead>
						<tr class="first-row">
							<th>Colonna 1</th>
							<th>Colonna 2</th>
							<th>Colonna 3</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>Dato 1</td>
							<td>Dato 2</td>
							<td>Dato 3</td>
						</tr>
					</tbody>
				</table>
			</div>
			<p></p>
        </div>
        <!-- Aggiungi o elimina sottoparagrafo -->
    </div>
	
	
   <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">×</span>
            <textarea id="codeTextarea" rows="10" style="width: 100%;"></textarea>
            <button id="saveCodeButton">Salva</button>
        </div>
    </div>
<div class="chapter-container" id="DIN1717335096082"><div class="chapter-title">CAP 2 - Query utilità generale(DIN1717335096082)</div><button class="chapter-button">Aggiungi Paragrafo</button><button class="chapter-button">Elimina Paragrafo</button><div class="section" id="DIN1717335490633"><div class="section-column1"><div class="section-title">PAR 2.1 - Estrazione EMF a partire da action e request name (DIN1717335490633)<hr></div><pre><code class="language-sql">select c.name,c.id,d.name,d.id from action c,action_msg b ,request d
where 
 1=1 
and b.message_xml like '%PHX80022%'
and c.name='Send Service Order'
and c.message_id=b.id
and c.status ='SA'
and d.name='Mixed Order' 
and d.id=c.request_id
and d.ts_created  &gt; current_date -90 
--and d.id=631390
limit 3</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>name</th><th>id</th><th>name</th><th>id</th></tr></thead><tbody><tr><td>Send Service Order</td><td>620.154.755.316</td><td>Mixed Order</td><td>686.180</td></tr><tr><td>Send Service Order</td><td>620.154.803.876</td><td>Mixed Order</td><td>691.315</td></tr><tr><td>Send Service Order</td><td>620.155.048.956</td><td>Mixed Order</td><td>714.856</td></tr></tbody></table></div></div><div class="section" id="DIN1717336002931"><div class="section-column1"><div class="section-title">PAR 2.2 - Estrazione id ordine a partire dall'action id (DIN1717336002931)<hr></div><pre><code class="language-sql">select b.ts_created,d.value,a.id,a.name,b.id,b.name from action a, request b , item2detail c , detail d
where --a.system='som'
1=1 and a.id in (620154177587,
620153588096,
620153680678)
and b.id=a.request_id
and b.id=c.request_id
and c.detail_id=d.id
and d.name='id_odl_crm'
limit 3</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>ts_created</th><th>value</th><th>id</th><th>name</th><th>id</th><th>name</th></tr></thead><tbody><tr><td>2024-02-21 16:18:12.997 +0100</td><td>1-618008268690</td><td>620.153.588.096</td><td>Send Service Order</td><td>579.665</td><td>Mixed Order</td></tr><tr><td>2024-02-21 16:18:12.997 +0100</td><td>1-618008268690</td><td>620.153.588.096</td><td>Send Service Order</td><td>579.665</td><td>Mixed Order</td></tr><tr><td>2024-04-22 15:22:18.251 +0200</td><td>1-622831680560</td><td>620.154.177.587</td><td>Send Service Order</td><td>631.390</td><td>Mixed Order</td></tr></tbody></table></div></div><div class="section" id="DIN1717337127952"><div class="section-column1"><div class="section-title">PAR 2.3 - Estrae un dettaglio di una certa action a partire da id_ordine (DIN1717337127952)<hr></div><pre><code class="language-sql">select ''''||c.value||''',',c.* from action a, item2detail b , detail c ,request d
where 
a.request_id=d.id and 
d.root_id in (select root_id from detail where name='id_odl_crm' and value='1-622426643036') and 
a.name='Notify ICCID' and 
b.action_id=a.id and
c.id=b.detail_id and
c.name='iccid'</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>?column?</th><th>id</th><th>name</th><th>value</th><th>cfg_id</th><th>pos</th><th>root_id</th></tr></thead><tbody><tr><td>'8939880825112013764',</td><td>1.371.286</td><td>iccid</td><td>8939880825112013764</td><td>47</td><td>0</td><td>619.699</td></tr><tr><td>'8939880825112013780',</td><td>1.371.288</td><td>iccid</td><td>8939880825112013780</td><td>47</td><td>1</td><td>619.699</td></tr><tr><td>'8939880825112013798',</td><td>1.371.290</td><td>iccid</td><td>8939880825112013798</td><td>47</td><td>2</td><td>619.699</td></tr><tr><td>'8939880825112013806',</td><td>1.371.292</td><td>iccid</td><td>8939880825112013806</td><td>47</td><td>3</td><td>619.699</td></tr><tr><td>'8939880825112013814',</td><td>1.371.294</td><td>iccid</td><td>8939880825112013814</td><td>47</td><td>4</td><td>619.699</td></tr><tr><td>'8939880825112013822',</td><td>1.371.296</td><td>iccid</td><td>8939880825112013822</td><td>47</td><td>5</td><td>619.699</td></tr><tr><td>'8939880825112013830',</td><td>1.371.298</td><td>iccid</td><td>8939880825112013830</td><td>47</td><td>6</td><td>619.699</td></tr><tr><td>'8939880825112013848',</td><td>1.371.300</td><td>iccid</td><td>8939880825112013848</td><td>47</td><td>7</td><td>619.699</td></tr><tr><td>'8939880825112013855',</td><td>1.371.302</td><td>iccid</td><td>8939880825112013855</td><td>47</td><td>8</td><td>619.699</td></tr><tr><td>'8939880825112013863',</td><td>1.371.304</td><td>iccid</td><td>8939880825112013863</td><td>47</td><td>9</td><td>619.699</td></tr><tr><td>'8939880825112013871',</td><td>1.371.306</td><td>iccid</td><td>8939880825112013871</td><td>47</td><td>10</td><td>619.699</td></tr><tr><td>'8939880825112013889',</td><td>1.371.308</td><td>iccid</td><td>8939880825112013889</td><td>47</td><td>11</td><td>619.699</td></tr><tr><td>'8939880825112013897',</td><td>1.371.310</td><td>iccid</td><td>8939880825112013897</td><td>47</td><td>12</td><td>619.699</td></tr><tr><td>'8939880825112013905',</td><td>1.371.312</td><td>iccid</td><td>8939880825112013905</td><td>47</td><td>13</td><td>619.699</td></tr><tr><td>'8939880825112013913',</td><td>1.371.314</td><td>iccid</td><td>8939880825112013913</td><td>47</td><td>14</td><td>619.699</td></tr><tr><td>'8939880825112014010',</td><td>1.371.316</td><td>iccid</td><td>8939880825112014010</td><td>47</td><td>15</td><td>619.699</td></tr><tr><td>'8939880825112014028',</td><td>1.371.318</td><td>iccid</td><td>8939880825112014028</td><td>47</td><td>16</td><td>619.699</td></tr><tr><td>'8939880825112014036',</td><td>1.371.320</td><td>iccid</td><td>8939880825112014036</td><td>47</td><td>17</td><td>619.699</td></tr><tr><td>'8939880825112014044',</td><td>1.371.322</td><td>iccid</td><td>8939880825112014044</td><td>47</td><td>18</td><td>619.699</td></tr></tbody></table></div></div><div class="section" id="DIN1717338322350"><div class="section-column1"><div class="section-title">PAR 2.4 - Estrae ordini per i quali a fronte di una richiesta SOM non è stata ricevuta risposta (DIN1717338322350)<hr></div><pre><code class="language-sql">select 
(select zz.value from detail zz where zz.root_id=d.root_id and zz.name='id_odl_crm' limit 1),
d.*,a.*
from 
action a, 
action_msg b,
request c,request d
where b.id=a.message_id 
and a.name='Send Service Order' 
and a.system='som' 
and a.ts_created&gt;current_date -20
and c.id=a.request_id 
and c.root_id=d.id 
and not exists (select 1 from action z where z.request_id=c.id and z.name='Receive mobile provisioning result')
--and d.root_id in (select root_id from detail where name='id_odl_crm' and value='1-622831680560')
--and d.id=598149
--1nd b.message_xml like  '%po_ANB_SecureEnf%'
--and d.name='Change Order'
limit 5</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>value</th><th>id</th><th>name</th><th>direction</th><th>system</th><th>status</th><th>ts_created</th><th>ts_end</th><th>case_id</th><th>queue_prefix</th><th>document_id</th><th>cfg_id</th><th>parent_id</th><th>root_id</th><th>area</th><th>release</th><th>substatus</th><th>bpme_process_id</th><th>request_detail</th><th>id</th><th>name</th><th>direction</th><th>status</th><th>ts_requested</th><th>ts_created</th><th>ts_enqueued</th><th>ts_first_start</th><th>ts_start</th><th>ts_end</th><th>priority</th><th>ts_todo</th><th>queue</th><th>request_id</th><th>message_id</th><th>system</th><th>cfg_id</th><th>handler</th><th>response_id</th><th>adb_source</th><th>result</th></tr></thead><tbody><tr><td>1-624926682931</td><td>672.508</td><td>Order reactivation</td><td>inbound</td><td>crm</td><td>SA</td><td>2024-05-13 15:34:37.098 +0200</td><td>2024-05-13 15:35:41.721 +0200</td><td>36434</td><td></td><td>112.906</td><td>10</td><td></td><td>672.508</td><td>Order</td><td></td><td></td><td>p:0a201acty</td><td>Riattivazione-Riattivazione</td><td>620.154.607.137</td><td>Send Service Order</td><td>outbound</td><td>SA</td><td>2024-05-13 15:35:02.555 +0200</td><td>2024-05-13 15:34:47.010 +0200</td><td></td><td>2024-05-13 15:35:02.000 +0200</td><td>2024-05-13 15:35:02.000 +0200</td><td>2024-05-13 15:35:07.000 +0200</td><td></td><td></td><td>som-publisher-out</td><td>672.510</td><td>878.716</td><td>som</td><td>25</td><td>com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder</td><td>0</td><td></td><td></td></tr><tr><td>1-625007545428</td><td>674.138</td><td>OutOrder</td><td>inbound</td><td>crm</td><td>SA</td><td>2024-05-14 09:47:49.967 +0200</td><td>2024-05-14 09:48:43.952 +0200</td><td>37062</td><td></td><td>114.313</td><td>8</td><td></td><td>674.138</td><td>Order</td><td></td><td></td><td>p:0a201b0no</td><td>DEACTIVATION-DEACTIVATION</td><td>620.154.626.073</td><td>Send Service Order</td><td>outbound</td><td>SA</td><td>2024-05-14 09:48:14.559 +0200</td><td>2024-05-14 09:48:04.588 +0200</td><td></td><td>2024-05-14 09:48:14.000 +0200</td><td>2024-05-14 09:48:14.000 +0200</td><td>2024-05-14 09:48:17.000 +0200</td><td></td><td></td><td>som-publisher-out</td><td>674.139</td><td>891.429</td><td>som</td><td>25</td><td>com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder</td><td>0</td><td></td><td></td></tr><tr><td>1-624904435223</td><td>672.273</td><td>Activation Order</td><td>inbound</td><td>crm</td><td>SA</td><td>2024-05-13 13:13:40.603 +0200</td><td>2024-05-30 02:14:58.743 +0200</td><td>36245</td><td></td><td>112.705</td><td>1</td><td></td><td>672.273</td><td>Order</td><td></td><td></td><td>p:0a201a93v</td><td>ACTIVATION-ACTIVATION</td><td>620.154.608.374</td><td>Send Service Order</td><td>outbound</td><td>SA</td><td>2024-05-13 16:04:51.379 +0200</td><td>2024-05-13 16:04:29.416 +0200</td><td></td><td>2024-05-13 16:04:51.000 +0200</td><td>2024-05-13 16:04:51.000 +0200</td><td>2024-05-13 16:04:52.000 +0200</td><td></td><td></td><td>som-publisher-out</td><td>672.628</td><td>879.546</td><td>som</td><td>25</td><td>com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder</td><td>0</td><td></td><td></td></tr><tr><td>1-625016899919</td><td>680.185</td><td>Activation Order</td><td>inbound</td><td>crm</td><td>SA</td><td>2024-05-16 12:46:19.127 +0200</td><td>2024-06-01 02:18:04.703 +0200</td><td>39211</td><td></td><td>119.351</td><td>1</td><td></td><td>680.185</td><td>Order</td><td></td><td></td><td>p:0a201dbl6</td><td>ACTIVATION-ACTIVATION_MNP</td><td>620.154.695.989</td><td>Send Service Order</td><td>outbound</td><td>SA</td><td>2024-05-16 14:54:14.610 +0200</td><td>2024-05-16 14:50:46.127 +0200</td><td></td><td>2024-05-16 14:54:14.000 +0200</td><td>2024-05-16 14:54:14.000 +0200</td><td>2024-05-16 14:54:16.000 +0200</td><td></td><td></td><td>som-publisher-out</td><td>680.614</td><td>939.127</td><td>som</td><td>25</td><td>com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder</td><td>0</td><td></td><td></td></tr><tr><td>1-624894234556</td><td>671.726</td><td>Activation Order</td><td>inbound</td><td>crm</td><td>SA</td><td>2024-05-13 10:53:57.123 +0200</td><td>2024-05-27 11:33:10.248 +0200</td><td>36070</td><td></td><td>112.145</td><td>1</td><td></td><td>671.726</td><td>Order</td><td></td><td></td><td>p:0a201a11p</td><td>ACTIVATION-ACTIVATION</td><td>620.154.609.090</td><td>Send Service Order</td><td>outbound</td><td>SA</td><td>2024-05-13 16:24:08.521 +0200</td><td>2024-05-13 16:18:54.640 +0200</td><td></td><td>2024-05-13 16:24:08.000 +0200</td><td>2024-05-13 16:24:08.000 +0200</td><td>2024-05-13 16:24:10.000 +0200</td><td></td><td></td><td>som-publisher-out</td><td>672.690</td><td>880.219</td><td>som</td><td>25</td><td>com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder</td><td>0</td></tr></tbody></table></div></div><div class="section" id="DIN1717338466444"><div class="section-column1"><div class="section-title">PAR 2.5 - Estrae informazioni dalla cfg_action (query 1) (DIN1717338466444)<hr></div><pre><code class="language-sql">select * from cfg_action where system='crm' and direction='outbound' and name='VerifyUpdateDataCutOver'</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>name</th><th>direction</th><th>handler</th><th>system</th><th>request_id</th><th>id</th><th>priority</th><th>endpoint</th><th>flag_lock</th><th>substatus_request</th><th>substatus_request_root</th><th>flag_job_shv</th><th>flag_exclude_cmf</th><th>mercato</th><th>area</th></tr></thead><tbody><tr><td>VerifyUpdateDataCutOver</td><td>outbound</td><td>com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.VerifyDataCutOver</td><td>crm</td><td>1</td><td>85</td><td></td><td>crm-publisher-out</td><td>N</td><td></td><td></td><td>Y</td><td>N</td><td>B2B</td><td>Order</td></tr><tr><td>VerifyUpdateDataCutOver</td><td>outbound</td><td>com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.VerifyDataCutOver</td><td>crm</td><td>2</td><td>396</td><td></td><td>crm-publisher-out</td><td>N</td><td></td><td></td><td>Y</td><td>N</td><td>B2B</td><td>Order</td></tr><tr><td>VerifyUpdateDataCutOver</td><td>outbound</td><td>com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.VerifyDataCutOver</td><td>crm</td><td>15</td><td>275</td><td></td><td>crm-publisher-out</td><td>N</td><td></td><td></td><td>Y</td><td>N</td><td>B2B</td><td>Order</td></tr><tr><td>VerifyUpdateDataCutOver</td><td>outbound</td><td>com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.VerifyDataCutOver</td><td>crm</td><td>19</td><td>375</td><td></td><td>crm-publisher-out</td><td>N</td><td></td><td></td><td>Y</td><td>N</td><td>B2B</td><td>Order</td></tr><tr><td>VerifyUpdateDataCutOver</td><td>outbound</td><td>com2crm-itf-out.module/com2crm_itf_out.processes.businessProcess.orderManagement.VerifyDataCutOver</td><td>crm</td><td>4</td><td>643</td><td></td><td>crm-publisher-out</td><td>N</td><td></td><td></td><td>Y</td><td>N</td><td>B2B</td><td>Order</td></tr></tbody></table></div></div><div class="section" id="DIN1717338756343"><div class="section-column1"><div class="section-title">PAR 2.6 - Estrae EMD della action SOM a partire da id_ordine (DIN1717338756343)<hr></div><pre><code class="language-sql">select z.id,z.name,zz.* from 
      request z,action zz,action_msg x where zz.request_id=z.id and z.name='Network' and zz.name='Send Service Order' and 
      z.root_id      in (select root_id from detail where value in ('1-619821002400')) and 
      zz.message_id=x.id</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>id</th><th>name</th><th>id</th><th>name</th><th>direction</th><th>status</th><th>ts_requested</th><th>ts_created</th><th>ts_enqueued</th><th>ts_first_start</th><th>ts_start</th><th>ts_end</th><th>priority</th><th>ts_todo</th><th>queue</th><th>request_id</th><th>message_id</th><th>system</th><th>cfg_id</th><th>handler</th><th>response_id</th><th>adb_source</th><th>result</th></tr></thead><tbody><tr><td>622.399</td><td>Network</td><td>620.154.080.781</td><td>Send Service Order</td><td>outbound</td><td>SA</td><td>2024-04-17 08:12:09.627 +0200</td><td>2024-04-17 08:12:00.402 +0200</td><td></td><td>2024-04-17 08:12:09.000 +0200</td><td>2024-04-17 08:12:09.000 +0200</td><td>2024-04-17 08:12:12.000 +0200</td><td></td><td></td><td>som-publisher-out</td><td>622.399</td><td>527.751</td><td>som</td><td>25</td><td>com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder</td><td>0</td><td></td><td></td></tr><tr><td>622.400</td><td>Network</td><td>620.154.080.782</td><td>Send Service Order</td><td>outbound</td><td>SA</td><td>2024-04-17 08:14:08.494 +0200</td><td>2024-04-17 08:12:00.399 +0200</td><td></td><td>2024-04-17 08:14:08.000 +0200</td><td>2024-04-17 08:14:08.000 +0200</td><td>2024-04-17 08:14:10.000 +0200</td><td></td><td></td><td>som-publisher-out</td><td>622.400</td><td>527.812</td><td>som</td><td>25</td><td>com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder</td><td>0</td><td></td><td></td></tr><tr><td>624.402</td><td>Network</td><td>620.154.102.569</td><td>Send Service Order</td><td>outbound</td><td>SA</td><td>2024-04-18 04:11:05.716 +0200</td><td>2024-04-18 04:10:52.935 +0200</td><td></td><td>2024-04-18 04:11:05.000 +0200</td><td>2024-04-18 04:11:05.000 +0200</td><td>2024-04-18 04:11:09.000 +0200</td><td></td><td></td><td>som-publisher-out</td><td>624.402</td><td>542.772</td><td>som</td><td>25</td><td>com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder</td><td>0</td><td></td><td></td></tr><tr><td>624.442</td><td>Network</td><td>620.154.102.974</td><td>Send Service Order</td><td>outbound</td><td>SA</td><td>2024-04-18 04:12:01.143 +0200</td><td>2024-04-18 04:11:46.389 +0200</td><td></td><td>2024-04-18 04:12:01.000 +0200</td><td>2024-04-18 04:12:01.000 +0200</td><td>2024-04-18 04:12:03.000 +0200</td><td></td><td></td><td>som-publisher-out</td><td>624.442</td><td>543.047</td><td>som</td><td>25</td><td>com2som-itf-out.module/com2som_itf_out.processes.businessProcess.productOrder.SendProductOrder</td><td>0</td></tr></tbody></table></div></div><div class="section" id="DIN1717338860913"><div class="section-column1"><div class="section-title">PAR 2.7 - Estrae tutte le action verso COMB a partire da id_ordine (DIN1717338860913)<hr></div><pre><code class="language-sql">select b.name,b.id,a.root_id,b.status,a.* from request a, action  b
      where 
      b.request_id=a.id and 
      a.root_id 
      --in (585076      ) 
in (select root_id from detail where value in ('1-619821002400'))
      and b.system='billing' 
      and b.direction='outbound'</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>name</th><th>id</th><th>root_id</th><th>status</th><th>id</th><th>name</th><th>direction</th><th>system</th><th>status</th><th>ts_created</th><th>ts_end</th><th>case_id</th><th>queue_prefix</th><th>document_id</th><th>cfg_id</th><th>parent_id</th><th>root_id</th><th>area</th><th>release</th><th>substatus</th><th>bpme_process_id</th><th>request_detail</th></tr></thead><tbody><tr><td>Active Service Instance</td><td>620.154.080.757</td><td>616.306</td><td>SA</td><td>618.568</td><td>Logistics</td><td>outbound</td><td>gsi</td><td>SA</td><td>2024-04-12 21:41:11.252 +0200</td><td>2024-04-17 08:11:50.845 +0200</td><td>900</td><td></td><td>65.509</td><td>5</td><td>616.306</td><td>616.306</td><td>Order</td><td></td><td></td><td>p:0a20pp5x</td><td>562636824</td></tr><tr><td>Active Service Instance</td><td>620.154.080.755</td><td>616.306</td><td>SA</td><td>618.568</td><td>Logistics</td><td>outbound</td><td>gsi</td><td>SA</td><td>2024-04-12 21:41:11.252 +0200</td><td>2024-04-17 08:11:50.845 +0200</td><td>900</td><td></td><td>65.509</td><td>5</td><td>616.306</td><td>616.306</td><td>Order</td><td></td><td></td><td>p:0a20pp5x</td><td>562636824</td></tr><tr><td>Active Service Instance</td><td>620.154.080.832</td><td>616.306</td><td>SA</td><td>622.399</td><td>Network</td><td>outbound</td><td>som</td><td>SA</td><td>2024-04-17 08:12:00.402 +0200</td><td>2024-04-19 06:02:19.228 +0200</td><td>6062</td><td></td><td>68.977</td><td>3</td><td>616.306</td><td>616.306</td><td>Order</td><td></td><td></td><td>p:0a20rbbs</td><td>ACTIVATION | 3206648991</td></tr><tr><td>Active Service Instance</td><td>620.154.081.099</td><td>616.306</td><td>SA</td><td>622.400</td><td>Network</td><td>outbound</td><td>som</td><td>SA</td><td>2024-04-17 08:12:00.399 +0200</td><td>2024-04-19 04:08:50.228 +0200</td><td>6063</td><td></td><td>69.005</td><td>3</td><td>616.306</td><td>616.306</td><td>Order</td><td></td><td></td><td>p:0a20rbbt</td><td>ACTIVATION | 3206648676</td></tr><tr><td>Change Number Service Instance</td><td>620.154.129.237</td><td>616.306</td><td>SA</td><td>624.402</td><td>Network</td><td>outbound</td><td>som</td><td>SA</td><td>2024-04-18 04:10:52.935 +0200</td><td>2024-04-19 04:08:25.980 +0200</td><td>6063</td><td></td><td>70.827</td><td>3</td><td>616.306</td><td>616.306</td><td>Order</td><td></td><td></td><td>p:0a20s2cf</td><td>CHANGE_NUMBER_MNP | DCO: 19-04-2024 | FROM: 3206648676 TO: 3287199235</td></tr><tr><td>Change Number Service Instance</td><td>620.154.130.968</td><td>616.306</td><td>SA</td><td>624.442</td><td>Network</td><td>outbound</td><td>som</td><td>SA</td><td>2024-04-18 04:11:46.389 +0200</td><td>2024-04-19 06:01:56.712 +0200</td><td>6062</td><td></td><td>70.859</td><td>3</td><td>616.306</td><td>616.306</td><td>Order</td><td></td><td></td><td>p:0a20s2sh</td><td>CHANGE_NUMBER_MNP | DCO: 19-04-2024 | FROM: 3206648991 TO: 3316422906</td></tr></tbody></table></div></div></div><div class="chapter-container" id="DIN1717339283017"><div class="chapter-title">CAP 3 - Estrazioni provisioning SOM(DIN1717339283017)</div><button class="chapter-button">Aggiungi Paragrafo</button><button class="chapter-button">Elimina Paragrafo</button><div class="section" id="DIN1717339748096"><div class="section-column1"><div class="section-title">PAR 3.1 - Esegue parsing dell'errore sui fallimenti SOM (DIN1717339748096)<hr></div><pre><code class="language-sql">select 
          regexp_match(fd.document_xml, '{"code":(.*?)}') codice_errore,--recupera i ko som
          z.name,z.id,z.system,fd.* from action z,fault a,fault_doc fd,request b  
          where 
      z.status='FA' and
      b.id=z.request_id and 
      b.root_id in (select b.root_id from action a,request b where a.status='FA' 
      and a.system='som' 
      and a.direction='outbound'
      and a.request_id=b.id
)and
      a.action_id =z.id and
      fd.id =a.document_id and z.system='som'
      limit 4</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>codice_errore</th><th>name</th><th>id</th><th>system</th></tr></thead><tbody><tr><td>{"\"EOC_ERROR_1002\",\"reason\":\"Missing mandatory field paymentType : null for poName : po_CB_T_P65_NA_001.\",\"message\":\"Order will not be created due to incomplete or incorrect data\",\"status\":\"400\""}</td><td>Send Service Order</td><td>620.153.324.379</td><td>som</td></tr><tr><td></td><td>Send Service Order</td><td>620.153.324.379</td><td>som</td></tr><tr><td>{"\"EOC_ERROR_1002\",\"reason\":\"Missing mandatory field RelatedEntity_IMSI.\",\"message\":\"Order will not be created due to incomplete or incorrect data\",\"status\":\"400\""}</td><td>Send Service Order</td><td>620.153.481.214</td><td>som</td></tr><tr><td>{"\"EOC_W3_ORDER_0003\",\"reason\":\"MSISDN Not Active!\",\"message\":\"This order will not be created because the customerId does not exist in SR\",\"status\":\"400\""}</td><td>Send Service Order</td><td>620.153.925.995</td><td>som</td></tr></tbody></table></div></div></div><div class="chapter-container" id="DIN1717340190450"><div class="chapter-title">CAP 4 - Estrazioni provisioning GSI(DIN1717340190450)</div><button class="chapter-button">Aggiungi Paragrafo</button><button class="chapter-button">Elimina Paragrafo</button><div class="section" id="DIN1717340494447"><div class="section-column1"><div class="section-title">PAR 4.1 - Estrae action GSI da dettagli dall'EMF (DIN1717340494447)<hr></div><pre><code class="language-sql">SELECT a.* FROM ACTION a, action_msg b
WHERE 
a.message_id=b.id AND
b.message_xml LIKE '%Reintegro per furto - Kasko Premium%'
AND a.name='Send Logistic Order to GSI'
AND a.status='SA'
AND a.ts_created&gt;current_date-80</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>id</th><th>name</th><th>direction</th><th>status</th><th>ts_requested</th><th>ts_created</th><th>ts_enqueued</th><th>ts_first_start</th><th>ts_start</th><th>ts_end</th><th>priority</th><th>ts_todo</th><th>queue</th><th>request_id</th><th>message_id</th><th>system</th><th>cfg_id</th><th>handler</th><th>response_id</th><th>adb_source</th><th>result</th></tr></thead><tbody><tr><td>620.153.950.220</td><td>Send Logistic Order to GSI</td><td>outbound</td><td>SA</td><td>2024-04-04 15:23:03.794 +0200</td><td>2024-04-04 15:23:03.798 +0200</td><td></td><td>2024-04-04 15:23:04.000 +0200</td><td>2024-04-04 15:23:04.000 +0200</td><td>2024-04-04 15:23:05.000 +0200</td><td></td><td></td><td>gsi-publisher-out</td><td>611.096</td><td>438.973</td><td>gsi</td><td>84</td><td>com2gsi.module/com2gsi.processes.businessProcess.SendOrderOut</td><td>0</td><td></td><td></td></tr><tr><td>620.154.140.532</td><td>Send Logistic Order to GSI</td><td>outbound</td><td>SA</td><td>2024-04-19 12:46:26.493 +0200</td><td>2024-04-19 12:46:26.500 +0200</td><td></td><td>2024-04-19 12:46:26.000 +0200</td><td>2024-04-19 12:46:26.000 +0200</td><td>2024-04-19 12:46:28.000 +0200</td><td></td><td></td><td>gsi-publisher-out</td><td>628.013</td><td>568.457</td><td>gsi</td><td>84</td><td>com2gsi.module/com2gsi.processes.businessProcess.SendOrderOut</td><td>0</td></tr></tbody></table></div></div></div><div class="chapter-container" id="DIN1717341107452"><div class="chapter-title">CAP 5 - Estrazioni provisioning BILLING(DIN1717341107452)</div><button class="chapter-button">Aggiungi Paragrafo</button><button class="chapter-button">Elimina Paragrafo</button><div class="section" id="DIN1717341162103"><div class="section-column1"><div class="section-title">PAR 5.1 - Estrae action billing a partire dal tel_no (DIN1717341162103)<hr></div><pre><code class="language-sql">select --d.value,b.name,b.id,a.root_id,b.status,
      distinct b.name,d.value,a.ts_created,a.name,a.status from request a, action  b,detail d
      where 
      b.request_id=a.id  
            and b.system='billing' and b.direction='outbound'
and a.root_id=d.root_id  and  d.name = 'tel_no' and b.name in ('Deactivation Service Instance','Active Service Instance')
and d.value IN (
'3801225517'
) order by 2</code></pre><button class="chapter-button">Copia codice</button><button class="chapter-button">Modifica codice</button><button class="chapter-button">Torna inizio</button></div><div class="section-column2"><table><thead><tr class="first-row"><th>name</th><th>value</th><th>ts_created</th><th>name</th><th>status</th></tr></thead><tbody><tr><td>Active Service Instance</td><td>3801225517</td><td>2024-02-07 15:30:38.546 +0100</td><td>Network</td><td>SA</td></tr><tr><td>Active Service Instance</td><td>3801225517</td><td>2024-02-08 22:41:12.884 +0100</td><td>Logistics</td><td>SA</td></tr><tr><td>Deactivation Service Instance</td><td>3801225517</td><td>2024-04-03 17:21:02.667 +0200</td><td>Network</td><td>SA</td></tr></tbody></table></div></div></div></body></html>